---
layout: default
---

   <h2 class="title">Returning References</h2>
   <p class="para">
    Returning by reference is useful when you want to use a function
    to find to which variable a reference should be bound. Do
    <em class="emphasis">not</em> use return-by-reference to increase performance.
    The engine will automatically optimize this on its own. Only return
    references when you have a valid technical reason to do so. To
    return references, use this syntax:
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class&#xA0;</span><span style="color: #0000BB">foo&#xA0;</span><span style="color: #007700">{<br>&#xA0;&#xA0;&#xA0;&#xA0;public&#xA0;</span><span style="color: #0000BB">$value&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">42</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;&#xA0;&#xA0;public&#xA0;function&#xA0;&amp;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">()&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;return&#xA0;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;}<br>}<br><br></span><span style="color: #0000BB">$obj&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$myValue&#xA0;</span><span style="color: #007700">=&#xA0;&amp;</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getValue</span><span style="color: #007700">();&#xA0;</span><span style="color: #FF8000">//&#xA0;$myValue&#xA0;is&#xA0;a&#xA0;reference&#xA0;to&#xA0;$obj-&gt;value,&#xA0;which&#xA0;is&#xA0;42.<br></span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br>echo&#xA0;</span><span style="color: #0000BB">$myValue</span><span style="color: #007700">;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;prints&#xA0;the&#xA0;new&#xA0;value&#xA0;of&#xA0;$obj-&gt;value,&#xA0;i.e.&#xA0;2.<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    In this example, the property of the object returned by the
    <var class="varname"><var class="varname">getValue</var></var> function would be set, not the
    copy, as it would be without using reference syntax.
   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <span class="simpara">
     Unlike parameter passing, here you have to use
     <em>&amp;</em> in both places - to indicate that you
     want to return by reference, not a copy, and to indicate that
     reference binding, rather than usual assignment, should be done
     for <var class="varname"><var class="varname">$myValue</var></var>.
    </span>
   </p></blockquote>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <span class="simpara">
     If you try to return a reference from a function with the syntax:
     <em>return ($this-&gt;value);</em> this will <em class="emphasis">not</em>
     work as you are attempting to return the result of an
     <em class="emphasis">expression</em>, and not a variable, by reference. You can
     only return variables by reference from a function - nothing else.
     Since PHP 5.1.0, an
     <strong><code>E_NOTICE</code></strong> error is issued if the code tries to return
     a dynamic expression or a result of the <em>new</em> operator.
    </span>
   </p></blockquote>
   <p class="para">
   To use the returned reference, you must use reference assigment:
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&#xA0;&amp;</span><span style="color: #0000BB">collector</span><span style="color: #007700">()&#xA0;{<br>&#xA0;&#xA0;static&#xA0;</span><span style="color: #0000BB">$collection&#xA0;</span><span style="color: #007700">=&#xA0;array();<br>&#xA0;&#xA0;return&#xA0;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">$collection&#xA0;</span><span style="color: #007700">=&#xA0;&amp;</span><span style="color: #0000BB">collector</span><span style="color: #007700">();<br></span><span style="color: #0000BB">$collection</span><span style="color: #007700">[]&#xA0;=&#xA0;</span><span style="color: #DD0000">&apos;foo&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   To pass the returned reference to another function expecting a reference
   you can use this syntax:
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&#xA0;&amp;</span><span style="color: #0000BB">collector</span><span style="color: #007700">()&#xA0;{<br>&#xA0;&#xA0;static&#xA0;</span><span style="color: #0000BB">$collection&#xA0;</span><span style="color: #007700">=&#xA0;array();<br>&#xA0;&#xA0;return&#xA0;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">array_push</span><span style="color: #007700">(</span><span style="color: #0000BB">collector</span><span style="color: #007700">(),&#xA0;</span><span style="color: #DD0000">&apos;foo&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <span class="simpara">
      Note that <em>array_push(&amp;collector(), &apos;foo&apos;);</em> will
      <em class="emphasis">not</em> work, it results in a fatal error.
    </span>
   </p></blockquote>
  