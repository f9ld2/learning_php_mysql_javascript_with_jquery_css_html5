---
layout: default
title: "Exploring JavaScript"
---
<h2>Exploring JavaScript</h2>
<span>JavaScript brings a dynamic functionality to your websites. Every time you see something pop up when you mouse over an item in the browser, or see new text, colors, or images appear on the page in front of your eyes, or grab an object on the page and drag it to a new location&mdash;all those things are done through JavaScript. It offers effects that are not otherwise possible, because it runs inside the browser and has direct access to all the elements in a web document.</span>
<br/>
<span>JavaScript first appeared in the Netscape Navigator browser in 1995, coinciding with the addition of support for Java technology in the browser. Because of the initial incorrect impression that JavaScript was a spin-off of Java, there has been some long- term confusion over their relationship. However, the naming was just a marketing ploy to help the new scripting language benefit from the popularity of the Java programming language.</span>
<br/>
<span>JavaScript gained new power when the HTML elements of the web page got a more formal, structured definition in what is called the Document Object Model , or DOM. The DOM makes it relatively easy to add a new paragraph or focus on a piece of text and change it.</span>
<br/>
<span>Because both JavaScript and PHP support much of the structured programming syntax used by the C programming language, they look very similar to each other. They are both fairly high-level languages, too; for instance, they are weakly typed, so it&rsquo;s easy to change a variable to a new type just by using it in a new context.</span>
<br/>
<span>Now that you have learned PHP, you should find JavaScript even easier. And you&rsquo;ll be glad you did, because it&rsquo;s at the heart of the Web 2.0 Ajax technology that provides the fluid web frontends that (along with HTML5 features) savvy web users expect these days.</span>
<h3>JavaScript and HTML Text</h3>
<span>JavaScript is a client-side scripting language that runs entirely inside the web browser. To call it up, you place it between opening &lt;script&gt; and closing &lt;/script&gt; HTML tags. A typical HTML 4.01 &ldquo;Hello World&rdquo; document using JavaScript might look like Example 13-1.</span>
<br/>
<span>Example 13-1. &ldquo;Hello World&rdquo; displayed using JavaScript</span>
<pre>
<code class="javascript">
&lt;html&gt;
    &lt;head&gt;&lt;title&gt;Hello World&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
        &lt;script type="text/javascript"&gt;
            document.write("Hello World")
        &lt;/script&gt;

        &lt;noscript&gt;
            Your browser doesn't support or has disabled JavaScript
        &lt;/noscript&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>You may have seen web pages that use the HTML tag &lt;script language="javascript"&gt; , but that usage has now been deprecated. This example uses the more recent and preferred &lt;script type="text/javascript"&gt; , or you can just use &lt;script&gt; on its own if you like.</span>
<br/>
<span>Within the &lt;script&gt; tags is a single line of JavaScript code that uses its equivalent of the PHP echo or print commands, document.write. As you&rsquo;d expect, it simply outputs the supplied string to the current document, where it is displayed.</span>
<br/>
<span>You may also have noticed that, unlike with PHP, there is no trailing semicolon ( ; ). This is because a newline serves the same purpose as a semicolon in JavaScript. However, if you wish to have more than one statement on a single line, you do need to place a semicolon after each command except the last one. Of course, if you wish, you can add a semicolon to the end of every statement, and your JavaScript will work fine.</span>
<br/>
<span>The other thing to note in this example is the &lt;noscript&gt; and &lt;/noscript&gt; pair of tags. These are used when you wish to offer alternative HTML to users whose browser does not support JavaScript or who have it disabled. Using these tags is up to you, as they are not required, but you really ought to use them because it&rsquo;s usually not that difficult to provide static HTML alternatives to the operations you provide using JavaScript. However, the remaining examples in this book will omit &lt;noscript&gt; tags, because we&rsquo;re focusing on what you can do with JavaScript, not what you can do without it.</span>
<br/>
<span>When Example 13-1 is loaded, a web browser with JavaScript enabled will output the following (see Figure 13-1 ):</span>
<br/>
<span>Hello World</span>
<p><img src="images/13.1.png"/></p>
<span>Figure 13-1. JavaScript, enabled and working</span>
<br/>
<span>A browser with JavaScript disabled will display this message (see Figure 13-2 ):</span>
<pre><code class="javascript">Your browser doesn't support or has disabled JavaScript.</code></pre>
<p><img src="images/13.2.png"/></p>
<span>Figure 13-2. JavaScript has been disabled</span>
<br/>
<h4>Using Scripts Within a Document Head</h4>
<span>In addition to placing a script within the body of a document, you can put it in the &lt;head&gt; section, which is the ideal place if you wish to execute a script when a page loads. If you place critical code and functions there, you can also ensure that they are ready to use immediately by any other script sections in the document that rely on them.</span>
<br/>
<span>Another reason for placing a script in the document head is to enable JavaScript to write things such as meta tags into the &lt;head&gt; section, because the location of your script is the part of the document it writes to by default.</span>
<h4>Older and Nonstandard Browsers</h4>
<span>If you need to support browsers that do not offer scripting, you will need to use the HTML comment tags ( &lt;!-- and --&gt; ) to prevent them from encountering script code that they should not see. Example 13-2 shows how you add them to your script code.</span>
<br/>
<span>Example 13-2. The &ldquo;Hello World&rdquo; example modified for non-JavaScript browsers</span>
<pre>
<code class="javascript">
&lt;html&gt;
    &lt;head&gt;&lt;title&gt;Hello World&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
        &lt;script type="text/javascript"&gt;
            document.write("Hello World")
        &lt;/script&gt;

        &lt;noscript&gt;
            Your browser doesn't support or has disabled JavaScript
        &lt;/noscript&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>Here an opening HTML comment tag ( &lt;!-- ) has been added directly after the opening &lt;script&gt; statement and a closing comment tag ( // --&gt; ) directly before the script is closed with &lt;/script&gt;.</span>
<br/>
<span>The double forward slash ( // ) is used by JavaScript to indicate that the rest of the line is a comment. It is there so that browsers that do support JavaScript will ignore the following --&gt; , but non-JavaScript browsers will ignore the preceding // , and act on the --&gt; by closing the HTML comment.</span>
<br/>
<span>Although the solution is a little convoluted, all you really need to remember is to use the two following lines to enclose your JavaScript when you wish to support very old or nonstandard browsers:</span>
<pre>
<code class="javascript">
&lt;script type="text/javascript"&gt;&lt;!&mdash;
(Your JavaScript goes here...)
// --&gt;&lt;/script&gt;
</code>
</pre>
<span>However, the use of these comments is unnecessary for any browser released over the past several years.</span>
<br/>
<span>There are a couple of other scripting languages you should know about. These include Microsoft&rsquo;s VBScript, which is based on the Visual Basic programming language, and Tcl, a rapid prototyping language. They are called up in a similar way to JavaScript, except they use types of text/vbscript and text/tcl , respectively. VBScript works only in Internet Explorer; use of it in other browsers requires a plug-in. Tcl always needs a plug-in. So both should be considered nonstandard, and neither is covered in this book.</span>
<h4>Including JavaScript Files</h4>
<span>In addition to writing JavaScript code directly in HTML documents, you can include files of JavaScript code either from your website or from anywhere on the Internet. The syntax for this is as follows:</span>
<pre><code class="javascript">&lt;script type="text/javascript" src="script.js"&gt;&lt;/script&gt;</code></pre>
<span>Or, to pull a file in from the Internet, use this:</span>
<pre>
<code class="javascript">
&lt;script type="text/javascript" src="http://someserver.com/script.js"&gt;
&lt;/script&gt;
</code>
</pre>
<span>As for the script files themselves, they must not include any &lt;script&gt; or &lt;/script&gt; tags, because they are unnecessary: the browser already knows that a JavaScript file is being loaded. Putting them in the JavaScript files will cause an error.</span>
<br/>
<span>Including script files is the preferred way for you to use third-party JavaScript files on your website.</span>
<br/>
<span>It is possible to leave out the type="text/javascript" parameters; all modern browsers default to assuming that the script contains JavaScript.</span>
<h4>Debugging JavaScript Errors</h4>
<span>When you&rsquo;re learning JavaScript, it&rsquo;s important to be able to track typing or other coding errors. Unlike PHP, which displays error messages in the browser, JavaScript handles error messages in a way that changes according to the browser used. Table 13-1 lists how to access JavaScript error messages in each of the five most commonly used browsers.</span>
<br/>
<span>Table 13-1. Accessing JavaScript error messages in different browsers</span>
<table class="tbl-left">
    <tr>
        <td>Browser</td>
        <td>How to access JavaScript error messages</td>
    </tr>
    <tr>
        <td>Apple Safari</td>
        <td>Safari does not have an Error Console enabled by default, but you can turn it on by selecting
        Safari
        &rarr;
        Preferences
        &rarr;
        Advanced
        &rarr;
        &ldquo;Show Develop menu in menu bar.&rdquo; However, you may prefer
        to use the
        Firebug Lite JavaScript module
        , which many people find easier to use.</td>
    </tr>
    <tr>
        <td>Google Chrome</td>
        <td>Click the menu icon that looks like a page with a corner turned; then select
        Developer
        &rarr;
        JavaScript Console. You can also use the shortcut Ctrl-Shift-J on a PC, or Command-
        Shift-J on a Mac.</td>
    </tr>
    <tr>
        <td>Microsoft Internet Explorer</td>
        <td>Select Tools
        &rarr;
        Internet Options
        &rarr;
        Advanced; then uncheck the Disable Script Debugging box and
        check the &ldquo;Display a Notification about Every Script Error&rdquo; box.</td>
    </tr>
    <tr>
        <td>Mozilla Firefox</td>
        <td>Select Tools
        &rarr;
        Error Console or use the shortcut Ctrl-Shift-J on a PC, or Command-Shift-J on a Mac.</td>
    </tr>
    <tr>
        <td>Opera</td>
        <td>Select Tools
        &rarr;
        Advanced
        &rarr;
        Error Console.</td>
    </tr>
</table><br/>
<span>OS X users: Although I have shown you how to create an Error Console for JavaScript, you may prefer to use Google Chrome (for Intel OS X 10.5 or higher).</span>
<br/>
<span>To try out whichever Error Console you are using, let&rsquo;s create a script with a minor error. Example 13-3 is much the same as Example 13-1 , but the final double quotation mark has been left off the end of the string "Hello World" &mdash; a common syntax error.</span>
<br/>
<span>Example 13-3. A JavaScript &ldquo;Hello World&rdquo; script with an error</span>
<pre>
<code class="javascript">
&lt;html&gt;
    &lt;head&gt;&lt;title&gt;Hello World&lt;/title&gt;&lt;/head&gt;
    &lt;body&gt;
        &lt;script type="text/javascript"&gt;
            document.write("Hello World)
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>Type the example and save it as test.html ; then call it up in your browser. It should succeed only in displaying the title, not anything in the main browser window. Now call up the Error Console in your browser, and you should see a message such as the one in &nbsp;Example 13-4. To the right there will be a link to the source, which, when clicked, shows the error line highlighted (but does not indicate the position at which the error was encountered).</span>
<br/>
<span>Example 13-4. A Mozilla Firefox Error Console message</span>
<br/>
<b class="t30">SyntaxError: unterminated string literal</b>
<br/>
<span>In Microsoft Internet Explorer, the error message will look like &nbsp;Example 13-5 , and there&rsquo;s no helpful arrow, but you are given the line and position.</span>
<br/>
<span>Example 13-5. A Microsoft Internet Explorer Error Console message</span>
<br/>
<b class="t30">unterminated string constant</b>
<br/>
<span>Google Chrome and Opera will give the message in Example 13-6. Again, you&rsquo;ll be given the line error number but not the exact location.</span>
<br/>
<span>Example 13-6. A Google Chrome/Opera Error Console message</span>
<br/>
<b class="t30">Uncaught SyntaxError: Unexpected token ILLEGAL</b>
<br/>
<span>And Apple Safari provides the message in Example 13-7 , with a link to the source on the right stating the line number of the error. You can click the link to highlight the line, but it will not show where on the line the error occurred.</span>
<br/>
<span>Example 13-7. An Opera Error Console message</span>
<br/>
<b class="t30">SyntaxError: Unexpected EOF</b>
<br/>
<span>If you find this support a little underwhelming, the Firebug plug-in for Firefox (and now Chrome too) at http://getfirebug.com is very popular among JavaScript developers and is definitely worth a look.</span>
<br/>
<span>If you will be typing the following code snippets to try them out, don&rsquo;t forget to surround them with &lt;script&gt; and &lt;/script&gt; tags.</span>
<h3>Using Comments</h3>
<span>Because of their shared inheritance from the C programming language, PHP and JavaScript have many similarities, one of which is commenting. First, there&rsquo;s the single-line comment, like this:</span>
<pre><code class="javascript">// This is a comment</code></pre>
<span>This style uses a pair of forward slash characters ( // ) to inform JavaScript that everything following is to be ignored. You also have multiline comments, like this:</span>
<pre>
<code class="javascript">
/*  This is a section
    of multiline comments
    that will not be
    interpreted */
</code>
</pre>
<span>Here you start a multiline comment with the sequence /* and end it with */. Just remember that you cannot nest multiline comments, so make sure that you don&rsquo;t comment out large sections of code that already contain multiline comments.</span>
<h3>Semicolons</h3>
<span>Unlike PHP, JavaScript generally does not require semicolons if you have only one statement on a line. Therefore, the following is valid:</span>
<pre><code class="javascript">x += 10</code></pre>
<span>However, when you wish to place more than one statement on a line, you must separate them with semicolons, like this:</span>
<pre><code class="javascript">x += 10; y -= 5; z = 0</code></pre>
<span>You can normally leave the final semicolon off, because the newline terminates the final statement. There are exceptions to the semicolon rule. If you write JavaScript bookmarklets, or end a statement with a variable or function reference, and the first character of the line below is a left parenthesis or bracket, you &nbsp;must &nbsp;remember to append a semicolon or the JavaScript will fail. So, when in doubt, use a semicolon.</span>
<h3>Variables</h3>
<span>No particular character identifies a variable in JavaScript as the dollar sign does in</span>
<br/>
<span>PHP. Instead, variables use the following naming rules: &bull; A variable may include only the letters a-z , A-Z , 0-9 , the $ symbol, and the underscore ( _ ).</span>
<br/>
<span>&bull; No other characters, such as spaces or punctuation, are allowed in a variable name.</span>
<br/>
<span>&bull; The first character of a variable name can be only a-z , A-Z , $ , or _ (no numbers).</span>
<br/>
<span>&bull; Names are case-sensitive. Count , count , and COUNT are all different variables.</span>
<br/>
<span>&bull; There is no set limit on variable name lengths.</span>
<br/>
<span>And yes, you&rsquo;re right that is a $ there in that list. It is allowed by JavaScript and may be the first character of a variable or function name. Although I don&rsquo;t recommend keeping the $ symbols, it means that you can port a lot of PHP code more quickly to JavaScript that way.</span>
<h4>String Variables</h4>
<span>JavaScript string variables should be enclosed in either single or double quotation marks, like this:</span>
<pre>
<code class="javascript">
greeting = "Hello there"
warning = 'Be careful'
</code>
</pre>
<span>You may include a single quote within a double-quoted string or a double quote within a single-quoted string. But you must escape a quote of the same type by using the backslash character, like this:</span>
<pre>
<code class="javascript">
greeting = "\"Hello there\" is a greeting"
warning = '\'Be careful\' is a warning'
</code>
</pre>
<span>To read from a string variable, you can assign it to another one, like this:</span>
<pre><code class="javascript">newstring = oldstring</code></pre>
<span>or you can use it in a function, like this:</span>
<pre>
<code class="javascript">
status = "All systems are working"
document.write(status)
</code>
</pre>
<h4>Numeric Variables</h4>
<span>Creating a numeric variable is as simple as assigning a value, like these examples:</span>
<pre>
<code class="javascript">
count = 42
temperature = 98.4
</code>
</pre>
<span>Like strings, numeric variables can be read from and used in expressions and functions.</span>
<h4>Arrays</h4>
<span>JavaScript arrays are also very similar to those in PHP, in that an array can contain string or numeric data, as well as other arrays. To assign values to an array, use the following syntax (which in this case creates an array of strings):</span>
<pre>
<code class="javascript">
toys = ['bat', 'ball', 'whistle', 'puzzle', 'doll']
</code>
</pre>
<span>To create a multidimensional array, nest smaller arrays within a larger one. So, to create a two-dimensional array containing the colors of a single face of a scrambled Rubik&rsquo;s Cube (where the colors red, green, orange, yellow, blue, and white are represented by their capitalized initial letters), you could use the following code:</span>
<pre>
<code class="javascript">
face = [
    ['R', 'G', 'Y'],
    ['W', 'R', 'O'],
    ['Y', 'W', 'G']
];
</code>
</pre>
<span>The previous example has been formatted to make it obvious what is going on, but it could also be written like this:</span>
<pre><code class="javascript">face = [['R', 'G', 'Y'], ['W', 'R', 'O'], ['Y', 'W', 'G']]</code></pre>
<span>or even like this:</span>
<pre>
<code class="javascript">
top = ['R', 'G', 'Y']
mid = ['W', 'R', 'O']
bot = ['Y', 'W', 'G']
face = [top, mid, bot]
</code>
</pre>
<span>To access the element two down and three along in this matrix, you would use the following (because array elements start at position 0):</span>
<pre><code class="javascript">document.write(face[1][2])</code></pre>
<span>This statement will output the letter O for orange.</span>
<br/>
<span>JavaScript arrays are powerful storage structures, so Chapter 15 dis cusses them in much greater depth.</span>
<h3>Operators</h3>
<span>Operators in JavaScript, as in PHP, can involve mathematics, changes to strings, and comparison and logical operations ( and , or , etc.). JavaScript mathematical operators look a lot like plain arithmetic; for instance, the following statement outputs 15 :</span>
<pre><code class="javascript">document.write(13 + 2)</code></pre>
<span>The following sections teach you about the various operators.</span>
<h4>Arithmetic Operators</h4>
<span>Arithmetic operators &nbsp;are used to perform mathematics. You can use them for the main four operations (addition, subtraction, multiplication, and division) as well as to find the modulus (the remainder after a division) and to increment or decrement a value (see Table 13-2 ).</span>
<br/>
<span>Table 13-2. Arithmetic operators</span>
<table class="tbl-left">
    <tr>
        <td>Operator</td>
        <td>Description</td>
        <td>Example</td>
    </tr>
    <tr>
        <td>+</td>
        <td>Addition</td>
        <td>j+12</td>
    </tr>
    <tr>
        <td>-</td>
        <td>Subtraction</td>
        <td>j-22</td>
    </tr>
    <tr>
        <td>*</td>
        <td>Multiplication</td>
        <td>j*7</td>
    </tr>
    <tr>
        <td>/</td>
        <td>Division</td>
        <td>j/3.13</td>
    </tr>
    <tr>
        <td>%</td>
        <td>Modulus (division remainder)</td>
        <td>j%6</td>
    </tr>
    <tr>
        <td>++</td>
        <td>Increment</td>
        <td>++j</td>
    </tr>
    <tr>
        <td>--</td>
        <td>Decrement</td>
        <td>--j</td>
    </tr>
</table>
<h4>Assignment Operators</h4>
<span>The &nbsp;assignment &nbsp;operators &nbsp;are used to assign values to variables. They start with the very simple = , and move on to += , -= , and so on. The operator += adds the value on the right side to the variable on the left, instead of totally replacing the value on the left. Thus, if count starts with the value 6 , the statement</span>
<pre><code class="javascript">count += 1</code></pre>
<span>sets count to 7 , just like the more familiar assignment statement:</span>
<pre><code class="javascript">count = count + 1</code></pre>
<span>Table 13-3 lists the various assignment operators available.</span>
<br/>
<span>Table 13-3. Assignment operators</span>
<table class="tbl-left">
    <tr>
        <td>Operator</td>
        <td>Example</td>
        <td>Equivalent to</td>
    </tr>
    <tr>
        <td>=</td>
        <td>j = 99</td>
        <td>j = 99</td>
    </tr>
    <tr>
        <td>+=</td>
        <td>j += 2</td>
        <td>j = j + 2</td>
    </tr>
    <tr>
        <td>+=</td>
        <td>j += 'string'</td>
        <td>j = j + 'string'</td>
    </tr>
    <tr>
        <td>-=</td>
        <td>j -= 12</td>
        <td>j = j - 12</td>
    </tr>
    <tr>
        <td>*=</td>
        <td>j *= 2</td>
        <td>j = j * 2</td>
    </tr>
    <tr>
        <td>/=</td>
        <td>j /= 6</td>
        <td>j = j / 6</td>
    </tr>
    <tr>
        <td>%=</td>
        <td>j %= 7</td>
        <td>j = j % 7</td>
    </tr>
</table>
<h4>Comparison Operators</h4>
<span>Comparison operators are generally used inside a construct such as an if statement, where you need to compare two items. For example, you may wish to know whether a variable you have been incrementing has reached a specific value, or whether another variable is less than a set value, and so on (see Table 13-4 ).</span>
<br/>
<span>Table 13-4. Comparison operators</span>
<table class="tbl-left">
    <tr>
        <td>Operator</td>
        <td>Description</td>
        <td>Example</td>
    </tr>
    <tr>
        <td>==</td>
        <td>Is equal to</td>
        <td>j == 42</td>
    </tr>
    <tr>
        <td>!=</td>
        <td>Is not equal to</td>
        <td>j != 17</td>
    </tr>
    <tr>
        <td>&gt;</td>
        <td>Is greater than</td>
        <td>j &gt; 0</td>
    </tr>
    <tr>
        <td>&lt;</td>
        <td>Is less than</td>
        <td>j &lt; 100</td>
    </tr>
    <tr>
        <td>&gt;=</td>
        <td>Is greater than or equal to</td>
        <td>j &gt;= 23</td>
    </tr>
    <tr>
        <td>&lt;=</td>
        <td>Is less than or equal to</td>
        <td>j &lt;= 3</td>
    </tr>
    <tr>
        <td>===</td>
        <td>Is equal to (and of the same type)</td>
        <td>j === 56</td>
    </tr>
    <tr>
        <td>!==</td>
        <td>Is not equal to (and of the same type)</td>
        <td>j !== '1'</td>
    </tr>
</table>
<h4>Logical Operators</h4>
<span>Unlike PHP, JavaScript&rsquo;s logical operators do not include and and or equivalents to &amp;&amp; and || , and there is no xor operator (see Table 13-5 ).</span>
<br/>
<span>Table 13-5. Logical operators</span>
<table class="tbl-left">
    <tr>
        <td>Operator</td>
        <td>Description</td>
        <td>Example</td>
    </tr>
    <tr>
        <td>&amp;&amp;</td>
        <td>And</td>
        <td>j == 1 &amp;&amp; k == 2</td>
    </tr>
    <tr>
        <td>||</td>
        <td>Or</td>
        <td>j &lt; 100 || j &gt; 0</td>
    </tr>
    <tr>
        <td>!</td>
        <td>Not</td>
        <td>! (j == k)</td>
    </tr>
</table>
<h4>Variable Incrementing and Decrementing</h4>
<span>The following forms of post- and pre-incrementing and decrementing you learned to use in PHP are also supported by JavaScript:</span>
<pre>
<code class="javascript">
++x
--y
x += 22
y -= 3
</code>
</pre>
<h4>String Concatenation</h4>
<span>JavaScript handles string concatenation slightly differently from PHP. Instead of the. (period) operator, it uses the plus sign ( + ), like this:</span>
<pre><code class="javascript">document.write("You have " + messages + " messages.")</code></pre>
<span>Assuming that the variable messages is set to the value 3 , the output from this line of code will be as follows:</span>
<br/>
<b class="t30">You have 3 messages.</b>
<br/>
<span>Just as you can add a value to a numeric variable with the += operator, you can also append one string to another the same way:</span>
<pre>
<code class="javascript">
name = "James"
name += " Dean"
</code>
</pre>
<h4>Escaping Characters</h4>
<span>Escape characters, which you&rsquo;ve seen used to insert quotation marks in strings, can also insert various special characters such as tabs, newlines, and carriage returns. Here is an example using tabs to lay out a heading; it is included here merely to illustrate escapes, because in web pages, there are better ways to do layout:</span>
<pre><code class="javascript">heading = "Name\tAge\tLocation"</code></pre>
<span>Table 13-6 details the escape characters available.</span>
<br/>
<span>Table 13-6. JavaScript&rsquo;s escape characters</span>
<table class="tbl-left">
    <tr>
        <td>Character</td>
        <td>Meaning</td>
    </tr>
    <tr>
        <td>\b</td>
        <td>Backspace</td>
    </tr>
    <tr>
        <td>\f</td>
        <td>Form feed</td>
    </tr>
    <tr>
        <td>\n</td>
        <td>New line</td>
    </tr>
    <tr>
        <td>\r</td>
        <td>Carriage return</td>
    </tr>
    <tr>
        <td>\t</td>
        <td>Tab</td>
    </tr>
    <tr>
        <td>\'</td>
        <td>Single quote (or apostrophe)</td>
    </tr>
    <tr>
        <td>\"</td>
        <td>Double quote</td>
    </tr>
    <tr>
        <td>\\</td>
        <td>Backslash</td>
    </tr>
    <tr>
        <td>\XXX</td>
        <td>An octal number between
        000
        and
        377
        that represents the Latin-1 character equivalent (such as
        \251
        for the
        &copy; symbol)</td>
    </tr>
    <tr>
        <td>\xXX</td>
        <td>A hexadecimal number between
        00
        and
        FF
        that represents the Latin-1 character equivalent (such as
        \xA9
        for
        the &copy; symbol)</td>
    </tr>
    <tr>
        <td>\uXXXX</td>
        <td>A hexadecimal number between
        0000
        and
        FFFF
        that represents the Unicode character equivalent (such as
        \u00A9
        for the &copy; symbol)</td>
    </tr>
</table>
<h3>Variable Typing</h3>
<span>Like PHP, JavaScript is a very loosely typed language; the type of a variable is determined only when a value is assigned and can change as the variable appears in different contexts. Usually, you don&rsquo;t have to worry about the type; JavaScript figures out what you want and just does it.</span>
<br/>
<span>Take a look at Example 13-8 , in which:</span>
<br/>
<span>1. The variable n is assigned the string value 838102050 , the next line prints out its value, and the typeof operator is used to look up the type.</span>
<br/>
<span>2. n is given the value returned when the numbers 12345 and 67890 are multiplied together. This value is also 838102050 , but it is a number, not a string. The type of variable is then looked up and displayed.</span>
<br/>
<span>3. Some text is appended to the number n and the result is displayed.</span>
<br/>
<span>Example 13-8. Setting a variable&rsquo;s type by assignment</span>
<pre>
<code class="javascript">
&lt;script&gt;
    n = '838102050' // Set 'n' to a string
    document.write('n = ' + n + ', and is a ' + typeof n + '&lt;br&gt;')
    
    n = 12345 * 67890; // Set 'n' to a number
    document.write('n = ' + n + ', and is a ' + typeof n + '&lt;br&gt;')
    
    n += ' plus some text' // Change 'n' from a number to a string
    document.write('n = ' + n + ', and is a ' + typeof n + '&lt;br&gt;')
&lt;/script&gt;
</code>
</pre>
<span>The output from this script looks like this:</span>
<pre>
<code class="javascript">
n = 838102050, and is a string
n = 838102050, and is a number
n = 838102050 plus some text, and is a string
</code>
</pre>
<span>If there is ever any doubt about the type of a variable, or you need to ensure that a variable has a particular type, you can force it to that type by using statements such as the following (which respectively turn a string into a number and a number into a string):</span>
<pre>
<code class="javascript">
n = "123"
n *= 1 // Convert 'n' into a number
n = 123
n += "" // Convert 'n' into a string
</code>
</pre>
<span>Or, of course, you can always look up a variable&rsquo;s type by using the typeof operator.</span>
<h3>Functions</h3>
<span>As with PHP, JavaScript functions are used to separate out sections of code that per‐ form a particular task. To create a function, declare it in the manner shown in Example 13-9.</span>
<br/>
<span>Example 13-9. A simple function declaration</span>
<pre>
<code class="javascript">
&lt;script&gt;
    function product(a, b)
    {
        return a*b
    }
&lt;/script&gt;
</code>
</pre>
<span>This function takes the two parameters passed, multiplies them together, and returns the product.</span>
<h3>Global Variables</h3>
<span>Global variables are ones defined outside of any functions (or within functions, but defined without the var keyword). They can be defined in the following ways:</span>
<pre>
<code class="javascript">
    a = 123 // Global scope
    var b = 456 // Global scope
    if (a == 123) var c = 789 // Global scope
</code>
</pre>
<span>Regardless of whether you are using the var keyword, as long as a variable is defined outside of a function, it is global in scope. This means that every part of a script can have access to it.</span>
<h3>Local Variables</h3>
<span>Parameters passed to a function automatically have local scope; that is, they can be referenced only from within that function. However, there is one exception. Arrays are passed to a function by reference, so if you modify any elements in an array parameter, the elements of the original array will be modified.</span>
<br/>
<span>To define a local variable that has scope only within the current function, and has not been passed as a parameter, use the var keyword. Example 13-10 shows a function that creates one variable with global scope and two with local scope.</span>
<br/>
<span>Example 13-10. A function creating variables with global and local scope</span>
<pre>
<code class="javascript">
&lt;script&gt;
    function test()
    {
        a = 123 // Global scope
        var b = 456 // Local scope
        if (a == 123) var c = 789 // Local scope
    }
&lt;/script&gt;
</code>
</pre>
<span>To test whether scope setting has worked in PHP, we can use the isset function. But in JavaScript there isn&rsquo;t one, so &nbsp;Example 13-11 &nbsp;makes use of the typeof operator, which returns the string undefined when a variable is not defined. Example 13-11. Checking the scope of the variables defined in function test</span>
<pre>
<code class="javascript">
&lt;script&gt;
    test()
    
    if (typeof a != 'undefined') document.write('a = "' + a + '"&lt;br&gt;')
    if (typeof b != 'undefined') document.write('b = "' + b + '"&lt;br&gt;')
    if (typeof c != 'undefined') document.write('c = "' + c + '"&lt;br&gt;')
    
    function test()
    {
        a = 123
        var b = 456
        if (a == 123) var c = 789
    }
&lt;/script&gt;
</code>
</pre>
<span>The output from this script is the following single line:</span>
<pre><code class="javascript">a = "123"</code></pre>
<span>This shows that only the variable a was given global scope, which is exactly what we would expect, since the variables b and c were given local scope by being prefaced with the var keyword.</span>
<br/>
<span>If your browser issues a warning about b being undefined, the warning is correct but can be ignored.</span>
<h3>The Document Object Model</h3>
<span>The designers of JavaScript were very smart. Rather than just creating yet another scripting language (which would have still been a pretty good improvement at the time), they had the vision to build it around the Document Object Model , or DOM. This breaks down the parts of an HTML document into discrete objects , each with its own properties and methods and each subject to JavaScript&rsquo;s control.</span>
<br/>
<span>JavaScript separates objects, properties, and methods by using a period (one good reason why + is the string concatenation operator in JavaScript, rather than the period). For example, let&rsquo;s consider a business card as an object we&rsquo;ll call card. This object contains properties such as a name, address, phone number, and so on. In the syntax of JavaScript, these properties would look like this:</span>
<pre>
<code class="javascript">
card.name
card.phone
card.address
</code>
</pre>
<span>Its methods are functions that retrieve, change, and otherwise act on the properties. For instance, to invoke a method that displays the properties of object card , you might use syntax such as this:</span>
<pre><code class="javascript">card.display()</code></pre>
<span>Have a look at some of the earlier examples in this chapter and look at where the statement document.write is used. Now that you understand how JavaScript is based around objects, you will see that write is actually a method of the document object.</span>
<br/>
<span>Within JavaScript, there is a hierarchy of parent and child objects, which is what is known as the Document Object Model (see Figure 13-3 ).</span>
<p><img src="images/13.3.png"/></p>
<span>Figure 13-3. Example of DOM object hierarchy</span>
<br/>
<span>The figure uses HTML tags that you are already familiar with to illustrate the parent/ child relationship between the various objects in a document. For example, a URL within a link is part of the body of an HTML document. In JavaScript, it is referenced like this:</span>
<pre><code class="javascript">url = document.links.linkname.href</code></pre>
<span>Notice how this follows the central column down. The first part, document , refers to the &lt;html&gt; and &lt;body&gt; tags; links.linkname to the &lt;a&gt; tag; and href to the href attribute.</span>
<br/>
<span>Let&rsquo;s turn this into some HTML and a script to read a link&rsquo;s properties. Type Example 13-12 and save it as linktest.html ; then call it up in your browser.</span>
<br/>
<span>If you are using Microsoft Internet Explorer as your main development browser, please just read through this section, then read the section entitled &ldquo;But It&rsquo;s Not That Simple&rdquo; on page 326 , and finally come back here and try the example with the getElementById modification discussed there. Without it, this example will not work for you.</span>
<br/>
<span>Example 13-12. Reading a link URL with JavaScript</span>
<pre>
<code class="javascript">
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Link Test&lt;/title&gt;
    &lt;/head&gt;
    
    &lt;body&gt;
        &lt;a id="mylink" href="http://mysite.com"&gt;Click me&lt;/a&gt;&lt;br&gt;
        &lt;script&gt;
            url = document.links.mylink.href
            document.write('The URL is ' + url)
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>Note the short form of the &lt;script&gt; tags where I have omitted the parameter
type="text/JavaScript" to save you some typing. If you wish, just for the purposes
of testing this (and other examples), you could also omit everything outside of the
&lt;script&gt; and &lt;/script&gt; tags. The output from this example is as follows:</span>
<pre>
<code class="javascript">
Click me
The URL is http://mysite.com
</code>
</pre>
<span>The second line of output comes from the document.write method. Notice how the
code follows the document tree down from document to links to mylink (the id
given to the link) to href (the URL destination value).</span>
<br/>
<span>There is also a short form that works equally well, which starts with the value in the
id attribute: mylink.href. So you can replace this:</span>
<pre><code class="javascript">url = document.links.mylink.href</code></pre>
<span>with the following:</span>
<pre><code class="javascript">url = mylink.href</code></pre>
<h6>But It’s Not That Simple</h6>
<span>If you tried Example 13-12 in Safari, Firefox, Opera, or Chrome, it will have worked
just great. But in Internet Explorer it will fail, because Microsoft’s implementation of
JavaScript, called JScript, has many subtle differences from the recognized standards.
Welcome to the world of advanced web development!</span>
<br/>
<span>So what can we do about this? Well, in this case, instead of using the links child
object of the parent document object, which Internet Explorer balks at, you have to
replace it with a method to fetch the element by its id. Therefore, the following line:</span>
<pre><code class="javascript">url = document.links.mylink.href</code></pre>
<span>can be replaced with this one:</span>
<pre><code class="javascript">url = document.getElementById('mylink').href</code></pre>
<span>And now the script will work in all major browsers. Incidentally, when you don’t have
to look up the element by id , the short form that follows will still work in Internet
Explorer, as well as the other browsers:</span>
<pre><code class="javascript">url = mylink.href</code></pre>
<span>Another use for the $ symbol As mentioned earlier, the $ symbol is allowed in JavaScript variable and function names. Because of this, you may sometimes encounter strange-looking code like this:</span>
<pre><code class="javascript">url = $('mylink').href</code></pre>
<span>Some enterprising programmers have decided that the getElementById function is so prevalent in JavaScript that they have written a function to replace it called $ , as with jQuery (although it uses the $ for much more than that&mdash;see Chapter 21), and shown in Example 13-13.</span>
<br/>
<span>Example 13-13. A replacement function for the getElementById method</span>
<pre>
<code class="javascript">
&lt;script&gt;
    function $(id)
    {
        return document.getElementById(id)
    }
&lt;/script&gt;
</code>
</pre>
<span>Therefore, as long as you have included the $ function in your code, syntax such as this:</span>
<pre><code class="javascript">$('mylink').href</code></pre>
<span>can replace code such as this:</span>
<pre><code class="javascript">document.getElementById('mylink').href</code></pre>
<h4>Using the DOM</h4>
<span>The links object is actually an array of URLs, so the mylink URL in Example 13-12 can also be safely referred to on all browsers in the following way (because it&rsquo;s the first, and only, link):</span>
<pre><code class="javascript">url = document.links[0].href</code></pre>
<span>If you want to know how many links there are in an entire document, you can query the length property of the links object like this:</span>
<pre><code class="javascript">numlinks = document.links.length</code></pre>
<span>You can therefore extract and display all links in a document like this:</span>
<pre>
<code class="javascript">
    for (j=0 ; j &lt; document.links.length ; ++j)
    document.write(document.links[j].href + '&lt;br&gt;')
</code>
</pre>
<span>The length of something is a property of every array, and many objects as well. For example, the number of items in your browser&rsquo;s web history can be queried like this:</span>
<pre><code class="javascript">document.write(history.length)</code></pre>
<span>However, to stop websites from snooping on your browsing history, the history object stores only the number of sites in the array: you cannot read from or write to these values. But you can replace the current page with one from the history, if you know what position it has within the history. This can be very useful in cases in which you know that certain pages in the history came from your site, or you simply wish to send the browser back one or more pages, which you do with the go method of the history object. For example, to send the browser back three pages, issue the following command:</span>
<pre><code class="javascript">history.go(-3)</code></pre>
<span>You can also use the following methods to move back or forward a page at a time:</span>
<pre>
<code class="javascript">
history.back()
history.forward()
</code>
</pre>
<span>In a similar manner, you can replace the currently loaded URL with one of your choosing, like this:</span>
<pre><code class="javascript">document.location.href = 'http://google.com'</code></pre>
<span>Of course, there&rsquo;s a whole lot more to the DOM than reading and modifying links. As you progress through the following chapters on JavaScript, you&rsquo;ll become quite familiar with the DOM and how to access it.</span>
<h3>About document.write</h3>
<span>When teaching programming it&rsquo;s necessary to have a quick and easy way to display the results of expressions. In PHP (for example) there are the echo and print state‐ ments, which simply send text to the browser, so that&rsquo;s easy. In JavaScript, though, there are the following alternatives.</span>
<h4>Using console.log</h4>
<span>The console.log function will output the result of any value or expression passed to it in the console of the current browser. This is a special mode with a frame or window separate to the browser window, and in which errors and other messages can be made to display. While great for experienced programmers, it is not ideal for beginners because calling up the console is different in all browsers, it works differently in all browsers, and the output is not near the web content in the browser.</span>
<h4>Using alert</h4>
<span>The alert function displays values or expressions passed to it in a pop-up window, which requires you to click a button to close. Clearly this can become quite irritating very quickly, and it has the downside of displaying only the current message&mdash;previous ones are erased.</span>
<h4>Writing into Elements</h4>
<span>It is possible to write directly into the text of an HTML element, which is a fairly elegant solution (and the best one for production websites), except that for this book every example would require such an element to be created, and some lines of JavaScript code to access it. This gets in the way of teaching the core of an example and would make the code look overly cumbersome and confusing.</span>
<h4>Using document.write</h4>
<span>The document.write function writes a value or expression at the current browser location, and is therefore the perfect choice for quickly displaying results, because it keeps all the examples short and sweet, by placing the output right there in the browser next to the web content and code.</span>
<br/>
<span>You may, however, have have heard that this function is regarded as unsafe by some developers, because when you call it after a web page is fully loaded, it will overwrite the current document. While this is correct, it doesn&rsquo;t apply to any of the examples in this book, because they all use document.write the way it was originally intended; as part of the page creation process, calling it only before the page has completed loading and displaying.</span>
<br/>
<span>However, although I use document.write in this way for simple examples, I never use it in production code (except in the very rarest of circumstances, where it actually is necessary). Instead I almost always use the preceding option of writing directly into a specially prepared element, as per the more complex examples in Chapter 17 onward (which access the innerHTML property of elements for program output).</span>
<br/>
<span>So please remember that where you see document.write being called in this book, it is there only to simplify an example, and I recommend that you also only use the function in the same way&mdash;for obtaining quick test results. With that caveat explained, in the following chapter we&rsquo;ll continue our exploration of JavaScript by looking at how to control program flow and write expressions.</span>