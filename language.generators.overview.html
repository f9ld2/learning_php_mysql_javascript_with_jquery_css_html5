---
layout: default
---

  <h2 class="title">Generators overview</h2>
  <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7)</p>

  <p class="para">
   Generators provide an easy way to implement simple
   <a href="language.oop5.iterations.html" class="link">iterators</a> without the
   overhead or complexity of implementing a class that implements the
   <a href="class.iterator.html" class="classname">Iterator</a> interface.
  </p>

  <p class="para">
   A generator allows you to write code that uses <a href="control-structures.foreach.html" class="link">foreach</a> to iterate over a
   set of data without needing to build an array in memory, which may cause
   you to exceed a memory limit, or require a considerable amount of
   processing time to generate. Instead, you can write a generator function,
   which is the same as a normal
   <a href="functions.user-defined.html" class="link">function</a>, except that instead
   of
   <a href="functions.returning-values.html" class="link">return</a>ing once, a
   generator can <a href="language.generators.syntax.html#control-structures.yield" class="link">yield</a> as many times as it needs to in order to provide the
   values to be iterated over.
  </p>

  <p class="para">
   A simple example of this is to reimplement the <span class="function"><a href="function.range.html" class="function">range()</a></span>
   function as a generator. The standard <span class="function"><a href="function.range.html" class="function">range()</a></span> function
   has to generate an array with every value in it and return it, which can
   result in large arrays: for example, calling
   <strong class="command">range(0, 1000000)</strong> will result in well over 100 MB of
   memory being used.
  </p>

  <p class="para">
   As an alternative, we can implement an <em>xrange()</em>
   generator, which will only ever need enough memory to create an
   <a href="class.iterator.html" class="classname">Iterator</a> object and track the current state of the
   generator internally, which turns out to be less than 1 kilobyte.
  </p>

  <div class="example" id="example-283">
   <p><strong>Example #1 Implementing <span class="function"><a href="function.range.html" class="function">range()</a></span> as a generator</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&#xA0;</span><span style="color: #0000BB">xrange</span><span style="color: #007700">(</span><span style="color: #0000BB">$start</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$step&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(</span><span style="color: #0000BB">$start&#xA0;</span><span style="color: #007700">&lt;&#xA0;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(</span><span style="color: #0000BB">$step&#xA0;</span><span style="color: #007700">&lt;=&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;throw&#xA0;new&#xA0;</span><span style="color: #0000BB">LogicException</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;Step&#xA0;must&#xA0;be&#xA0;+ve&apos;</span><span style="color: #007700">);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}<br><br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;for&#xA0;(</span><span style="color: #0000BB">$i&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$start</span><span style="color: #007700">;&#xA0;</span><span style="color: #0000BB">$i&#xA0;</span><span style="color: #007700">&lt;=&#xA0;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">;&#xA0;</span><span style="color: #0000BB">$i&#xA0;</span><span style="color: #007700">+=&#xA0;</span><span style="color: #0000BB">$step</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">yield&#xA0;$i</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}<br>&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;else&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(</span><span style="color: #0000BB">$step&#xA0;</span><span style="color: #007700">&gt;=&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;throw&#xA0;new&#xA0;</span><span style="color: #0000BB">LogicException</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;Step&#xA0;must&#xA0;be&#xA0;-ve&apos;</span><span style="color: #007700">);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}<br><br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;for&#xA0;(</span><span style="color: #0000BB">$i&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$start</span><span style="color: #007700">;&#xA0;</span><span style="color: #0000BB">$i&#xA0;</span><span style="color: #007700">&gt;=&#xA0;</span><span style="color: #0000BB">$limit</span><span style="color: #007700">;&#xA0;</span><span style="color: #0000BB">$i&#xA0;</span><span style="color: #007700">+=&#xA0;</span><span style="color: #0000BB">$step</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">yield&#xA0;$i</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}<br>&#xA0;&#xA0;&#xA0;&#xA0;}<br>}<br><br></span><span style="color: #FF8000">/*<br>&#xA0;*&#xA0;Note&#xA0;that&#xA0;both&#xA0;range()&#xA0;and&#xA0;xrange()&#xA0;result&#xA0;in&#xA0;the&#xA0;same<br>&#xA0;*&#xA0;output&#xA0;below.<br>&#xA0;*/<br><br></span><span style="color: #007700">echo&#xA0;</span><span style="color: #DD0000">&apos;Single&#xA0;digit&#xA0;odd&#xA0;numbers&#xA0;from&#xA0;range():&#xA0;&#xA0;&apos;</span><span style="color: #007700">;<br>foreach&#xA0;(</span><span style="color: #0000BB">range</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">9</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">2</span><span style="color: #007700">)&#xA0;as&#xA0;</span><span style="color: #0000BB">$number</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;</span><span style="color: #0000BB">$number</span><span style="color: #DD0000">&#xA0;&quot;</span><span style="color: #007700">;<br>}<br>echo&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br><br>echo&#xA0;</span><span style="color: #DD0000">&apos;Single&#xA0;digit&#xA0;odd&#xA0;numbers&#xA0;from&#xA0;xrange():&#xA0;&apos;</span><span style="color: #007700">;<br>foreach&#xA0;(</span><span style="color: #0000BB">xrange</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">9</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">2</span><span style="color: #007700">)&#xA0;as&#xA0;</span><span style="color: #0000BB">$number</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;</span><span style="color: #0000BB">$number</span><span style="color: #DD0000">&#xA0;&quot;</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>The above example will output:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Single digit odd numbers from range():  1 3 5 7 9 
Single digit odd numbers from xrange(): 1 3 5 7 9 
</pre></div>
   </div>
  </div>

  <div class="sect2" id="language.generators.object">
   <h3 class="title"><a href="class.generator.html" class="classname">Generator</a> objects</h3>
   <p class="para">
    When a generator function is called for the first time, an object of the
    internal <a href="class.generator.html" class="classname">Generator</a> class is returned. This object
    implements the <a href="class.iterator.html" class="classname">Iterator</a> interface in much the same
    way as a forward-only iterator object would, and provides methods that can
    be called to manipulate the state of the generator, including sending
    values to and returning values from it.
   </p>
  </div>
 