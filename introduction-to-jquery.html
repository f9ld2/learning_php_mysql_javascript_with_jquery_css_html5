---
layout: default
title: "Introduction to jQuery"
---
<h2>Introduction to jQuery</h2>
<span>Powerful and flexible as JavaScript is, with a plethora of built-in functions, you still</span>
<span>need additional layers of code for simple things that cannot be achieved natively or</span>
<span>with CSS, such as animations, event handling, and Ajax.</span>
<br/>
<span>What&rsquo;s more, as a consequence of the various browser wars over the years, frustrating</span>
<span>and annoying browser incompatibilities have come and gone, rearing their heads at</span>
<span>different times on different platforms and programs.</span>
<br/>
<span>As a result, ensuring your web pages look the same on all devices can sometimes be</span>
<span>achieved only through tedious JavaScript code that accounts for all the discrepancies</span>
<span>across the range of browsers and versions released over recent years. In a word&mdash;</span>
<span>nightmare.</span>
<br/>
<span>As I write (in 2014), we seem to be in the midst of a quieter spell, because Microsoft&rsquo;s</span>
<span>Internet Explorer has caught up with the standards in many (but not all) areas, Opera</span>
<span>has opted to use WebKit (the same technology used by Google) as the core of its</span>
<span>browser, and Apple has bowed out of the PC browser marketplace.</span>
<br/>
<span>Nevertheless, legacy inconsistencies remain, and plenty of people use older browsers.</span>
<span>Plus there&rsquo;s still the issue of needing to write a substantial amount of JavaScript when</span>
<span>you want to create anything more than basic special effects.</span>
<br/>
<span>To fill these gaps, a number of libraries of functions to minimize the differences</span>
<span>between browsers have been developed, many of which also provide easy hooks into</span>
<span>the DOM (Document Object Model), and for Ajax, and event and animation han‐</span>
<span>dling.</span>
<span>These</span>
<span>include</span>
<span>the</span>
<span>likes</span>
<span>of</span>
<span>AngularJS</span>
<span>,</span>
<span>jQuery</span>
<span>,</span>
<span>MooTools</span>
<span>,</span>
<span>Prototype</span>
<span>,</span>
<span>script.aculo.us</span>
<span>, and</span>
<span>YUI</span>
<span>(among many others).</span>
<h3>Why jQuery?</h3>
<span>There&rsquo;s room to cover only one library in this book, however, so I have opted for the</span>
<span>most widely used, jQuery, which is now installed on over 60 percent of all websites,</span>
<span>according to</span>
<span>http://w3techs.com</span>
<span>, and (as far as I can tell from their graphs) is more</span>
<span>used than all its major competitors combined. Incidentally, if you ever want to see</span>
<span>how</span>
<span>the</span>
<span>various</span>
<span>libraries</span>
<span>stack</span>
<span>up</span>
<span>at</span>
<span>any</span>
<span>point,</span>
<span>search</span>
<span>for</span>
<span>javascript</span>
<span>at</span>
<span>similartech.com</span>
<span>.</span>
<br/>
<span>With jQuery, not only do you get a very high level of cross-browser compatibility</span>
<span>(yes, even including Internet Explorer), you also have quick and easy access to HTML</span>
<span>and DOM manipulation, special functions to interact directly with CSS, the ability to</span>
<span>control events, powerful tools to create professional effects and animations, and func‐</span>
<span>tions for conducting Ajax communications with the web server. jQuery is also the</span>
<span>base for a wide range of plug-ins and other utilities too.</span>
<br/>
<span>You don&rsquo;t</span>
<span>need</span>
<span>to use jQuery, though, and some programming purists would never</span>
<span>touch a library, preferring to create their own bespoke collection of functions (and</span>
<span>there can be good reasons for this, such as not having to wait on others to correct</span>
<span>bugs you find, implementing your own security features, and so on). But jQuery has</span>
<span>definitely stood the test of time, and if you would like to take advantage of its gentle</span>
<span>learning curve, and be developing quality web pages as quickly as possible, this chap‐</span>
<span>ter will show how you can get started using it.</span>
<h3>Including jQuery</h3>
<span>There are two ways you can include jQuery in your web pages. You can go to the</span>
<span>jQuery website</span>
<span>, choose the version you need, download it to your website, and serve</span>
<span>it up from there. Or, you can take advantage of a free content delivery network</span>
<span>(CDN) and simply link to the version you require.</span>
<br/>
<span>jQuery is released under the terms of the MIT license, which places</span>
<span>almost no restrictions on what you can do. You are free to use any</span>
<span>jQuery project in any other project (even commercial projects) as</span>
<span>long as the copyright header is left intact.</span>
<h4>Choosing the Right Version</h4>
<span>Before deciding whether to download and host jQuery directly, or to use a CDN, you</span>
<span>also must pick a version of jQuery. In most cases this is straightforward because you&rsquo;ll</span>
<span>simply opt for the latest release. However, if you are targeting particular browsers, or</span>
<span>if you are maintaining a legacy website that relies on a particular version of jQuery,</span>
<span>then the latest one may not be right for you.</span>
<br/>
<span>Unlike most software, for which you simply download and install the newest avail‐</span>
<span>able, jQuery has evolved over time to take account of the changing dynamics in the</span>
<span>market of differing browser versions, with different features and bugs.</span>
<br/>
<span>At the same time, improvements to jQuery have been made that might make newer</span>
<span>versions operate differently on sites that have been specially tailored to a particular</span>
<span>version (and the quirks surrounding it), at the time it was released.</span>
<br/>
<span>Of course, each newer version is an improvement over the previous one, and is more</span>
<span>and more likely to cover all the bases. But where identical operation is critical for a</span>
<span>website, until you have fully tested a new version, it is often best to stick with an ear‐</span>
<span>lier one.</span>
<h6>To IE or Not to IE</h6>
<span>Additionally, as well as the 1.x series of jQuery, there&rsquo;s now a 2.x series, which no-</span>
<span>longer supports versions of Internet Explorer lower than 9. Both of these are running</span>
<span>in parallel development. If you are sure all your users will have IE 9 or higher (for</span>
<span>example, because you are writing a mobile web app), then you can choose the latest</span>
<span>2.x version to benefit from tighter, faster, and more-efficient code. But if any of your</span>
<span>users will be using older versions of IE, then you should use a 1.x release of jQuery.</span>
<h6>Compressed or Editable</h6>
<span>You also must decide if you wish to use a version of jQuery that has been minified</span>
<span>(compressed) in size to minimize bandwidth and decrease loading time, or whether</span>
<span>you want to use an uncompressed version (perhaps because you want to make an edit</span>
<span>to it yourself&mdash;which you are fully entitled to do). Generally, a minified version is</span>
<span>best, but most web servers support gzip for on-the-fly compression and decompres‐</span>
<span>sion, so this is becoming less important (although minification does remove com‐</span>
<span>ments too).</span>
<h4>Downloading</h4>
<span>Every released version of jQuery is listed in both compressed and minified forms at</span>
<span>jquery.com/download</span>
<span>.</span>
<br/>
<span>All you need to do is choose the one you need, right-click the link displayed along‐</span>
<span>side, and save it to your hard disk. From there, you can upload it to your web server</span>
<span>and then include it within</span>
<span>&lt;script&gt;</span>
<span>tags, like this (for the minified version of release</span>
<span>1.11.1):</span>
<pre><code class="javascript">&lt;script src='http://myserver.com/jquery-1.11.1.min.js'&gt;&lt;/script&gt;</code></pre>
<span>If you have never used jQuery before (and have no special require‐</span>
<span>ments), then just download the latest minified version, or link to it</span>
<span>via a CDN, as described following.</span>
<h4>Using a Content Delivery Network</h4>
<span>Several CDNs support jQuery. If you use one of them, you can save yourself the has‐</span>
<span>sle of having to download new versions and then upload them to your server, by sim‐</span>
<span>ply linking directly to the URLs supplied by these networks.</span>
<br/>
<span>Not only that, but they provide this service free of charge, and usually on high-</span>
<span>capacity backbones that are probably the fastest in the world. Additionally, CDNs</span>
<span>usually hold their content in a number of different geographic locations, and then</span>
<span>supply a file from the server closest to a surfer, ensuring the quickest possible deliv‐</span>
<span>ery.</span>
<br/>
<span>Overall, if you don&rsquo;t need to modify the jQuery source code (requiring you to host it</span>
<span>on your own web servers), and your users are certain to have a live Internet connec‐</span>
<span>tion, CDNs are probably the way to go. And it&rsquo;s very easy. All you need to know is the</span>
<span>filename you wish to access and the root folder the CDN is using. For example, all</span>
<span>current and previous versions can be accessed though the CDN that jQuery uses, like</span>
<span>this:</span>
<pre><code class="javascript">&lt;script src='http://code.jquery.com/jquery-1.11.1.min.js'&gt;&lt;/script&gt;</code></pre>
<span>The base directory is at</span>
<span>&nbsp;http://code.jquery.com/</span>
<span>&nbsp;and you simply follow this with the</span>
<span>name of the file you need to include (in this case,</span>
<span>jquery-1.11.1.min.js</span>
<span>).</span>
<br/>
<span>Both Microsoft and Google offer jQuery on their networks, and so you can also</span>
<span>include it in either of the following ways:</span>
<pre>
<code class="javascript">
&lt;script src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.1.min.js'&gt;&lt;/script&gt;
&lt;script src='http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'&gt;
&lt;/script&gt;
</code>
</pre>
<span>In the case of the Microsoft CDN (aspnetcdn.com), you should begin the URL with</span>
<span>the base directory of</span>
<span>ajax.aspnetcdn.com/ajax/jQuery/</span>
<span>, and then follow that with the</span>
<span>filename you require.</span>
<br/>
<span>For Google, however, you must split the filename (for example,</span>
<span>jquery-1.11.1.min.js</span>
<span>)</span>
<span>into a folder and filename (like this:</span>
<span>&nbsp;1.11.1/jquery.min.js</span>
<span>). Then precede that with</span>
<span>ajax.googleapis.com/ajax/libs/jquery/</span>
<span>.</span>
<br/>
<span>An added benefit of using a CDN is that most other websites also</span>
<span>do this, so that jQuery may well already be cached in the user&rsquo;s</span>
<span>browser, and might not even require re-delivering. With 60 percent</span>
<span>or more of websites using jQuery, this can be a lot of valuable</span>
<span>bandwidth and time saved.</span>
<h4>Always Using the Latest Version</h4>
<span>Another advantage of CDNs is that you can choose to always use the latest version of</span>
<span>jQuery, so that you can save a web page and forget all about ever having to update it</span>
<span>for a newer release.</span>
<br/>
<span>To include the latest version (of release 1.x) from the jQuery or Google CDNs, use</span>
<span>one of the following forms of the</span>
<span>&lt;script&gt;</span>
<span>tag:</span>
<pre>
<code class="javascript">
&lt;script src='http://code.jquery.com/jquery-latest.min.js'&gt;&lt;/script&gt;
&lt;script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'&gt;&lt;/script&gt;
</code>
</pre>
<span>Be careful if you do this, though, because something on your web page could possibly</span>
<span>break with a future update, so be prepared to consider this possibility if any web</span>
<span>pages start to misbehave.</span>
<br/>
<span>It&rsquo;s worth knowing that both the jQuery and Google CDNs support</span>
<span>accessing</span>
<span>the</span>
<span>jQuery</span>
<span>files</span>
<span>by</span>
<span>either</span>
<span>HTTP</span>
<span>or</span>
<span>HTTPS,</span>
<span>using</span>
<span>http://</span>
<span>or</span>
<span>https://</span>
<span>prefixes. In the examples for this chapter</span>
<span>(available to download at lpmj.net), though, I have opted to down‐</span>
<span>load and serve up jQuery locally so that you can test all the exam‐</span>
<span>ple files, even if you are offline on a train or plane, for example.</span>
<h4>Customizing jQuery</h4>
<span>If it&rsquo;s absolutely critical that you must keep the amount of data downloaded by a web</span>
<span>page to the minimum, then you may still be able to use jQuery by making a special</span>
<span>build of it that includes only the features your website will be using. You won&rsquo;t be able</span>
<span>to rely on a CDN to deliver it, though, but in this circumstance you probably weren&rsquo;t</span>
<span>planning on using one anyway.</span>
<br/>
<span>To create your own custom build of jQuery, visit</span>
<span>&nbsp;projects.jga.me/jquery-builder</span>
<span>&nbsp;and</span>
<span>simply check the boxes you want and uncheck those that you don&rsquo;t. The bespoke ver‐</span>
<span>sion of jQuery will then be loaded into a separate tab or window, from where you can</span>
<span>copy and paste it as required.</span>
<h3>jQuery Syntax</h3>
<span>The most striking thing about jQuery to people who are new to it is the</span>
<span>$</span>
<span>symbol,</span>
<span>which acts as the jQuery factory method. It was chosen because the symbol is legal in</span>
<span>JavaScript, is short, and is different from customary variable, object, or function/</span>
<span>method names.</span>
<br/>
<span>It takes the place of making a call to the</span>
<span>jQuery</span>
<span>function (which you can also do if</span>
<span>you wish). The idea is to keep your code short and sweet, and to save on unnecessary</span>
<span>extra typing each time you access jQuery. It also immediately shows other developers</span>
<span>new to your code that jQuery (or a similar library) is in use.</span>
<h4>A Simple Example</h4>
<span>At its simplest, you access jQuery by typing a</span>
<span>$</span>
<span>symbol, followed by a selector in</span>
<span>parentheses, and then a period and a method to apply to the selected element(s).</span>
<br/>
<span>For example, to change the font family of all paragraphs to monospace, you could use</span>
<span>this statement:</span>
<pre><code class="javascript">$('p').css('font-family', 'monospace')</code></pre>
<span>Or to add a border to a</span>
<span>&lt;code&gt;</span>
<span>element, you could use this:</span>
<pre><code class="javascript">$('code').css('border', '1px solid #aaa')</code></pre>
<span>Let&rsquo;s look at that as part of a complete example (see</span>
<span>Example 21-1</span>
<span>, where the jQuery</span>
<span>parts are highlighted in bold):</span>
<br/>
<span>Example 21-1. A simple jQuery example</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;First jQuery Example&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        The jQuery library uses either the &lt;code&gt;$()&lt;/code&gt;
        or &lt;code&gt;jQuery()&lt;/code&gt; function names.
        &lt;script&gt;
            $('code').css('border', '1px solid #aaa')
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>When you load this example into a browser, the result will be similar to</span>
<span>Figure 21-1</span>
<span>.</span>
<span>Of course, this particular instruction simply replicates what you can do with normal</span>
<span>CSS, but the idea is to illustrate jQuery syntax, so I&rsquo;m keeping things simple, for now.</span>
<br/>
<span>Another way of issuing this command is by calling the</span>
<span>jQuery</span>
<span>function (which works in the same way as</span>
<span>$</span>
<span>), like this:</span>
<pre><code class="javascript">jQuery('code').css('border', '1px solid #aaa')</code></pre>
<p><img src="images/21.1.png"/></p>
<span>Figure 21-1. Modifying elements with jQuery</span>
<h4>Avoiding Library Conflict</h4>
<span>If you use other libraries alongside jQuery, you may find that they define their own</span>
<span>$</span>
<span>function. To resolve this issue, you can call the</span>
<span>noConflict</span>
<span>method on the symbol,</span>
<span>which releases control so that the other library can take over, like this:</span>
<pre><code class="javascript">$.noConflict()</code></pre>
<span>Once you do this, to access jQuery thereafter, you must call the</span>
<span>jQuery</span>
<span>function. Or,</span>
<span>you can replace use of the</span>
<span>$</span>
<span>symbol with an object name of your choice, like this:</span>
<pre><code class="javascript">jq = $.noConflict()</code></pre>
<span>Now you can use the keyword</span>
<span>jq</span>
<span>, wherever you had previously used</span>
<span>$</span>
<span>.</span>
<br/>
<span>To distinguish and keep track of jQuery objects separately from</span>
<span>standard element objects, some developers prefix a</span>
<span>$</span>
<span>to the front of</span>
<span>any object created with jQuery (so that they end up looking like</span>
<span>PHP variables!).</span>
<h3>Selectors</h3>
<span>Now that you&rsquo;ve seen how easy it is to include jQuery in a web page and access its</span>
<span>features, let&rsquo;s move on to looking at its selectors, which (I&rsquo;m sure you&rsquo;ll be pleased to</span>
<span>learn) work in exactly the same way as CSS. In fact, it&rsquo;s at the heart of how most of</span>
<span>jQuery operates.</span>
<br/>
<span>All you have to do is think about how you would style one or more elements using</span>
<span>CSS, and then you can use the same selector(s) to apply jQuery operations on these</span>
<span>selected elements. This means you can make use of element selectors, ID selectors,</span>
<span>class selectors, and any combinations.</span>
<h4>The css Method</h4>
<span>To explain jQuery&rsquo;s use of selectors, let&rsquo;s first look at one of the more fundamental</span>
<span>jQuery methods,</span>
<span>css</span>
<span>, with which you can dynamically alter any CSS property. It takes</span>
<span>two arguments: the property name to be accessed, and a value to be applied, like this:</span>
<pre><code class="css">css('font-family', 'Arial')</code></pre>
<span>As you will see in the following sections, you cannot use this method on its own,</span>
<span>because you must append it to a jQuery selector, which will select one or more ele‐</span>
<span>ments whose properties should be changed by the method. The following, which sets</span>
<span>the content of all</span>
<span>&lt;p&gt;</span>
<span>elements to display with full justification, is an example:</span>
<pre><code class="javascript">$('p').css('text-align', 'justify')</code></pre>
<span>You can also use the</span>
<span>css</span>
<span>method to return (rather than set) a computed value by sup‐</span>
<span>plying only a property name (and no second argument). In this case, the value of the</span>
<span>first element that matches the selector is returned. For example, the following will</span>
<span>return the text color of the element with the ID of</span>
<span>elem</span>
<span>, as an</span>
<span>rgb</span>
<span>method:</span>
<pre><code class="javascript">color = $('#elem').css('color')</code></pre>
<span>Remember that the value returned is the</span>
<span>computed</span>
<span>value. In other words, jQuery will</span>
<span>compute and return the value as used by the browser at the moment the method is</span>
<span>called, not the original value that may have been assigned to the property via a style</span>
<span>sheet or in any other way.</span>
<br/>
<span>So, if the text color is blue (for example), the value assigned to the variable</span>
<span>color</span>
<span>in</span>
<span>the preceding statement will be</span>
<span>rgb(0, 0, 255)</span>
<span>, even if the color was originally set</span>
<span>using the color name</span>
<span>blue</span>
<span>, or the hex strings</span>
<span>#00f</span>
<span>or</span>
<span>#0000ff</span>
<span>. This computed value,</span>
<span>though, will always be in a form that can be assigned back to the element (or any</span>
<span>other element) via the second argument of the</span>
<span>css</span>
<span>method.</span>
<br/>
<span>Be wary with any computed dimensions returned by this method</span>
<span>because, depending on the current</span>
<span>box-sizing</span>
<span>setting (see</span>
<span>Chap‐</span>
<span>ter 19</span>
<span>), they may or may not necessarily be what you expect. When</span>
<span>you need to get or set widths and heights without consideration for</span>
<span>box-sizing</span>
<span>, you should use the</span>
<span>width</span>
<span>and</span>
<span>height</span>
<span>methods (and</span>
<span>their siblings), as described in the section</span>
<span>&ldquo;Modifying Dimensions&rdquo;</span>
<span>on page 535</span>
<span>.</span>
<h4>The Element Selector</h4>
<span>To select an element to be manipulated by jQuery, just list its name within the paren‐</span>
<span>theses following the</span>
<span>$</span>
<span>symbol (or</span>
<span>jQuery</span>
<span>function name). For example, if you wish to</span>
<span>change the background color of all</span>
<span>&lt;blockquote&gt;</span>
<span>elements, you could use a state‐</span>
<span>ment such as the following:</span>
<pre><code class="javascript">$('blockquote').css('background', 'lime')</code></pre>
<h4>The ID Selector</h4>
<span>You can also refer to elements by their IDs if you place a</span>
<span>#</span>
<span>character in front of the ID</span>
<span>name. So, to add a border to the element with the ID of</span>
<span>advert</span>
<span>(for example), you</span>
<span>could use this:</span>
<pre><code class="javascript">$('#advert').css('border', '3px dashed red')</code></pre>
<h4>The Class Selector</h4>
<span>And you can manipulate groups of elements according to the class they use. For</span>
<span>example, to underline all elements that use the class</span>
<span>new</span>
<span>, you could use this:</span>
<pre><code class="javascript">$('.new').css('text-decoration', 'underline')</code></pre>
<h4>Combining Selectors</h4>
<span>Just as with CSS, you may combine selectors into a single jQuery selection using com‐</span>
<span>mas, as with the following example:</span>
<pre><code class="javascript">$('blockquote, #advert, .new').css('font-weight', 'bold')</code></pre>
<span>Example 21-2</span>
<span>brings all these types of selectors together into a single example (with</span>
<span>the jQuery statements shown in bold), the result of which you can see in</span>
<span>Figure 21-2</span>
<span>.</span>
<br/>
<span>Example 21-2. Using jQuery with</span>
<span>different selectors</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Second jQuery Example&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;blockquote&gt;Powerful and flexible as JavaScript is, with a plethora of
        built-in functions, it is still necessary to use additional code for
        simple things that cannot be achieved natively or with CSS, such as
        animations, event handling, and Ajax.&lt;/blockquote&gt;
        &lt;div id='advert'&gt;This is an ad&lt;/div&gt;
        &lt;p&gt;This is my &lt;span class='new'&gt;new&lt;/span&gt; website&lt;/p&gt;
        &lt;script&gt;
            $('blockquote').css('background', 'lime')
            $('#advert').css('border', '3px dashed red')
            $('.new').css('text-decoration', 'underline')
            $('blockquote, #advert, .new').css('font-weight', 'bold')
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.2.png"/></p>
<span>Figure 21-2. Manipulating multiple elements</span>
<h3>Handling Events</h3>
<span>If all jQuery could do was alter CSS styles, it wouldn&rsquo;t be a great deal of help&mdash;but of</span>
<span>course it can do far more than that. So let&rsquo;s further investigate by seeing how it han‐</span>
<span>dles events.</span>
<br/>
<span>As you will recall, most events are triggered by user interaction: when a mouse passes</span>
<span>over an element, the mouse button is clicked, or a key is pressed. But there are also</span>
<span>other events that can be triggered, such as when a document completes loading.</span>
<br/>
<span>With jQuery, it&rsquo;s a simple matter to attach your own code to these events in a safe way</span>
<span>that doesn&rsquo;t block other code from also gaining access to these events. For example,</span>
<span>here&rsquo;s how to get jQuery to respond to an element being clicked:</span>
<pre>
<code class="javascript">
$('#clickme').click(function()
{
    $('#result').html('You clicked the button!')
})
</code>
</pre>
<span>When the element with the ID of</span>
<span>clickme</span>
<span>is clicked, the</span>
<span>innerHTML</span>
<span>property of the</span>
<span>element with the ID of</span>
<span>result</span>
<span>is updated using the jQuery</span>
<span>html</span>
<span>function.</span>
<br/>
<span>jQuery objects (created with either the</span>
<span>$</span>
<span>or</span>
<span>jQuery</span>
<span>methods) are</span>
<span>not</span>
<span>the same as JavaScript objects created with</span>
<span>getElementById</span>
<span>. In</span>
<span>plain JavaScript, you can use a statement like</span>
<span>object = docu</span>
<span>ment.getElementById('result')</span>
<span>followed</span>
<span>by</span>
<span>(for</span>
<span>example)</span>
<span>object.innerHTML = 'something'</span>
<span>. But in the preceding example,</span>
<span>$('#result').innerHTML</span>
<span>would not work, because</span>
<span>innerHTML</span>
<span>is</span>
<span>not a property of a jQuery object. Hence the use of the jQuery</span>
<span>method</span>
<span>html</span>
<span>to achieve the required result.</span>
<span>Example 21-3</span>
<span>fleshes out the idea (which you can see running in</span>
<span>Figure 21-3</span>
<span>).</span>
<br/>
<span>Example 21-3. Processing an event</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;jQuery Events&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button id='clickme'&gt;Click Me&lt;/button&gt;
        &lt;p id='result'&gt;I am a paragraph&lt;/p&gt;
        &lt;script&gt;
            $('#clickme').click(function()
            {
                $('#result').html('You clicked the button!')
            })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.3.png"/></p>
<span>Figure 21-3. Processing a click event</span>
<br/>
<span>When accessing an event with jQuery, omit the</span>
<span>on</span>
<span>prefix that you</span>
<span>would use in standard JavaScript. So, for example, the</span>
<span>onmouseover</span>
<span>event name becomes the</span>
<span>mouseover</span>
<span>function in jQuery,</span>
<span>onclick</span>
<span>becomes</span>
<span>click</span>
<span>, and so on.</span>
<h3>Waiting Until the Document Is Ready</h3>
<span>Since jQuery is so closely related to the DOM in what it lets you achieve, more often</span>
<span>than not you will need to wait until a web page has loaded before manipulating parts</span>
<span>of it. Without jQuery, this can be achieved with the</span>
<span>onload</span>
<span>event, but there&rsquo;s a more</span>
<span>efficient, cross-browser jQuery method called</span>
<span>ready</span>
<span>, which you can call to enable it</span>
<span>at the earliest possible moment, even sooner than</span>
<span>onload</span>
<span>. This means jQuery can get</span>
<span>working on a page that much more quickly, and un-user-friendly delays are mini‐</span>
<span>mized.</span>
<br/>
<span>To make use of this feature, place your jQuery code within the following structure:</span>
<pre>
<code class="javascript">
$('document').ready(function()
{
    // Your code goes here
})
</code>
</pre>
<span>Now the code will wait there until the document is ready, and only then will it be</span>
<span>called by the</span>
<span>ready</span>
<span>method. In fact, there&rsquo;s a shorter version you can use that takes</span>
<span>even less typing, as shown in</span>
<span>Example 21-4</span>
<span>.</span>
<br/>
<span>Example 21-4.</span>
<span>The smallest jQuery &lsquo;ready&rsquo; code encapsulation function</span>
<pre>
<code class="javascript">
$(function()
{
    // Your code goes here
})
</code>
</pre>
<span>If you get used to encapsulating your jQuery statements in one of these two struc‐</span>
<span>tures, you won&rsquo;t encounter the types of errors that can be generated by trying to</span>
<span>access the DOM too soon.</span>
<br/>
<span>Alternatively, another approach is to always place your JavaScript at</span>
<span>the</span>
<span>end</span>
<span>of every HTML page, so that it is executed only after the</span>
<span>entire document has loaded. There is a secondary advantage too, in</span>
<span>that this ensures the web page contents gets priority with loading&mdash;</span>
<span>and so you may well see improvements in user experience.</span>
<br/>
<span>The only time end-of-page scripts may not be a good idea is if a</span>
<span>document could appear to be ready when it isn&rsquo;t, or if all external</span>
<span>style sheets have not yet loaded (which can really be identified only</span>
<span>by testing), causing users to think they can interact with it before</span>
<span>your script is ready. In such cases, implement the</span>
<span>ready</span>
<span>function</span>
<span>and all will be well. In fact, if in doubt, place your script at the page</span>
<span>end</span>
<span>&nbsp;and</span>
<span>&nbsp;use the</span>
<span>ready</span>
<span>function and you&rsquo;ll get the best of both</span>
<span>worlds.</span>
<h3>Event Functions and Properties</h3>
<span>You&rsquo;ve just seen the</span>
<span>ready</span>
<span>event method, but there are several dozen jQuery event</span>
<span>methods and associated properties you can access (far too many to detail here). How‐</span>
<span>ever, the following are some of the more commonly used and they&rsquo;ll get you started</span>
<span>for most projects. For a comprehensive summary of all available events, though,</span>
<span>please check out</span>
<span>api.jquery.com/category/events</span>
<span>.</span>
<h4>The blur and focus Events</h4>
<span>The</span>
<span>blur</span>
<span>event triggers when focus is removed from an element, causing it to blur,</span>
<span>and is a good partner for the</span>
<span>focus</span>
<span>event. Both can be used to add a handler to the</span>
<span>event, or they will trigger the event if you omit any arguments from the method&rsquo;s</span>
<span>parentheses.</span>
<br/>
<span>In</span>
<span>&nbsp;Example 21-5</span>
<span>, there are four input fields, and the first is given immediate focus</span>
<span>with a quick call to the</span>
<span>focus</span>
<span>method, applying it to the element with the ID of</span>
<span>first</span>
<span>. Then a pair of handlers are added to all</span>
<span>input</span>
<span>elements. The</span>
<span>focus</span>
<span>handler</span>
<span>sets their background to yellow when focus is given, and the</span>
<span>blur</span>
<span>handler sets their</span>
<span>background to light gray when focus is removed (or blurred).</span>
<br/>
<span>Example 21-5. Using the focus and blur events</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Events: blur&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2&gt;Click in and out of these fields&lt;/h2&gt;
        &lt;input id='first'&gt; &lt;input&gt; &lt;input&gt; &lt;input&gt;
        &lt;script&gt;
            $('#first').focus()
            $('input').focus(function() { $(this).css('background', '#ff0') } )
            $('input') .blur(function() { $(this).css('background', '#aaa') } )
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>You are allowed to include whitespace characters between the clos‐</span>
<span>ing parenthesis of a method, and the period operator used to attach</span>
<span>another method to it (and even after the period too if you like), as</span>
<span>in the previous example where I have right-aligned the</span>
<span>focus</span>
<span>and</span>
<span>blur</span>
<span>event names under each other, to help the rest of the state‐</span>
<span>ments also line up in columns.</span>
<br/>
<span>In</span>
<span>Figure 21-4</span>
<span>, you can see how this code gives any input fields that have ever had</span>
<span>focus a light gray background color. If one currently has focus, its background color is</span>
<span>set to yellow, while unvisited fields remain with a white background color.</span>
<p><img src="images/21.4.png"/></p>
<span>Figure 21-4. Attaching to blur and focus events</span>
<h4>The this Keyword</h4>
<span>This example also serves to illustrate the use of the</span>
<span>this</span>
<span>keyword. When an event is</span>
<span>called, the element on which it was triggered is passed in the object</span>
<span>this</span>
<span>, which can</span>
<span>then be given to the</span>
<span>$</span>
<span>method for processing. Or, since</span>
<span>this</span>
<span>is a standard JavaScript</span>
<span>object (and not a jQuery object), it can be used as such. So, if you prefer, you could</span>
<span>replace this:</span>
<pre><code class="javascript">$(this).css('background', '#ff0')</code></pre>
<span>with this:</span>
<pre><code class="javascript">this.style.background = '#ff0'</code></pre>
<h4>The click and dblclick Events</h4>
<span>You saw the</span>
<span>click</span>
<span>event a little earlier, but there&rsquo;s an event for handling double-clicks</span>
<span>too. To use either, attach the event&rsquo;s method to a jQuery selection, and for its argu‐</span>
<span>ment place a jQuery method to invoke when the event triggers, like this:</span>
<pre>
<code class="javascript">
$('.myclass') .click( function() { $(this).slideUp() })
$('.myclass').dblclick( function() { $(this).hide() })
</code>
</pre>
<span>Here I have opted to use in-line anonymous functions, but you can use named ones</span>
<span>instead if you like (but remember to supply only the name of the function without</span>
<span>parentheses, or it will be called at the wrong time). The</span>
<span>this</span>
<span>object will pass through</span>
<span>as expected and be made available to the named function, like this:</span>
<pre>
<code class="javascript">
$('.myclass').click(doslide)
function doslide()
{
    $(this).slideUp()
}
</code>
</pre>
<span>The</span>
<span>slideUp</span>
<span>and</span>
<span>hide</span>
<span>methods are detailed in the section,</span>
<span>&ldquo;Special Effects&rdquo; on page</span>
<span>521</span>
<span>. For now, though, just try running</span>
<span>Example 21-6</span>
<span>, and either click or double-click</span>
<span>the buttons to see how some disappear with an animation (using</span>
<span>slideUp</span>
<span>), and some</span>
<span>just vanish (using</span>
<span>hide</span>
<span>), as shown in</span>
<span>Figure 21-5</span>
<span>.</span>
<br/>
<span>Example 21-6. Attaching to the click and dblclick events</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Events: click &amp; dblclick&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2&gt;Click and double click the buttons&lt;/h2&gt;
        &lt;button class='myclass'&gt;Button 1&lt;/button&gt;
        &lt;button class='myclass'&gt;Button 2&lt;/button&gt;
        &lt;button class='myclass'&gt;Button 3&lt;/button&gt;
        &lt;button class='myclass'&gt;Button 4&lt;/button&gt;
        &lt;button class='myclass'&gt;Button 5&lt;/button&gt;
        &lt;script&gt;
            $('.myclass').click( function() { $(this).slideUp() })
            $('.myclass').dblclick( function() { $(this).hide() })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.5.png"/></p>
<span>Figure 21-5. Button 3 has been clicked once and is sliding up</span>
<h4>The keypress Event</h4>
<span>From time to time, you need better control over user keyboard interaction, particu‐</span>
<span>larly when processing complex forms or when writing games. For cases such as these,</span>
<span>you can use the</span>
<span>keypress</span>
<span>method, which can be attached to anything that accepts</span>
<span>keyboard input, such as an input field, or even the document itself.</span>
<br/>
<span>In</span>
<span>Example 21-7</span>
<span>, the method has been attached to the document in order to intercept</span>
<span>all key presses, and the result of running it can be seen in</span>
<span>Figure 21-6</span>
<span>.</span>
<br/>
<span>Example 21-7. Intercepting key presses</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Events: keypress&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2&gt;Press some keys&lt;/h2&gt;
        &lt;div id='result'&gt;&lt;/div&gt;
        &lt;script&gt;
            $(document).keypress(function(event)
            {
                key = String.fromCharCode(event.which)
                if (key &gt;= 'a' &amp;&amp; key &lt;= 'z' ||
                    key &gt;= 'A' &amp;&amp; key &lt;= 'Z' ||
                    key &gt;= '0' &amp;&amp; key &lt;= '9')
                    {
                        $('#result').html('You pressed: ' + key)
                        event.preventDefault()
                    }
            })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.6.png"/></p>
<span>Figure 21-6. Processing key presses from the keyboard</span>
<br/>
<span>There are a few things of note in this example that you will need to bear in mind</span>
<span>when writing your own keyboard handlers. For example, because browsers return</span>
<span>differing values for this event, the</span>
<span>which</span>
<span>property of the</span>
<span>event</span>
<span>object is normalized</span>
<span>by jQuery to return the same character codes across all browsers. So this is where to</span>
<span>look for which key was pressed.</span>
<br/>
<span>Being a character code, though, the value in</span>
<span>which</span>
<span>is a number, which you can turn</span>
<span>into a single letter string by passing it through</span>
<span>String.fromCharCode</span>
<span>. You don&rsquo;t have</span>
<span>to do this because you can easily respond to ASCII values in your code. But this</span>
<span>method is useful when you need to work with characters.</span>
<br/>
<span>When a key press is recognized, a simple statement to that effect is inserted into the</span>
<span>innerHTML</span>
<span>property of the</span>
<span>div</span>
<span>element with the ID of</span>
<span>result</span>
<span>.</span>
<br/>
<span>This is a good example of where the</span>
<span>document.write</span>
<span>function</span>
<span>should not be used, because the document will have already fully</span>
<span>loaded by the time the user presses a key. If</span>
<span>document.write</span>
<span>were</span>
<span>called to display the information at this time, it would erase the</span>
<span>current document. So this is where writing into the HTML of an</span>
<span>element is the perfect, nondestructive means of supplying user</span>
<span>feedback, as explained in</span>
<span>&ldquo;About document.write&rdquo; on page 328</span>
<span>&nbsp;in</span>
<span>Chapter 13</span>
<span>.</span>
<h4>Considerate Programming</h4>
<span>When you are anticipating user input, you should decide which values you will</span>
<span>respond to, and then ignore all others, just in case another event handler needs access</span>
<span>to them. This is considerate practice for any other utilities (and the main browser</span>
<span>itself) that may also be running. For example, in the preceding example I have chosen</span>
<span>to accept only the characters a&ndash;z, A&ndash;Z and 0&ndash;9, ignoring all others.</span>
<br/>
<span>There are two ways you can pass keyboard interrupts onto (or deny them from) other</span>
<span>handlers. First, do nothing, and when your code exits, other handlers will also see and</span>
<span>be able to react to the same key presses. This can cause confusion, though, if multiple</span>
<span>actions occur from a single key press.</span>
<br/>
<span>Alternatively, when you don&rsquo;t want the event to trigger any other handlers, you can</span>
<span>make a call to the</span>
<span>preventDefault</span>
<span>method of</span>
<span>event</span>
<span>, which then keeps the event</span>
<span>from &ldquo;bubbling&rdquo; up to other handlers.</span>
<br/>
<span>Be careful where you place your call to</span>
<span>preventDefault</span>
<span>because if</span>
<span>it&rsquo;s outside the part of code in which you process the key presses,</span>
<span>then it will prevent all other keyboard events from bubbling, and</span>
<span>you may lock the user out of the browser (or at least out of using</span>
<span>certain features).</span>
<h4>The mousemove Event</h4>
<span>Some of the most commonly intercepted events are for mouse handling. I&rsquo;ve already</span>
<span>covered mouse button clicks, but now let&rsquo;s take a look at attaching to mouse move‐</span>
<span>ment events.</span>
<br/>
<span>It&rsquo;s time, I think, for a slightly more interesting example, so in</span>
<span>Example 21-8</span>
<span>I have</span>
<span>put together a rudimentary drawing program using jQuery in conjunction with an</span>
<span>HTML5 canvas. Although the canvas is not fully explained until</span>
<span>&nbsp;Chapter 23</span>
<span>, don&rsquo;t</span>
<span>worry because the code is very simple.</span>
<br/>
<span>Example 21-8. Intercepting mouse movement and mouse key events</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Events: Mouse Handling&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
        &lt;style&gt;
        #pad {
            background:#def;
            border :1px solid #aaa;
        }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;canvas id='pad' width='480' height='320'&gt;&lt;/canvas&gt;
        &lt;script&gt;
            canvas = $('#pad')[0]
            context = canvas.getContext("2d")
            pendown = false

            $('#pad').mousemove(function(event)
            {
                var xpos = event.pageX - canvas.offsetLeft
                var ypos = event.pageY - canvas.offsetTop
                if (pendown) context.lineTo(xpos, ypos)
                else context.moveTo(xpos, ypos)
                    context.stroke()
            })

            $('#pad').mousedown(function() { pendown = true } )
            $('#pad') .mouseup(function() { pendown = false } )
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>In</span>
<span>Figure 21-7</span>
<span>, you can see how this very simple set of instructions can be used to</span>
<span>create line drawings (well, if you have artistic ability, that is :). Here&rsquo;s how it works.</span>
<span>First, a</span>
<span>canvas</span>
<span>object is created by referencing the first (or zeroth) element of the</span>
<span>jQuery selector, like this:</span>
<pre><code class="javascript">canvas = $('#pad')[0]</code></pre>
<p><img src="images/21.7.png"</p><br/>
<span>Figure 21-7. Capturing mouse movement and mouse key events</span>
<br/>
<span>This is one way you can quickly take a jQuery object and extract a standard JavaScript</span>
<span>element object. Another would be to use the</span>
<span>get</span>
<span>method, like this:</span>
<pre><code class="javascript">canvas = $('#pad').get(0)</code></pre>
<span>The two are interchangeable with each other, but</span>
<span>get</span>
<span>has the edge because, without</span>
<span>any argument passed, it will return all the element node objects from a jQuery object</span>
<span>as an array.</span>
<br/>
<span>Anyway, as you&rsquo;ll learn in</span>
<span>&nbsp;Chapter 23</span>
<span>, the canvas will be written to using a special</span>
<span>context</span>
<span>object, which is now created:</span>
<pre><code class="javascript">context = canvas.getContext("2d")</code></pre>
<span>There&rsquo;s one more thing to initialize, which is to create a Boolean variable called</span>
<span>pen</span>
<span>down</span>
<span>to track the status of the mouse button (initially</span>
<span>false</span>
<span>because the pen is up):</span>
<pre><code class="javascript">pendown = false</code></pre>
<span>After this, the canvas (with the ID of</span>
<span>pad</span>
<span>) has its</span>
<span>mousemove</span>
<span>event intercepted by the</span>
<span>anonymous function shown following, within which three sets of things happen:</span>
<pre>
<code class="javascript">
$('#pad').mousemove(function(event)
{
    ...
})
</code>
</pre>
<span>First, the</span>
<span>xpos</span>
<span>and</span>
<span>ypos</span>
<span>local variables (local because of the</span>
<span>var</span>
<span>keywords) are</span>
<span>assigned values representing the position of the mouse within the canvas area.</span>
<br/>
<span>These values are taken from the jQuery properties</span>
<span>pageX</span>
<span>and</span>
<span>pageY</span>
<span>, which refer to</span>
<span>the mouse pointer&rsquo;s offset from the top lefthand corner of the containing document.</span>
<span>Therefore, since the canvas is itself offset slightly from that location, the</span>
<span>canvas</span>
<span>offset</span>
<span>values (in</span>
<span>offsetLeft</span>
<span>and</span>
<span>offsetTop</span>
<span>) are subtracted from both</span>
<span>pageX</span>
<span>and</span>
<span>pageY</span>
<span>:</span>
<pre>
<code class="javascript">
var xpos = event.pageX - canvas.offsetLeft
var ypos = event.pageY - canvas.offsetTop
</code>
</pre>
<span>Now that we know where the mouse pointer is in relation to the canvas, the next pair</span>
<span>of lines test the value of</span>
<span>pendown</span>
<span>. If it is</span>
<span>true</span>
<span>, then the mouse button is being pressed,</span>
<span>and so a</span>
<span>lineTo</span>
<span>call is made to draw a line to the current location. Otherwise, the pen</span>
<span>is up, and so</span>
<span>moveTo</span>
<span>is called to simply update the current location:</span>
<pre>
<code class="javascript">
if (pendown) context.lineTo(xpos, ypos)
else context.moveTo(xpos, ypos)
</code>
</pre>
<span>Then, the</span>
<span>stroke</span>
<span>method is called to apply whichever drawing command was just</span>
<span>made to the canvas. These five lines are all that is responsible for handling the draw‐</span>
<span>ing, but it&rsquo;s still necessary to track the mouse button state, and so the final two lines of</span>
<span>code intercept the</span>
<span>mousedown</span>
<span>and</span>
<span>mouseup</span>
<span>events, setting</span>
<span>pendown</span>
<span>to</span>
<span>true</span>
<span>when the</span>
<span>mouse button is pressed, and</span>
<span>false</span>
<span>when it&rsquo;s released:</span>
<pre>
<code class="javascript">
$('#pad').mousedown(function() { pendown = true } )
$('#pad') .mouseup(function() { pendown = false } )
</code>
</pre>
<span>In this example, you see the combination of three different event handlers working</span>
<span>together to create a simple utility, using both local variables for internal expressions,</span>
<span>and global variables where an object or the state of something must be made available</span>
<span>across multiple functions.</span>
<h4>Other Mouse Events</h4>
<span>The</span>
<span>mouseenter</span>
<span>and</span>
<span>mouseleave</span>
<span>events trigger whenever the mouse passes into an</span>
<span>element or leaves it. No position values are supplied because you are simply assumed</span>
<span>to want to make a Boolean decision about what to do regarding these events.</span>
<br/>
<span>In</span>
<span>Example 21-9</span>
<span>, a pair of anonymous functions are attached to these events, altering</span>
<span>the HTML of an element accordingly, as shown in</span>
<span>Figure 21-8</span>
<span>.</span>
<br/>
<span>Example 21-9. Detecting the mouse entering and leaving an element</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Events: Further Mouse Handling&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2 id='test'&gt;Pass the mouse over me&lt;/h2&gt;
        &lt;script&gt;
            $('#test').mouseenter(function() { $(this).html('Hey, stop tickling!') } )
            $('#test').mouseleave(function() { $(this).html('Where did you go?') } )
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.8.png"/></p>
<span>Figure 21-8. Detecting when the mouse enters and leaves an element</span>
<br/>
<span>When the mouse enters the bounds of the selected element, that element&rsquo;s</span>
<span>innerHTML</span>
<span>property is updated (with a call to</span>
<span>html</span>
<span>). Then when the mouse leaves again, a further</span>
<span>update is made to the element&rsquo;s HTML.</span>
<h4>Alternative Mouse Methods</h4>
<span>A number of other jQuery mouse event functions are available to cover a wide range</span>
<span>of circumstances, all of which are detailed at</span>
<span>&nbsp;api.jquery.com/category/events/mouse-</span>
<span>events</span>
<span>.</span>
<br/>
<span>For example, you can use the following alternative</span>
<span>mouseover</span>
<span>and</span>
<span>mouseout</span>
<span>methods</span>
<span>to achieve similar results:</span>
<pre>
<code class="javascript">
$('#test').mouseover(function() { $(this).html('Cut it out!') } )
$('#test') .mouseout(function() { $(this).html('Try it this time...') } )
</code>
</pre>
<span>Or you could use the</span>
<span>hover</span>
<span>method to bind two handlers with a single function call,</span>
<span>like this:</span>
<pre>
<code class="javascript">
$('#test').hover(function() { $(this).html('Cut it out!') },
function() { $(this).html('Try it this time...') } )
</code>
</pre>
<span>If you are planning on creating</span>
<span>mouseover</span>
<span>and</span>
<span>mouseout</span>
<span>combined effects, clearly the</span>
<span>hover</span>
<span>method is the logical function to choose, but there&rsquo;s also another way you can</span>
<span>achieve the same result, which is chaining (explained later on in the section</span>
<span>&ldquo;Method</span>
<span>chaining&rdquo; on page 529</span>
<span>), using code like this:</span>
<pre>
<code class="javascript">
$('#test').mouseover(function() { $(this).html('Cut it out!') } )
.mouseout(function() { $(this).html('Try it this time...') } )
</code>
</pre>
<span>Here the period operator at the start of the second statement attaches it to the first, so</span>
<span>that it creates a chain of methods.</span>
<br/>
<span>The preceding examples show how to capture mouse click, mouse</span>
<span>movement, and keyboard events, and therefore they are mostly</span>
<span>suitable for desktop environments&mdash;which is what jQuery is pri‐</span>
<span>marily targeted at. However, there is a version of jQuery for mobile</span>
<span>devices that provides all the touch-handling event control you</span>
<span>could wish for (and much more), available at</span>
<span>jquerymobile.com</span>
<span>.</span>
<h4>The submit Event</h4>
<span>When a form is submitted, you may often want to perform some error checking on</span>
<span>the data entered, before it gets submitted to the server. One way to do this is to inter‐</span>
<span>cept the</span>
<span>submit</span>
<span>event of the form as in</span>
<span>Example 21-10</span>
<span>.</span>
<span>Figure 21-9</span>
<span>shows the result</span>
<span>of loading this document and then submitting the form with one or more fields left</span>
<span>empty:</span>
<br/>
<span>Example 21-10. Intercepting the submit event of a form</span>
<pre>
<code class="html">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Events: submit&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form id='form'&gt;
            First name: &lt;input id='fname' type='text' name='fname'&gt;&lt;br&gt;
            Last name: &lt;input id='lname' type='text' name='lname'&gt;&lt;br&gt;
            &lt;input type='submit'&gt;
        &lt;/form&gt;
        &lt;script&gt;
            $('#form').submit(function()
            {
                if ($('#fname').val() == '' ||
                    $('#lname').val() == '')
                {
                    alert('Please enter both names')
                    return false
                }
            })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.9.png"/></p>
<span>Figure 21-9. Checking user input upon submission</span>
<br/>
<span>The key parts of this example are where the event is attached to an anonymous func‐</span>
<span>tion, like this:</span>
<pre><code class="javascript">$('#form').submit(function()</code></pre>
<span>And where the values of the two input fields are tested for being empty:</span>
<pre>
<code class="javascript">
if ($('#fname').val() == '' || $('#lname').val() == '')
</code>
</pre>
<span>Here the jQuery</span>
<span>val</span>
<span>method is used to retrieve the value in the</span>
<span>value</span>
<span>property of</span>
<span>each field. This is neater than using</span>
<span>$('#fname')[0]</span>
<span>(as in</span>
<span>&nbsp;Example 21-8</span>
<span>) to get</span>
<span>access to the DOM object, and then appending</span>
<span>value</span>
<span>to it to read the field&rsquo;s value,</span>
<span>like this:</span>
<span>$('#fname')[0].value</span>
<span>.</span>
<br/>
<span>In this example, by returning the value</span>
<span>false</span>
<span>if one or more fields is empty, the nor‐</span>
<span>mal submission process is cancelled. To enable the submission to proceed, you can</span>
<span>return</span>
<span>true</span>
<span>, or just not return anything.</span>
<h3>Special Effects</h3>
<span>jQuery really begins to come into its own when processing special effects. Although</span>
<span>you can use CSS3 transitions, they are not so easy to manage dynamically from Java‐</span>
<span>Script, but with jQuery it really is as simple as selecting one or more elements and</span>
<span>then applying one or more effects to them.</span>
<br/>
<span>The core effects available are hiding and showing, fading in and out, sliding, and ani‐</span>
<span>mations, and these can be used singly, together in synchronization, or in sequence.</span>
<span>They also support the use of callbacks, which are functions or methods that get called</span>
<span>only once an operation has completed.</span>
<span>The following section lists some of the more useful jQuery effects, each of which sup‐</span>
<span>ports up to three arguments, as follows:</span>
<br/>
<span>No Arguments</span>
<div class="t30">When no arguments are given, the method is called immediately without being placed in the animation queue.</div>
<br/>
<span>Duration</span>
<div class="t30">When a duration value is supplied, the effect will take place over the assigned time,which can be a value in milliseconds, or the strings fast or slow.</div>
<br/>
<span>Easing</span>
<div class="t30">There are only two easing options in the jQuery library,swing and linear. The default is swing and it gives a more natural effect than linear . For more easing options, you can check out plug-ins like the jQuery UI easing options at &nbsp;jqueryui.com/easing.</div>
<br/>
<span>Callback</span>
<div class="t30">If you supply a callback function, it will be called after the effect method completes.</div>
<br/>
<span>So, for example, you can call the</span>
<span>hide</span>
<span>method in a variety of ways, such as these:</span>
<pre>
<code class="javascript">
$('#object').hide()
$('#object').hide(1000)
$('#object').hide('fast')
$('#object').hide('linear')
$('#object').hide('slow', 'linear')
$('#object').hide(myfunction)
$('#object').hide(333, myfunction)
$('#object').hide(200, 'linear', function() { alert('Finished!') } )
</code>
</pre>
<span>As you&rsquo;ll see in the section</span>
<span>&ldquo;Method chaining&rdquo; on page 529</span>
<span>, you can attach function</span>
<span>calls (that supply arguments) to each other and they will then be animated in turn,</span>
<span>like the following, which will hide and then reveal an element:</span>
<pre><code class="javascript">$('#object').hide(1000).show(1000)</code></pre>
<span>Other less commonly used arguments are also supported by many of these methods,</span>
<span>and you can get full details on them (and all the other supported effects methods) by</span>
<span>visiting</span>
<span>api.jquery.com/category/effects</span>
<span>.</span>
<h4>Hiding and Showing</h4>
<span>Probably the simplest effect is to hide and show elements in response to user interac‐</span>
<span>tion. As shown in the previous section, you can provide no, or a variety of arguments</span>
<span>to the</span>
<span>hide</span>
<span>and</span>
<span>show</span>
<span>methods and, by default, when none are supplied, the result is</span>
<span>just like instantly hiding or revealing an element.</span>
<br/>
<span>The way these two methods work when arguments are supplied is to modify the</span>
<span>width</span>
<span>,</span>
<span>height</span>
<span>, and</span>
<span>opacity</span>
<span>properties of an element simultaneously, until they reach</span>
<span>0 for</span>
<span>hide</span>
<span>, or reach their original values for</span>
<span>show</span>
<span>. When hiding, the</span>
<span>display</span>
<span>property</span>
<span>of the element is set to</span>
<span>none</span>
<span>when fully hidden, and after calling</span>
<span>show</span>
<span>, its previous</span>
<span>value is reassigned once the element is fully restored.</span>
<span>Example 21-11</span>
<span>lets you try</span>
<span>hide</span>
<span>and</span>
<span>show</span>
<span>for yourself (as shown in</span>
<span>Figure 21-10</span>
<span>).</span>
<br/>
<span>Example 21-11. Hiding and showing an element</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Effects: hide &amp; show&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button id='hide'&gt;Hide&lt;/button&gt;
        &lt;button id='show'&gt;Show&lt;/button&gt;
        &lt;p id='text'&gt;Click the Hide and Show buttons&lt;/p&gt;
        &lt;script&gt;
            $('#hide').click(function() { $('#text').hide('slow', 'linear') })
            $('#show').click(function() { $('#text').show('slow', 'linear') })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.10.png"/></p>
<span>Figure 21-10. The element is in the process of being revealed</span>
<h4>The toggle Method</h4>
<span>As an alternative to calling both the</span>
<span>hide</span>
<span>and</span>
<span>show</span>
<span>methods, you can use the</span>
<span>toggle</span>
<span>method</span>
<span>instead,</span>
<span>which</span>
<span>enables</span>
<span>you</span>
<span>to</span>
<span>replace</span>
<span>the</span>
<span>previous</span>
<span>example</span>
<span>with</span>
<span>Example 21-12</span>
<span>.</span>
<br/>
<span>Example 21-12. Using the toggle method</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Effects: toggle&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button id='toggle'&gt;Toggle&lt;/button&gt;
        &lt;p id='text'&gt;Click the Toggle button&lt;/p&gt;
        &lt;script&gt;
            $('#toggle').click(function() { $('#text').toggle('slow', 'linear') })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>The</span>
<span>toggle</span>
<span>method takes the same arguments as</span>
<span>hide</span>
<span>and</span>
<span>show</span>
<span>but keeps internal</span>
<span>track of the state of the element so that it knows whether to hide or show it.</span>
<br/>
<span>There are four main jQuery methods that set either one state or</span>
<span>another, and which offer toggling versions to simplify coding. In</span>
<span>addition to</span>
<span>toggle</span>
<span>, there&rsquo;s</span>
<span>fadeToggle</span>
<span>,</span>
<span>slideToggle</span>
<span>, and</span>
<span>toggle</span>
<span>Class</span>
<span>, all described in this chapter.</span>
<h4>Fading In and Out</h4>
<span>There are four methods for managing fades:</span>
<span>fadeIn</span>
<span>,</span>
<span>fadeOut</span>
<span>,</span>
<span>fadeToggle</span>
<span>, and</span>
<span>fadeTo</span>
<span>. You should be getting the idea of how jQuery works by now, and realize that</span>
<span>the first three are similar to</span>
<span>show</span>
<span>,</span>
<span>hide</span>
<span>, and</span>
<span>toggle</span>
<span>. The last one, though, is a little</span>
<span>different in that it lets you specify an opacity value to which an element (or elements)</span>
<span>should be faded, between 0 and 1.</span>
<br/>
<span>Example 21-13</span>
<span>provides four buttons with which to try out each of these methods, as</span>
<span>shown in</span>
<span>Figure 21-11</span>
<span>.</span>
<br/>
<span>Example 21-13.</span>
<span>The four fade methods</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Effects: Fading&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button id='fadeout'&gt;fadeOut&lt;/button&gt;
        &lt;button id='fadein'&gt;fadeIn&lt;/button&gt;
        &lt;button id='fadetoggle'&gt;fadeToggle&lt;/button&gt;
        &lt;button id='fadeto'&gt;fadeTo&lt;/button&gt;
        &lt;p id='text'&gt;Click the buttons above&lt;/p&gt;
        &lt;script&gt;
            $('#fadeout') .click(function() { $('#text').fadeOut( 'slow' ) })
            $('#fadein') .click(function() { $('#text').fadeIn( 'slow' ) })
            $('#fadetoggle').click(function() { $('#text').fadeToggle('slow' ) })
            $('#fadeto') .click(function() { $('#text').fadeTo( 'slow', 0.5) })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.11.png"/></p>
<span>Figure 21-11. The text has been faded to 50 percent opacity</span>
<h4>Sliding Elements Up and Down</h4>
<span>Another way to make elements disappear and reappear is to alter their height over</span>
<span>time to make them appear to slide up and down. There are three methods available to</span>
<span>do this:</span>
<span>slideDown</span>
<span>,</span>
<span>slideUp</span>
<span>, and</span>
<span>slideToggle</span>
<span>. They work in a similar way to the</span>
<span>previous functions, as coded in</span>
<span>Example 21-14</span>
<span>, and shown in</span>
<span>Figure 21-12</span>
<span>.</span>
<br/>
<span>Example 21-14. Using the slide methods</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Effects: Sliding&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;button id='slideup'&gt;slideUp&lt;/button&gt;
        &lt;button id='slidedown'&gt;slideDown&lt;/button&gt;
        &lt;button id='slidetoggle'&gt;slideToggle&lt;/button&gt;
        &lt;div id='para' style='background:#def'&gt;
        &lt;h2&gt;From A Tale of Two Cities - By Charles Dickens&lt;/h2&gt;
        &lt;p&gt;It was the best of times, it was the worst of times, it was the age of
        wisdom, it was the age of foolishness, it was the epoch of belief, it was
        the epoch of incredulity, it was the season of Light, it was the season of
        Darkness, it was the spring of hope, it was the winter of despair, we had
        everything before us, we had nothing before us, we were all going direct to
        Heaven, we were all going direct the other way - in short, the period was so
        far like the present period, that some of its noisiest authorities insisted
        on its being received, for good or for evil, in the superlative degree of
        comparison only&lt;/p&gt;
        &lt;/div&gt;
        &lt;script&gt;
            $('#slideup') .click(function() { $('#para').slideUp( 'slow') })
            $('#slidedown') .click(function() { $('#para').slideDown( 'slow') })
            $('#slidetoggle').click(function() { $('#para').slideToggle('slow') })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.12.png"/></p>
<span>Figure 21-12. The paragraph is sliding up</span>
<br/>
<span>These methods work well when you have menus and submenus that you want to</span>
<span>open up or close dynamically, according to the sections clicked by the user.</span>
<h4>Animations</h4>
<span>Now we can really start to have some fun by actually moving elements around in the</span>
<span>browser. To do this, though, because the default value of</span>
<span>static</span>
<span>will not allow them</span>
<span>to move, you must remember to first give your elements&rsquo;</span>
<span>position</span>
<span>properties, values</span>
<span>of</span>
<span>relative</span>
<span>,</span>
<span>fixed</span>
<span>, or</span>
<span>absolute</span>
<span>.</span>
<br/>
<span>To animate an element, all you do is supply a list of CSS properties (excluding colors)</span>
<span>to the</span>
<span>animate</span>
<span>method. Unlike the previous effects methods, animate requires this</span>
<span>list of properties first, and then you can supply any duration, easing, and callback</span>
<span>arguments you need.</span>
<br/>
<span>So,</span>
<span>for</span>
<span>example,</span>
<span>to</span>
<span>animate</span>
<span>a</span>
<span>bouncing</span>
<span>ball,</span>
<span>you</span>
<span>could</span>
<span>use</span>
<span>code</span>
<span>such</span>
<span>as</span>
<span>Example 21-15</span>
<span>(which displays like</span>
<span>Figure 21-13</span>
<span>).</span>
<br/>
<span>Example 21-15. Creating a bouncing ball animation</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Effects: Animation&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
        &lt;style&gt;
        #ball {
            position :relative;
        }
        #box {
            width :640px;
            height :480px;
            background:green;
            border :1px solid #444;
        }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id='box'&gt;
            &lt;img id='ball' src='ball.png'&gt;
        &lt;/div&gt;
        &lt;script&gt;
            bounce()

            function bounce()
            {
                $('#ball')
                .animate( { left:'270px', top :'380px' }, 'slow', 'linear')
                .animate( { left:'540px', top :'190px' }, 'slow', 'linear')
                .animate( { left:'270px', top :'0px' }, 'slow', 'linear')
                .animate( { left:'0px', top :'190px' }, 'slow', 'linear')
            }
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.13.png"/></p>
<span>Figure 21-13. The ball is bouncing around in the browser</span>
<br/>
<span>In the</span>
<span>&lt;style&gt;</span>
<span>section of this example, the</span>
<span>position</span>
<span>property of the ball is set rela‐</span>
<span>tive to its container, which is a</span>
<span>&lt;div&gt;</span>
<span>element that has been given a border and green</span>
<span>background.</span>
<br/>
<span>Then the</span>
<span>&lt;script&gt;</span>
<span>section features a function called</span>
<span>bounce</span>
<span>, in which there are four</span>
<span>calls to</span>
<span>animate</span>
<span>placed one after the other.</span>
<br/>
<span>Notice how the names of the properties to animate are supplied without quotation</span>
<span>marks and are separated from the values to which they should be changed with</span>
<span>colons&mdash;in other words, in the form of associative arrays.</span>
<br/>
<span>You can also supply relative values in place of absolute ones by using the</span>
<span>+=</span>
<span>and</span>
<span>-=</span>
<span>operators. So, for example, the following will animate the ball to the right and up by</span>
<span>50 pixels relative to its current position:</span>
<br/>
<pre>
<code class="javascript">
.animate( { left:'+=50px', top:'-=50px' }, 'slow', 'linear')
</code>
</pre>
<span>And you can even use the string values of</span>
<span>hide</span>
<span>,</span>
<span>show</span>
<span>, and</span>
<span>toggle</span>
<span>to update a prop‐</span>
<span>erty, like this:</span>
<pre>
<code class="javascript">
.animate( { height:'hide', width:'toggle' }, 'slow', 'linear')
</code>
</pre>
<span>If you wish to modify any hyphenated CSS properties and they&rsquo;re</span>
<span>not being passed within quotation marks (as with</span>
<span>height</span>
<span>and</span>
<span>width</span>
<span>in this example), you must convert their names to camelCase</span>
<span>first, by removing the hyphens and capitalizing the letter following.</span>
<span>For example, to animate the</span>
<span>left-margin</span>
<span>property of an element,</span>
<span>you would supply the name of</span>
<span>leftMargin</span>
<span>. However, when supply‐</span>
<span>ing a hyphenated property name within a string (for example:</span>
<span>css('font-weight', 'bold')</span>
<span>, you shouldn&rsquo;t convert it to camel‐</span>
<span>Case.</span>
<h6>Method chaining</h6>
<span>Because of the way that method chaining works, when jQuery methods have been</span>
<span>given arguments, they will run sequentially. So each of these methods is called only</span>
<span>after the previous one has finished animating. Any methods you call without argu‐</span>
<span>ments, however, will run immediately and quickly, without animation.</span>
<br/>
<span>When you load this example into a web browser, the animation is kicked off (so to</span>
<span>speak) with a single call to</span>
<span>bounce</span>
<span>, causing the ball to bounce off the bottom, right,</span>
<span>and top edges of its container, and then come to rest back at the middle of the left-</span>
<span>hand edge.</span>
<h6>Using callbacks</h6>
<span>As it stands, the preceding example stops after four animations, but you can use a</span>
<span>callback function to make the animation start over again every time it completes.</span>
<span>This is why I chose to place the animation in a named function.</span>
<br/>
<span>You see, now that the animation is in a function named</span>
<span>bounce</span>
<span>, it is only necessary to</span>
<span>add that name as a callback to the fourth animation in the group in order to make the</span>
<span>animation repeat forever, as shown in bold here:</span>
<pre><code class="javascript">.animate( { left:'0px', top :'190px' }, 'slow', 'linear', bounce)</code></pre>
<span>Using the</span>
<span>animate</span>
<span>method, you can animate many CSS properties with the notable</span>
<span>exception of colors. However, even color animation is possible with the addition of</span>
<span>the jQuery UI add-in, which adds the facility to create very eye-pleasing color-</span>
<span>changing effects (plus many more goodies). Please refer to</span>
<span>jqueryui.com</span>
<span>for details.</span>
<h4>Stopping Animations</h4>
<span>There are several methods available for cutting off animations midway through, or</span>
<span>ending a chain of animations. For example, with</span>
<span>clearQueue</span>
<span>you can empty all stored</span>
<span>animations that are queued up, with</span>
<span>stop</span>
<span>you can immediately stop any animation</span>
<span>currently in progress, or the</span>
<span>finish</span>
<span>method will stop the currently running anima‐</span>
<span>tion, and remove any that are queued.</span>
<br/>
<span>So let&rsquo;s turn the previous example into a sort of game by making the ball clickable,</span>
<span>such that when the click event triggers, the animation will cease. To do this, all that&rsquo;s</span>
<span>required is to add the following single line of code underneath the</span>
<span>bounce</span>
<span>function:</span>
<pre><code class="javascript">$('#ball').click(function() { $(this).finish() })</code></pre>
<span>If you successfully manage to click the ball, the</span>
<span>finish</span>
<span>method will stop the current</span>
<span>animation, empty the queue, and ignore any callbacks&mdash;in other words, the ball will</span>
<span>come to rest.</span>
<br/>
<span>For more information on managing jQuery queues, check out</span>
<span>api.jquery.com/queue</span>
<span>,</span>
<span>where you&rsquo;ll also learn how to directly manipulate the contents of queues to get</span>
<span>exactly the effects you need.</span>
<h3>Manipulating the DOM</h3>
<span>Because jQuery is so tightly linked with the DOM, of necessity the examples in this</span>
<span>chapter have already utilized some of its DOM-accessing methods, such as</span>
<span>html</span>
<span>and</span>
<span>val</span>
<span>. But let&rsquo;s now look at all the DOM methods in detail to discover exactly what you</span>
<span>can get access to with jQuery, and how.</span>
<br/>
<span>In</span>
<span>&nbsp;Example 21-3</span>
<span>, you saw how to use the</span>
<span>html</span>
<span>method to change the</span>
<span>innerHTML</span>
<span>property of an element. This method can be used either to set the HTML or retrieve it</span>
<span>from an HTML document.</span>
<span>&nbsp;Example 21-16</span>
<span>&nbsp;(with the jQuery highlighted in bold)</span>
<span>shows how to retrieve the HTML content of an element (as shown in</span>
<span>Figure 21-14</span>
<span>).</span>
<br/>
<span>Example 21-16. Displaying the HTML of an element using an alert window</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;The DOM: html &amp; text&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2&gt;Example Document&lt;/h2&gt;
        &lt;p id='intro'&gt;This is an example document&lt;/p&gt;
        &lt;script&gt;
            alert(
                $('#intro').html()
            )
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.14.png"/></p>
<span>Figure 21-14. Retrieving and displaying the HTML of an element</span>
<br/>
<span>When you omit any argument from a call to this method the result is to read rather</span>
<span>than set the HTML of the element.</span>
<h4>The Difference Between The text and html Methods</h4>
<span>When you are working with XML documents, you cannot use the</span>
<span>html</span>
<span>method</span>
<span>because it simply won&rsquo;t work (it&rsquo;s designed for use only with HTML). But you can use</span>
<span>the</span>
<span>text</span>
<span>method to achieve a similar result (in XML or HTML documents), like this:</span>
<pre><code class="javascript">text = $('#intro').text()</code></pre>
<span>The difference between the two is quite simply that</span>
<span>html</span>
<span>treats the content as HTML</span>
<span>and</span>
<span>text</span>
<span>treats it as text. So, for example, let&rsquo;s assume you wish to assign the follow‐</span>
<span>ing string to an element:</span>
<pre><code class="javascript">&lt;a href='http://google.com'&gt;Visit Google&lt;/a&gt;</code></pre>
<span>If you assign it to an HTML element using the</span>
<span>html</span>
<span>method, the DOM will be upda‐</span>
<span>ted with the new</span>
<span>&lt;a&gt;</span>
<span>element and the link will become clickable. But if you do so to</span>
<span>either an XML or HTML document using the</span>
<span>text</span>
<span>method, then that string will first</span>
<span>be escaped into text (for example, by converting HTML characters such as</span>
<span>&lt;</span>
<span>into the</span>
<span>&amp;lt;</span>
<span>entity, and so on), and then inserted into the element&mdash;no element is added to</span>
<span>the DOM.</span>
<h4>The val and attr Methods</h4>
<span>There are a couple more methods for interacting with the content of elements. First,</span>
<span>you can set and get the value of an input element with the</span>
<span>val</span>
<span>method, as illustrated</span>
<span>in</span>
<span>Example 21-10</span>
<span>, in which the first and last name fields are read. To set a value, sim‐</span>
<span>ply provide it as an argument to the method, like this:</span>
<pre><code class="javascript">$('#password').val('mypass123')</code></pre>
<span>With the</span>
<span>attr</span>
<span>method, you can get and set the attributes of elements, as shown in</span>
<span>Example 21-17</span>
<span>, in which a link to the Google website has been completely replaced</span>
<span>with one to Yahoo!</span>
<br/>
<span>Example 21-17. Modifying attributes with the attr method</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;The DOM: attr&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2&gt;Example Document&lt;/h2&gt;
        &lt;p&gt;&lt;a id='link' href='http://google.com' title='Google'&gt;Visit Google&lt;/a&gt;&lt;/p&gt;
        &lt;script&gt;
            $('#link').text('Visit Yahoo!')
            $('#link').attr( { href :'http://yahoo.com', title:'Yahoo!' } )
            alert('The new HTML is:\n' + $('p').html())
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>The first jQuery statement uses the</span>
<span>text</span>
<span>method to change the text inside the</span>
<span>&lt;a&gt;</span>
<span>element, and the second one changes the</span>
<span>href</span>
<span>and</span>
<span>title</span>
<span>attribute values to match,</span>
<span>by supplying the data in the form of an associative array. The third statement displays</span>
<span>the changed element contents in an</span>
<span>alert</span>
<span>window, by first retrieving it with the</span>
<span>html</span>
<span>method, as shown in</span>
<span>Figure 21-15</span>
<span>.</span>
<p><img src="images/21.15.png"/></p>
<span>Figure 21-15. The link has now been completely modified</span>
<br/>
<span>You can also read the value of an attribute like this:</span>
<pre><code class="javascript">url = $('#link').attr('href')</code></pre>
<h4>Adding and Removing Elements</h4>
<span>While it is possible to insert elements into the DOM using the</span>
<span>html</span>
<span>method, this is</span>
<span>suitable only for creating child elements of a particular element. Therefore, jQuery</span>
<span>provides a number of methods for manipulating any part of the DOM.</span>
<br/>
<span>These methods are</span>
<span>append</span>
<span>,</span>
<span>prepend</span>
<span>,</span>
<span>after</span>
<span>,</span>
<span>before</span>
<span>,</span>
<span>remove</span>
<span>, and</span>
<span>empty</span>
<span>, and an</span>
<span>example of each is included in</span>
<span>Example 21-18</span>
<span>.</span>
<br/>
<span>Example 21-18. Adding and removing elements</span>
<pre>
<code class="html">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Modifying The DOM&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2&gt;Example Document&lt;/h2&gt;
        &lt;a href='http://google.com' title='Google'&gt;Visit Google&lt;/a&gt;
        &lt;code&gt;
            This is a code section
        &lt;/code&gt;
        &lt;p&gt;
        &lt;button id='a'&gt;Remove the image&lt;/button&gt;
        &lt;button id='b'&gt;Empty the quote&lt;/button&gt;
        &lt;/p&gt;
        &lt;img id='ball' src='ball.png'&gt;
        &lt;blockquote id='quote' style='border:1px dotted #444; height:20px;'&gt;
        test
        &lt;/blockquote&gt;
        &lt;script&gt;
            $('a').prepend('Link: ')
            $("[href^='http']").append(" &lt;img src='link.png'&gt;")
            $('code').before('&lt;hr&gt;').after('&lt;hr&gt;')
            $('#a').click(function() { $('#ball').remove() } )
            $('#b').click(function() { $('#quote').empty() } )
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>In</span>
<span>Figure 21-16</span>
<span>, you can see the result of applying the</span>
<span>prepend</span>
<span>,</span>
<span>append</span>
<span>,</span>
<span>before</span>
<span>, and</span>
<span>after</span>
<span>methods to some elements.</span>
<p><img src="images/21.16.png"/></p>
<span>Figure 21-16. A document with a variety of different elements</span>
<br/>
<span>The</span>
<span>prepend</span>
<span>method has been used to insert the string</span>
<span>Link:</span>
<span>before the inner text or</span>
<span>HTML of all</span>
<span>&lt;a&gt;</span>
<span>elements, like this:</span>
<pre><code class="javascript">$('a').prepend('Link: ')</code></pre>
<span>Then an attribute selector is used to select all elements that have an</span>
<span>href</span>
<span>attribute</span>
<span>starting with</span>
<span>http</span>
<span>. The string</span>
<span>http</span>
<span>denotes links that are not relative (and therefore</span>
<span>are absolute), in which case an external link icon is appended to the end of the inner</span>
<span>text or HTML of all matching elements, like this:</span>
<pre><code class="javascript">$("[href^='http']").append(" &lt;img src='link.png'&gt;")</code></pre>
<span>The</span>
<span>^=</span>
<span>operator is how only the start of the string is matched. If</span>
<span>just the</span>
<span>=</span>
<span>operator were used, only entire strings that matched</span>
<span>would be selected. CSS selectors are covered in detail in</span>
<span>Chapter 18</span>
<span>and</span>
<span>Chapter 19</span>
<span>.</span>
<br/>
<span>Next, using chained methods, the</span>
<span>before</span>
<span>and</span>
<span>after</span>
<span>methods are employed to place</span>
<span>sibling elements either before or after another one. In this instance, I have chosen to</span>
<span>place an</span>
<span>&lt;hr&gt;</span>
<span>element both before and after</span>
<span>&lt;code&gt;</span>
<span>elements, like this:</span>
<pre><code class="javascript">$('code').before('&lt;hr&gt;').after('&lt;hr&gt;')</code></pre>
<span>Then I added a little user-interaction with a couple of buttons. When clicked, using</span>
<span>the</span>
<span>remove</span>
<span>method, the first button removes the</span>
<span>&lt;img&gt;</span>
<span>element containing the ball,</span>
<span>like this:</span>
<pre><code class="javascript">$('#a').click(function() { $('#ball').remove() } )</code></pre>
<span>The image is now no longer in the DOM, which you can verify if</span>
<span>you highlight the browser contents, right-click it, and use Inspect</span>
<span>Element in most major desktop browsers, or press F12 in Internet</span>
<span>Explorer.</span>
<span>Finally, the</span>
<span>empty</span>
<span>method is applied to the</span>
<span>&lt;blockquote&gt;</span>
<span>element when the second</span>
<span>button is clicked, which simply empties out the element&rsquo;s contents, but leaves the ele‐</span>
<span>ment in the DOM, like this:</span>
<pre><code class="javascript">$('#b').click(function() { $('#quote').empty() } )</code></pre>
<h3>Dynamically Applying Classes</h3>
<span>Sometimes it can be convenient to change the class an element employs, or maybe</span>
<span>just add a class to an element or remove it from one. For example, suppose you have a</span>
<span>class called</span>
<span>read</span>
<span>that you use to style blog posts that have been read. Using the</span>
<span>add</span>
<span>Class</span>
<span>method, it&rsquo;s a simple matter to add a class to that post, like this:</span>
<pre><code class="javascript">$('#post23').addClass('read')</code></pre>
<span>You can add more than one class at a time by separating them with spaces, like this:</span>
<pre><code class="javascript">$('#post23').addClass('read liked')</code></pre>
<span>But what if a reader chooses to mark a post as unread again, perhaps to be reminded</span>
<span>to read it again later? In this case, all you need to do is use</span>
<span>removeClass</span>
<span>, like this:</span>
<pre><code class="javascript">$('#post23').removeClass('read')</code></pre>
<span>All other classes that the post uses remain unaffected when you do this.</span>
<span>Where you are supporting the ability of a class to be continuously added or removed,</span>
<span>you might, however, find it simpler to use the</span>
<span>toggleClass</span>
<span>method, like this:</span>
<pre><code class="javascript">$('#post23').toggleClass('read')</code></pre>
<span>Now, if the post doesn&rsquo;t use the class, it is added; otherwise, it is removed.</span>
<h3>Modifying Dimensions</h3>
<span>Working with dimensions is always a tricky web development task because different</span>
<span>browsers tend to utilize slightly differing values. One of jQuery&rsquo;s big strengths,</span>
<span>though, is that it does a great job of normalizing these types of values, so that your</span>
<span>pages will look how you intend them to appear in all major browsers.</span>
<br/>
<span>There are three types of dimensions: element width and height, inner width and</span>
<span>height, and outer width and height. Let&rsquo;s look at these in turn.</span>
<h4>The width and height Methods</h4>
<span>Both the</span>
<span>width</span>
<span>and</span>
<span>height</span>
<span>methods can get the width or height of the first element</span>
<span>that matches a selector, or set the width or height of all matching elements. For exam‐</span>
<span>ple, to get the width of an element with the ID of</span>
<span>elem</span>
<span>, you could use this statement:</span>
<pre><code class="javascript">width = $('#elem').width()</code></pre>
<span>The value returned to the variable</span>
<span>width</span>
<span>is a numeric value, which is different than</span>
<span>returning the CSS value from a call to the</span>
<span>css</span>
<span>method, such as the following, which</span>
<span>would return (for example)</span>
<span>230px</span>
<span>, rather than just the number</span>
<span>230</span>
<span>.</span>
<pre><code class="javascript">width = $('#elem').css('width')</code></pre>
<span>You can also obtain the width of either the current window or the document, like this:</span>
<pre>
<code class="javascript">
width = $(window).width()
width = $(document).width()
</code>
</pre>
<span>When you pass the</span>
<span>window</span>
<span>or</span>
<span>document</span>
<span>objects to jQuery, you can‐</span>
<span>not fetch their width or height with the</span>
<span>css</span>
<span>method. Instead you</span>
<span>must use the</span>
<span>width</span>
<span>or</span>
<span>height</span>
<span>methods.</span>
<span>The value returned is independent of the</span>
<span>box-sizing</span>
<span>setting (see</span>
<span>Chapter 19</span>
<span>). If you</span>
<span>need to take</span>
<span>box-sizing</span>
<span>into account, use the</span>
<span>css</span>
<span>method with an argument of</span>
<span>width</span>
<span>instead, like this (but remember to remove the</span>
<span>px</span>
<span>that will be added after the</span>
<span>numeric part if you intend to work with the values returned):</span>
<pre><code class="javascript">width = $('#elem').css('width')</code></pre>
<span>Setting values is just as easy. For example, to set all elements that use the class</span>
<span>box</span>
<span>to</span>
<span>100 &times; 100 pixels, you could use this statement:</span>
<pre><code class="javascript">$('.box').width(100).height(100)</code></pre>
<span>Example</span>
<span>21-19</span>
<span>combines</span>
<span>these</span>
<span>actions</span>
<span>into</span>
<span>a</span>
<span>single</span>
<span>program</span>
<span>that</span>
<span>displays</span>
<span>as</span>
<span>Figure 21-17</span>
<span>.</span>
<br/>
<span>Example 21-19. Getting and setting element dimensions</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Dimensions&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;
        &lt;button id='getdoc'&gt;Get document width&lt;/button&gt;
        &lt;button id='getwin'&gt;Get window width&lt;/button&gt;
        &lt;button id='getdiv'&gt;Get div width&lt;/button&gt;
        &lt;button id='setdiv'&gt;Set div width to 150 pixels&lt;/button&gt;
        &lt;/p&gt;
        &lt;div id='result' style='width:300px; height:50px; background:#def;'&gt;&lt;/div&gt;
        &lt;script&gt;
            $('#getdoc').click(function()
            {
                $('#result').html('Document width: ' + $(document).width())
            })
            $('#getwin').click(function()
            {
                $('#result').html('Window width: ' + $(window).width())
            })
            $('#getdiv').click(function()
            {
                $('#result').html('Div width: ' + $('#result').width())
            })
            $('#setdiv').click(function()
            {
                $('#result').width(150)
                $('#result').html('Div width: ' + $('#result').width())
            } )
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.17.png"/></p>
<span>Figure 21-17. Getting and setting element dimensions</span>
<br/>
<span>At the start of the body, there are four buttons: three for reporting the widths of the</span>
<span>document, window, and a</span>
<span>&lt;div&gt;</span>
<span>element that appears just below the buttons, and one</span>
<span>to set the div&rsquo;s width to a new value. In the script section, there are four jQuery state‐</span>
<span>ments, of which the first three simply fetch the widths of the objects given, and then</span>
<span>report these values by writing into the HTML of the div.</span>
<br/>
<span>The final statement has two parts: the first reduces the width of the</span>
<span>&lt;div&gt;</span>
<span>element to</span>
<span>150 pixels, and then the second displays the new width value within the div, by fetch‐</span>
<span>ing it using the</span>
<span>width</span>
<span>method, to ensure the computed value is displayed.</span>
<br/>
<span>When the page has been zoomed (either in or out) by the user, this</span>
<span>event is not noted in any major browser, in any way that JavaScript</span>
<span>can reliably detect. Therefore, jQuery cannot take zooming into</span>
<span>account when it applies or returns dimensional values. So it is</span>
<span>therefore possible to get unexpected results in this circumstance.</span>
<h4>The innerWidth and innerHeight Methods</h4>
<span>It&rsquo;s often necessary to also take borders, padding, and other properties into account</span>
<span>when working with dimensions, and therefore you can use the</span>
<span>innerWidth</span>
<span>and</span>
<span>inner</span>
<span>Height</span>
<span>methods to return the width and height of the first element that matches the</span>
<span>selector,</span>
<span>including</span>
<span>the padding but</span>
<span>not including</span>
<span>any border.</span>
<br/>
<span>For example, the following returns the</span>
<span>innerWidth</span>
<span>of the element with an ID of</span>
<span>elem</span>
<span>including padding:</span>
<pre><code class="javascript">iwidth = $('#elem').innerWidth()</code></pre>
<h4>The outerWidth and OuterHeight Methods</h4>
<span>To return the dimensions of an element including</span>
<span>both</span>
<span>padding and border, you can</span>
<span>call the</span>
<span>outerWidth</span>
<span>and</span>
<span>outerHeight</span>
<span>methods, like this:</span>
<pre><code class="javascript">owidth = $('#elem').outerWidth()</code></pre>
<span>If you wish to</span>
<span>also</span>
<span>include any margin in the returned value, you can pass the value of</span>
<span>true</span>
<span>when you call either of these methods, like this:</span>
<pre><code class="javascript">owidth = $('#elem').outerWidth(true)</code></pre>
<span>The values returned for any of the</span>
<span>inner...</span>
<span>or</span>
<span>outer...</span>
<span>methods</span>
<span>are not necessarily integers and may be fractional in some cases.</span>
<span>User page zooming is not detected by these methods, and you can‐</span>
<span>not use these methods on</span>
<span>window</span>
<span>or</span>
<span>document</span>
<span>objects&mdash;for these,</span>
<span>use the</span>
<span>width</span>
<span>or</span>
<span>height</span>
<span>methods instead.</span>
<h3>DOM Traversal</h3>
<span>If you refer back to the section on the Document Object Model (DOM) in</span>
<span>&nbsp;Chap‐</span>
<span>ter 13</span>
<span>, you&rsquo;ll recall that all web pages are constructed in much the same way as exten‐</span>
<span>ded</span>
<span>families.</span>
<span>There</span>
<span>are</span>
<span>parent</span>
<span>and</span>
<span>child</span>
<span>objects,</span>
<span>siblings,</span>
<span>grandparents</span>
<span>and</span>
<span>grandchildren, and even element relationships that could be referred to as cousins,</span>
<span>aunts, and so forth. For example, in the following snippet, the</span>
<span>&lt;li&gt;</span>
<span>elements are chil‐</span>
<span>dren of the</span>
<span>&lt;ul&gt;</span>
<span>element which, in turn, is parent to the</span>
<span>&lt;li&gt;</span>
<span>elements:</span>
<pre>
<code class="javascript">
&lt;ul&gt;
    &lt;li&gt;Item 1&lt;/li&gt;
    &lt;li&gt;Item 2&lt;/li&gt;
    &lt;li&gt;Item 3&lt;/li&gt;
&lt;/ul&gt;
</code>
</pre>
<span>And, like families, there are multiple ways you can refer to HTML elements, such as</span>
<span>absolutely, starting at the window level and moving on down, also known as travers‐</span>
<span>ing the DOM. Or you can use the relationship between one element and another to</span>
<span>refer to elements. Really it&rsquo;s a matter of what makes sense to your particular project.</span>
<br/>
<span>For example, if you want a web page to be as self-contained as possible so that you</span>
<span>have a better chance of cutting and pasting elements into other web documents, it</span>
<span>makes a lot of sense to refer to elements near each other by relative addressing. What‐</span>
<span>ever you choose, though, jQuery offers a wide range of functions to help you accu‐</span>
<span>rately address elements.</span>
<h4>Parent Elements</h4>
<span>To refer to an element&rsquo;s direct parent, you use the</span>
<span>parent</span>
<span>method, like this:</span>
<pre><code class="javascript">my_parent = $('#elem').parent()</code></pre>
<span>Whatever type of element</span>
<span>elem</span>
<span>may be, the</span>
<span>my_parent</span>
<span>object now contains a jQuery</span>
<span>object that refers to its parent element. In fact, since selectors can refer to multiple</span>
<span>elements, this call actually returns an object that refers to a list of parent elements</span>
<span>(although the list can have only one item), one for each matching element.</span>
<br/>
<span>Since a parent may have many children, you might wonder whether more elements</span>
<span>can be returned by this method than there are parents. Take the preceding snippet</span>
<span>with three</span>
<span>&lt;li&gt;</span>
<span>elements. In this case, will three parent elements be returned (because</span>
<span>three matches will be made), even though there is just a single</span>
<span>&lt;ul&gt;</span>
<span>parent?</span>
<pre><code class="javascript">my_parent = $('li').parent()</code></pre>
<span>The answer is no, because jQuery is smart enough to recognize all duplicates and fil‐</span>
<span>ter them out. To verify this, if you ask for the number of elements returned like this,</span>
<span>the result will be 1:</span>
<pre><code class="javascript">alert($('li').parent().length)</code></pre>
<span>Let&rsquo;s now make something happen when the selector matches, such as changing the</span>
<span>font-weight</span>
<span>property of the parent element in the previous snippet to</span>
<span>bold</span>
<span>, like this:</span>
<pre><code class="javascript">$('li').parent().css('font-weight', 'bold')</code></pre>
<h6>Using a filter</h6>
<span>Optionally, a selector can be passed to</span>
<span>parent</span>
<span>, to filter out which of the parents the</span>
<span>desired changes should apply to. To illustrate,</span>
<span>Example 21-20</span>
<span>has three small lists and</span>
<span>a couple of jQuery statements.</span>
<br/>
<span>Example 21-20. Accessing parent elements</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;DOM Traversal: Parent&lt;/title&gt;
&lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;ul&gt;
        &lt;li&gt;Item 1&lt;/li&gt;
        &lt;li&gt;Item 2&lt;/li&gt;
        &lt;li&gt;Item 3&lt;/li&gt;
    &lt;/ul&gt;
    &lt;ul class='memo'&gt;
        &lt;li&gt;Item 1&lt;/li&gt;
        &lt;li&gt;Item 2&lt;/li&gt;
        &lt;li&gt;Item 3&lt;/li&gt;
    &lt;/ul&gt;
    &lt;ul&gt;
        &lt;li&gt;Item 1&lt;/li&gt;
        &lt;li&gt;Item 2&lt;/li&gt;
        &lt;li&gt;Item 3&lt;/li&gt;
    &lt;/ul&gt;
    &lt;script&gt;
        $('li').parent() .css('font-weight', 'bold')
        $('li').parent('.memo').css('list-style-type', 'circle')
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>The three lists are all the same, except that the middle one&rsquo;s</span>
<span>&lt;ul&gt;</span>
<span>element uses a class</span>
<span>of</span>
<span>memo</span>
<span>. In the script section, the first statement applies a value of</span>
<span>bold</span>
<span>to the</span>
<span>font-</span>
<span>weight</span>
<span>property of all parents of</span>
<span>&lt;li&gt;</span>
<span>elements. In this instance, it causes all the</span>
<span>&lt;ul&gt;</span>
<span>elements to display in bold.</span>
<br/>
<span>The second statement is similar, but also passes the class name</span>
<span>memo</span>
<span>to the parent</span>
<span>method, so that only that parent will be selected. Then the</span>
<span>css</span>
<span>method is called to set</span>
<span>the</span>
<span>list-style-type</span>
<span>property of the selected list to</span>
<span>circle</span>
<span>.</span>
<span>&nbsp;Figure 21-18</span>
<span>&nbsp;shows</span>
<span>these two statements in effect.</span>
<p><img src="images/21.18.png"/></p>
<span>Figure 21-18. Accessing parent elements with and without filters</span>
<br/>
<h6>Selecting all ancestor elements</h6>
<span>We&rsquo;ve just seen how to select direct parents of elements, but you can also select ances‐</span>
<span>tors, all the way back to the</span>
<span>&lt;html&gt;</span>
<span>root element by using the</span>
<span>parents</span>
<span>method. But</span>
<span>why might you want to do this? Well, how about wanting to access the first</span>
<span>&lt;div&gt;</span>
<span>element up the ancestry chain in order to style it according to something dynamic</span>
<span>that has gone on further down the chain?</span>
<br/>
<span>This type of selection may be slightly more advanced than you can think of a reason</span>
<span>for right now, but you&rsquo;ll be pleased it&rsquo;s there when you need it, and here&rsquo;s how you</span>
<span>might proceed:</span>
<pre><code class="javascript">$('#elem').parents('div').css('background', 'yellow')</code></pre>
<span>Actually, that may not be exactly what you want, because it will select all</span>
<span>&lt;div&gt;</span>
<span>ele‐</span>
<span>ments in the ancestry chain, and there may be others further up that you don&rsquo;t want</span>
<span>to style. So, for this type of eventuality, you can further filter the selection by using the</span>
<span>parentsUntil</span>
<span>method instead.</span>
<br/>
<span>The</span>
<span>parentsUntil</span>
<span>method traverses up the ancestry chain in the same way as</span>
<span>parents</span>
<span>, but stops at the first element that matches the selection filter (in this case, it&rsquo;s</span>
<span>a</span>
<span>&lt;div&gt;</span>
<span>element), so you can use it in the same way as the preceding statement, cer‐</span>
<span>tain in the knowledge that you will select only exactly the element you want:</span>
<pre><code class="javascript">$('#elem').parentsUntil('div').css('background', 'yellow')</code></pre>
<span>To illustrate the difference between these two methods, take a look at</span>
<span>Example 21-21</span>
<span>,</span>
<span>which contains two sets of nested elements, both of which are within one parent</span>
<span>&lt;div&gt;</span>
<span>element. Then, in the script section, there is one example each of the</span>
<span>parents</span>
<span>and</span>
<span>parentsUntil</span>
<span>methods being called.</span>
<br/>
<span>Example 21-21. Using the parents and parentsUntil methods</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;DOM Traversal: Parents&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
&lt;body&gt;
    &lt;div&gt;
        &lt;div&gt;
            &lt;section&gt;
                &lt;blockquote&gt;
                    &lt;ul&gt;
                        &lt;li&gt;Item 1&lt;/li&gt;
                        &lt;li id='elem'&gt;Item 2&lt;/li&gt;
                        &lt;li&gt;Item 3&lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/blockquote&gt;
            &lt;/section&gt;
        &lt;/div&gt;
    &lt;div&gt;
        &lt;section&gt;
            &lt;blockquote&gt;
                &lt;ul&gt;
                    &lt;li&gt;Item 1&lt;/li&gt;
                    &lt;li&gt;Item 2&lt;/li&gt;
                    &lt;li&gt;Item 3&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/blockquote&gt;
        &lt;/section&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;script&gt;
        $('#elem').parents('div') .css('background', 'yellow')
        $('#elem').parentsUntil('div').css('text-decoration', 'underline')
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>If you take a look at</span>
<span>Figure 21-19</span>
<span>, you&rsquo;ll see that the first jQuery statement has set the</span>
<span>background color of all the contents to yellow. This is because the ancestry tree has</span>
<span>been traversed all the way up to the</span>
<span>&lt;html&gt;</span>
<span>element using the</span>
<span>parents</span>
<span>method, and</span>
<span>both</span>
<span>&lt;div&gt;</span>
<span>elements encountered on the way up the tree have been selected (the one</span>
<span>containing the list with the</span>
<span>&lt;li&gt;</span>
<span>element&mdash;highlighted in bold&mdash;with the ID of</span>
<span>elem</span>
<span>,</span>
<span>and</span>
<span>its parent</span>
<span>&lt;div&gt;</span>
<span>, which contains both sets of nested elements).</span>
<p><img src="images/21.19.png"/></p>
<span>Figure 21-19. Comparing the parents and parentsUntil methods</span>
<br/>
<span>However, the second statement uses</span>
<span>parentsUntil</span>
<span>so that the selection stops at the</span>
<span>first</span>
<span>&lt;div&gt;</span>
<span>element encountered. This means that when the underline styling is</span>
<span>applied, it is applied only to the closest parent</span>
<span>&lt;div&gt;</span>
<span>that contains the</span>
<span>&lt;li&gt;</span>
<span>element</span>
<span>with the ID of</span>
<span>elem</span>
<span>. The outer</span>
<span>&lt;div&gt;</span>
<span>is not reached, and because it doesn&rsquo;t get styled,</span>
<span>the second list doesn&rsquo;t display underlined.</span>
<h4>Child Elements</h4>
<span>To access the children of an element, you use the</span>
<span>children</span>
<span>method, like this:</span>
<span>my_children = $('#elem').children()</span>
<span>Just like the</span>
<span>parent</span>
<span>method, this goes only one level and returns a list of none, one,</span>
<span>or more matching selections. You can also pass a filter argument to it to select</span>
<span>between the children, like this:</span>
<pre><code class="javascript">li_children = $('#elem').children('li')</code></pre>
<span>Here only children that are</span>
<span>&lt;li&gt;</span>
<span>elements will be selected.</span>
<br/>
<span>To delve deeper down the generations, you need to use the</span>
<span>find</span>
<span>method, which is the</span>
<span>inverse of</span>
<span>parents</span>
<span>, like this:</span>
<pre><code class="javascript">li_descendants = $('#elem').find('li')</code></pre>
<span>However, unlike</span>
<span>parents</span>
<span>, you</span>
<span>must</span>
<span>provide a filter selector to the</span>
<span>find</span>
<span>method, but if</span>
<span>you need to select all descendants, you can use the universal selector, like this:</span>
<pre><code class="javascript">all_descendants = $('#elem').find('*')</code></pre>
<h4>Sibling Elements</h4>
<span>When it comes to selecting siblings, there&rsquo;s an even wider range of methods available,</span>
<span>starting with</span>
<span>siblings</span>
<span>.</span>
<br/>
<span>The</span>
<span>siblings</span>
<span>method will return all the matching elements that are children of the</span>
<span>same parent,</span>
<span>except</span>
<span>for the element used for selecting. So, taking the example of the</span>
<span>following snippet, if you look up the siblings of the</span>
<span>&lt;li&gt;</span>
<span>element with the ID of</span>
<span>two</span>
<span>,</span>
<span>it will return only the first and third</span>
<span>&lt;li&gt;</span>
<span>elements.</span>
<pre>
<code class="javascript">
&lt;ul&gt;
    &lt;li&gt;Item 1&lt;/li&gt;
    &lt;li id='two'&gt;Item 2&lt;/li&gt;
    &lt;li&gt;Item 3&lt;/li&gt;
&lt;/ul&gt;
</code>
</pre>
<span>Here is such a statement that will cause the sibling elements to be bold:</span>
<pre><code class="javascript">$('#two').siblings().css('font-weight', 'bold')</code></pre>
<span>You can also use a filter in the</span>
<span>siblings</span>
<span>method to further narrow down the siblings</span>
<span>returned. For example, to select only those siblings that use the class</span>
<span>new</span>
<span>, you might</span>
<span>use a statement such as this:</span>
<pre><code class="javascript">$('#two').siblings('.new').css('font-weight', 'bold')</code></pre>
<span>Example 21-22</span>
<span>(liberally whitespaced to line up the attributes in columns) displays an</span>
<span>unordered list of seven items, of which four of them use the class</span>
<span>new</span>
<span>, and the second</span>
<span>item also has the ID of</span>
<span>two</span>
<span>:</span>
<br/>
<span>Example 21-22. Selecting and</span>
<span>filtering sibling elements</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;DOM Traversal: Siblings&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;ul&gt;
            &lt;li class='new'&gt;Item 1&lt;/li&gt;
            &lt;li id='two' class='new'&gt;Item 2&lt;/li&gt;
            &lt;li &gt;Item 3&lt;/li&gt;
            &lt;li class='new'&gt;Item 4&lt;/li&gt;
            &lt;li class='new'&gt;Item 5&lt;/li&gt;
            &lt;li &gt;Item 6&lt;/li&gt;
            &lt;li &gt;Item 7&lt;/li&gt;
        &lt;/ul&gt;
        &lt;script&gt;
            $('#two').siblings('.new').css('font-weight', 'bold')
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>When</span>
<span>loaded</span>
<span>into</span>
<span>a</span>
<span>browser,</span>
<span>the</span>
<span>result</span>
<span>of</span>
<span>issuing</span>
<span>the</span>
<span>jQuery</span>
<span>statement</span>
<span>is</span>
<span>Figure 21-20</span>
<span>, in which only Item 1, Item 4, and Item 5 have been bold, even though</span>
<span>Item 2 also uses the class</span>
<span>new</span>
<span>(because the method is called on that element, and so it</span>
<span>is excluded from the selection).</span>
<p><img src="images/21.20.png"/></p>
<span>Figure 21-20. Selecting sibling elements</span>
<br/>
<span>Since the</span>
<span>siblings</span>
<span>method omits the element on which it is called</span>
<span>(which I will refer to as the</span>
<span>callee</span>
<span>), it cannot be used to select from</span>
<span>all</span>
<span>children of a parent element. However, to achieve that with the</span>
<span>preceding example, you could use a statement such as the follow‐</span>
<span>ing, which will, for example, return all siblings (including the</span>
<span>callee) that use the class</span>
<span>new</span>
<span>:</span>
<pre><code class="javascript">$('#two').parent().children('.new').css('font-weight', 'bold')</code></pre>
<span>Or you can add the</span>
<span>andSelf</span>
<span>method to the selection to achieve the</span>
<span>same result, like this:</span>
<pre><code class="javascript">$('#two').siblings('.new').andSelf().css('font-weight', 'bold')</code></pre>
<h4>Selecting the Next and Previous Elements</h4>
<span>When you need finer control over the selection of siblings, you can further narrow</span>
<span>down the elements returned using the</span>
<span>next</span>
<span>and</span>
<span>prev</span>
<span>methods, and their extended</span>
<span>versions. For example, to refer to the element immediately following a selector, you</span>
<span>can use a statement such as this (which sets the matched element(s) to display in</span>
<span>bold):</span>
<pre><code class="javascript">$('#new').next().css('font-weight', 'bold')</code></pre>
<span>In the case of the following liberally whitespaced snippet, for example, the third item</span>
<span>has the ID</span>
<span>new</span>
<span>, and therefore the fourth item is returned:</span>
<pre>
<code class="javascript">
&lt;ul&gt;
    &lt;li &gt;Item 1&lt;/li&gt;
    &lt;li &gt;Item 2&lt;/li&gt;
    &lt;li id='new'&gt;Item 3&lt;/li&gt;
    &lt;li &gt;Item 4&lt;/li&gt;
    &lt;li &gt;Item 5&lt;/li&gt;
&lt;/ul&gt;
</code>
</pre>
<span>So far, so simple. But what if you would like to reference</span>
<span>all</span>
<span>the siblings following a</span>
<span>particular element? Well, you can do that with</span>
<span>nextAll</span>
<span>method, like this (which in</span>
<span>the preceding snippet would style the last two items):</span>
<pre><code class="javascript">$('#new').nextAll().css('font-weight', 'bold')</code></pre>
<span>When calling</span>
<span>nextAll</span>
<span>, you can also supply a filter to select from the elements that are</span>
<span>matched, such as the following, which will style only the following siblings that use</span>
<span>the class</span>
<span>info</span>
<span>: (in this snippet, however, there are no elements that use that class, so</span>
<span>the statement will do nothing):</span>
<pre><code class="javascript">$('#new').nextAll('.info').css('font-weight', 'bold')</code></pre>
<span>Or, consider the case of this snippet, in which one item has the ID</span>
<span>new</span>
<span>and another</span>
<span>has the ID</span>
<span>old</span>
<span>.</span>
<pre>
<code class="javascript">
&lt;ul&gt;
    &lt;li &gt;Item 1&lt;/li&gt;
    &lt;li id='new'&gt;Item 2&lt;/li&gt;
    &lt;li &gt;Item 3&lt;/li&gt;
    &lt;li id='old'&gt;Item 4&lt;/li&gt;
    &lt;li &gt;Item 5&lt;/li&gt;
&lt;/ul&gt;
</code>
</pre>
<span>Now it&rsquo;s possible to select only those siblings following the one with the ID of</span>
<span>new</span>
<span>, up</span>
<span>to (but not including) the one with the ID of</span>
<span>old</span>
<span>, like this (in which just the third</span>
<span>item will be styled):</span>
<pre><code class="javascript">$('#new').nextUntil('#old').css('font-weight', 'bold')</code></pre>
<span>If no argument is supplied to</span>
<span>nextUntil</span>
<span>, it behaves exactly like</span>
<span>nextAll</span>
<span>, returning all</span>
<span>following siblings. You can also supply a second argument to</span>
<span>nextUntil</span>
<span>to act as a</span>
<span>filter for selecting from the elements that are matched by it, like this:</span>
<pre><code class="javascript">$('#new').nextUntil('#old', '.info').css('font-weight', 'bold')</code></pre>
<span>In this statement, only those elements that use the class</span>
<span>info</span>
<span>will be styled, which in</span>
<span>the case of the preceding snippet is none of them, so no action will be taken.</span>
<span>You can do exactly the same working backward through groups of siblings by using</span>
<span>the</span>
<span>prev</span>
<span>,</span>
<span>prevAll</span>
<span>, and</span>
<span>prevUntil</span>
<span>methods.</span>
<h4>Traversing jQuery Selections</h4>
<span>As well as traversing throughout the DOM, once you have returned a set of elements</span>
<span>as a jQuery selection, you can also traverse those elements, choosing which ones to</span>
<span>act on.</span>
<br/>
<span>For example, to style just the first element returned by a selection, you can use the</span>
<span>first</span>
<span>method, like this (to set the first list item in the first unordered list to display</span>
<span>underlined):</span>
<pre><code class="javascript">$('ul&gt;li').first().css('text-decoration', 'underline')</code></pre>
<span>Or you can choose to style only the last item by using the</span>
<span>last</span>
<span>method, like this:</span>
<pre><code class="javascript">$('ul&gt;li').last().css('font-style', 'italic')</code></pre>
<span>Or, to access an element by index (starting from 0), you can use the</span>
<span>eq</span>
<span>method, like</span>
<span>this (which styles the second item in the list due to starting at 0):</span>
<pre><code class="javascript">$('ul&gt;li').eq(1).css('font-weight', 'bold')</code></pre>
<span>You can also apply a filter to a selection using the</span>
<span>filtert</span>
<span>method, like this (which</span>
<span>changes the background color of every other element starting at the first, element 0):</span>
<pre><code class="javascript">$('ul&gt;li').filter(':even').css('background', 'cyan')</code></pre>
<span>Remember that when indexing into jQuery selections, the first ele‐</span>
<span>ment</span>
<span>is</span>
<span>the</span>
<span>zeroth.</span>
<span>So,</span>
<span>for</span>
<span>example,</span>
<span>when</span>
<span>you</span>
<span>use</span>
<span>the</span>
<span>selec‐</span>
<span>tor</span>
<span>:even</span>
<span>in this manner, elements 1, 3, 5, and so on will be</span>
<span>selected (not 2, 4, 6...).</span>
<span>To exclude one or more elements you can apply the</span>
<span>not</span>
<span>method, like this (where ele‐</span>
<span>ments that</span>
<span>don&rsquo;t</span>
<span>use the ID</span>
<span>new</span>
<span>are styled in blue):</span>
<pre><code class="javascript">$('ul&gt;li').not('#new').css('color', 'blue')</code></pre>
<span>And you can also select an element depending on what descendants it has. To select</span>
<span>only elements that have descendant</span>
<span>&lt;ol&gt;</span>
<span>elements, for example, you could use this</span>
<span>statement, to place a line through those that match:</span>
<pre><code class="javascript">$('ul&gt;li').has('ol').css('text-decoration', 'line-through')</code></pre>
<span>Example 21-23</span>
<span>brings all these together to style an unordered list, one of whose ele‐</span>
<span>ments also contains an ordered list:</span>
<br/>
<span>Example 21-23. Traversing a jQuery selection</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Selection Traversal&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;ul&gt;
            &lt;li&gt;Item 1&lt;/li&gt;
            &lt;li&gt;Item 2&lt;/li&gt;
            &lt;li id='new'&gt;Item 3&lt;/li&gt;
            &lt;li&gt;Item 4
            &lt;ol type='a'&gt;
                &lt;li&gt;Item 4a&lt;/li&gt;
                &lt;li&gt;Item 4b&lt;/li&gt;
            &lt;/ol&gt;&lt;/li&gt;
            &lt;li&gt;Item 5&lt;/li&gt;
        &lt;/ul&gt;
        &lt;script&gt;
            $('ul&gt;li').first() .css('text-decoration', 'underline')
            $('ul&gt;li').last() .css('font-style', 'italic')
            $('ul&gt;li').eq(1) .css('font-weight', 'bold')
            $('ul&gt;li').filter(':even').css('background', 'cyan')
            $('ul&gt;li').not('#new') .css('color', 'blue')
            $('ul&gt;li').has('ol') .css('text-decoration', 'line-through')
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>As you will see from studying</span>
<span>Figure 21-21</span>
<span>, every element in each list has been styled</span>
<span>by one or more of the jQuery statements.</span>
<p><img src="images/21.21.png"/></p>
<span>Figure 21-21. Uniquely addressing elements in a jQuery selection</span>
<h4>The is Method</h4>
<span>There is also a way you can query a jQuery selector to return a Boolean value for use</span>
<span>in plain JavaScript, which is the</span>
<span>is</span>
<span>method. Unlike other jQuery filtering methods,</span>
<span>this function doesn&rsquo;t create a new jQuery object that can then have other methods</span>
<span>appended to it, or that can then be further filtered.</span>
<br/>
<span>Instead it returns just</span>
<span>true</span>
<span>or</span>
<span>false</span>
<span>, making the method most suitable for using in</span>
<span>conditional statements.</span>
<span>&nbsp;Example 21-24</span>
<span>&nbsp;uses the</span>
<span>is</span>
<span>method attached to a call to</span>
<span>parent</span>
<span>in an event handler for a set of buttons. When any button is clicked, the han‐</span>
<span>dler is called, and the</span>
<span>is</span>
<span>method is able to return a value of</span>
<span>true</span>
<span>or</span>
<span>false</span>
<span>, when</span>
<span>asked whether the parent element is a</span>
<span>&lt;div&gt;</span>
<span>, as shown in</span>
<span>Figure 21-22</span>
<span>.</span>
<br/>
<span>Example 21-24. Reporting the parent element with is</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Using is&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div&gt;&lt;button&gt;Button in a div&lt;/button&gt;&lt;/div&gt;
        &lt;div&gt;&lt;button&gt;Button in a div&lt;/button&gt;&lt;/div&gt;
        &lt;span&gt;&lt;button&gt;Button in a span&lt;/button&gt;&lt;/span&gt;
        &lt;div&gt;&lt;button&gt;Button in a div&lt;/button&gt;&lt;/div&gt;
        &lt;span&gt;&lt;button&gt;Button in a span&lt;/button&gt;&lt;/span&gt;
        &lt;p id='info'&gt;&lt;/p&gt;
        &lt;script&gt;
            $('button').click(function()
            {
                var elem = ''
                if ($(this).parent().is('div')) elem = 'div'
                else elem = 'span'
                    $('#info').html('You clicked a ' + elem)
            })
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<p><img src="images/21.22.png"/></p>
<span>Figure 21-22. Using the is method to report the parent element</span>
<h3>Using jQuery Without Selectors</h3>
<span>There are also a couple of jQuery methods that are for use with standard JavaScript</span>
<span>objects, and which make handling them a lot simpler. These are</span>
<span>$.each</span>
<span>, and</span>
<span>$.map</span>
<span>,</span>
<span>which are similar but have subtle differences.</span>
<h4>The $.each Method</h4>
<span>Using</span>
<span>$.each</span>
<span>, you can iterate through arrays or array-like objects by simply attaching</span>
<span>a function to be called for each iteration.</span>
<span>Example 21-25</span>
<span>shows an array of pet names</span>
<span>and types (called</span>
<span>pets</span>
<span>), from which another array (called</span>
<span>guineapigs</span>
<span>) needs to be</span>
<span>extracted, containing only the names of the guinea pigs.</span>
<br/>
<span>Example 21-25. Calling the each method</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Using each&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id='info'&gt;&lt;/div&gt;
        &lt;script&gt;
            pets =
            {
                Scratchy : 'Guinea Pig',
                Squeeky : 'Guinea Pig',
                Fluffy : 'Rabbit',
                Thumper : 'Rabbit',
                Snoopy : 'Dog',
                Tiddles : 'Cat'
            }

            guineapigs = []
            $.each(pets, function(name, type){
                if (type == 'Guinea Pig') guineapigs.push(name)
            })

            $('#info').html('The guinea pig names are: ' + guineapigs.join(' &amp; '))
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>To do this, the</span>
<span>$.each</span>
<span>method is passed the array, along with an anonymous function</span>
<span>to process it. The function takes two arguments, the index into the array (called</span>
<span>name</span>
<span>), and the contents of each element (called</span>
<span>type</span>
<span>).</span>
<br/>
<span>The value in</span>
<span>typ</span>
<span>e is then tested to see if it is</span>
<span>Guinea Pig</span>
<span>, and if so, the value in</span>
<span>name</span>
<span>is pushed onto the</span>
<span>guineapigs</span>
<span>array. Upon completion, the contents of</span>
<span>guineapigs</span>
<span>is</span>
<span>displayed by writing into the</span>
<span>&lt;div&gt;</span>
<span>element with the ID of</span>
<span>info</span>
<span>. To separate the</span>
<span>items in the array, the JavaScript</span>
<span>join</span>
<span>method is used with the</span>
<span>&amp;</span>
<span>symbol as a</span>
<span>separator. The result of loading this example into a browser is simply to display the</span>
<span>text &ldquo;The guinea pig names are: Scratchy &amp; Squeeky.&rdquo;</span>
<h4>The $.map Method</h4>
<span>Another way to achieve this is with the</span>
<span>$.map</span>
<span>method, which returns all the values</span>
<span>that your function returns in an array, saving you from having to create an array, and</span>
<span>then push matches onto it&mdash;as we had to in the preceding example.</span>
<span>Instead you can create and populate the array at the same time, by assigning the array</span>
<span>returned by</span>
<span>$.map</span>
<span>to it, like this (the end result being the same but with less code):</span>
<pre>
<code class="javascript">
guineapigs = $.map(pets, function(type, name){
    if (type == 'Guinea Pig') return name
})
</code>
</pre>
<span>Watch out when you change between using the</span>
<span>$.each</span>
<span>and</span>
<span>$.map</span>
<span>methods, because</span>
<span>$.each</span>
<span>passes arguments to the function in the</span>
<span>order</span>
<span>index</span>
<span>,</span>
<span>value</span>
<span>, but map uses the order</span>
<span>value</span>
<span>,</span>
<span>index</span>
<span>. This is why</span>
<span>the two arguments are swapped in the preceding</span>
<span>$.map</span>
<span>example.</span>
<h3>Using Ajax</h3>
<span>In</span>
<span>Chapter 17</span>
<span>, I showed in detail how to implement Ajax communications between</span>
<span>JavaScript in a browser, and PHP running on a web server. I also provided some</span>
<span>handy and compact functions you can call to simplify the process.</span>
<br/>
<span>But if you have jQuery loaded, you can use its Ajax functionality instead if you prefer</span>
<span>&mdash;</span>
<span>it works in a very similar way, in that you choose whether to make a Post or a Get</span>
<span>request, and then take it from there.</span>
<h4>Using the Post Method</h4>
<span>Example 21-26</span>
<span>&nbsp;is the direct jQuery equivalent to</span>
<span>&nbsp;Example 17-2</span>
<span>&nbsp;(which loads the</span>
<span>Amazon Mobile website into a</span>
<span>&lt;div&gt;</span>
<span>element), but since all the Ajax-handling code is</span>
<span>tidied away in the jQuery library file, it&rsquo;s much shorter&mdash;using just a single call to the</span>
<span>$.post</span>
<span>method, passing it the following three items:</span>
<br/>
<span>&bull;</span>
<span>The URL of a PHP program on the server to access.</span>
<br/>
<span>&bull;</span>
<span>The data to pass to that URL.</span>
<br/>
<span>&bull;</span>
<span>An anonymous function to process the returned data.</span>
<br/>
<span>Example 21-26. Sending a Post Ajax request</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt; &lt;!-- jqueryajaxpost.htm --&gt;
    &lt;head&gt;
        &lt;title&gt;jQuery Ajax Post&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body style='text-align:center'&gt;
        &lt;h1&gt;Loading a web page into a DIV&lt;/h1&gt;
        &lt;div id='info'&gt;This sentence will be replaced&lt;/div&gt;
        &lt;script&gt;
            $.post('urlpost.php', { url : 'amazon.com/gp/aw' }, function(data){
                $('#info').html(data)
            } )
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>The</span>
<span>urlpost.php</span>
<span>program remains unchanged from</span>
<span>Example 17-3</span>
<span>, because this exam‐</span>
<span>ple and</span>
<span>Example 17-2</span>
<span>are interchangeable.</span>
<h4>Using the Get Method</h4>
<span>Communicating with Ajax by using the Get method is just as easy, requiring only the</span>
<span>following two arguments&mdash;so</span>
<span>&nbsp;Example 21-27</span>
<span>&nbsp;is therefore the jQuery equivalent to</span>
<span>Example 17-4</span>
<span>:</span>
<br/>
<span>&bull;</span>
<span>The URL of a PHP program on the server to access (including a query string</span>
<span>containing the data to pass to it)</span>
<br/>
<span>&bull;</span>
<span>An anonymous function to process the returned data</span>
<br/>
<span>Example 21-27. Sending a Get Ajax request</span>
<pre>
<code class="javascript">
&lt;!DOCTYPE html&gt;
&lt;html&gt; &lt;!-- jqueryajaxget.htm --&gt;
    &lt;head&gt;
        &lt;title&gt;jQuery Ajax Get&lt;/title&gt;
        &lt;script src='jquery-1.11.1.min.js'&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body style='text-align:center'&gt;
        &lt;h1&gt;Loading a web page into a DIV&lt;/h1&gt;
        &lt;div id='info'&gt;This sentence will be replaced&lt;/div&gt;
        &lt;script&gt;
            $.get('urlget.php?url=amazon.com/gp/aw', function(data){
                $('#info').html(data)
            } )
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code>
</pre>
<span>The</span>
<span>urlget.php</span>
<span>program remains unchanged from</span>
<span>Example 17-5</span>
<span>, because this exam‐</span>
<span>ple and</span>
<span>Example 17-4</span>
<span>are interchangeable.</span>
<br/>
<span>Remember that the security restrictions of Ajax require that the</span>
<span>communication takes place with the same server that supplied the</span>
<span>main web document. You must also use a web server for Ajax com‐</span>
<span>munication, not a local file system. These examples are therefore</span>
<span>best tested using a production or development server, as described</span>
<span>in</span>
<span>Chapter 2</span>
<span>.</span>
<h3>Plug-Ins</h3>
<span>There&rsquo;s room in this chapter to cover only the core jQuery library, and while that&rsquo;s</span>
<span>more than enough for a beginner to be getting on with, the time will come when</span>
<span>you&rsquo;ll find you need even more features and functionality. Thankfully, other jQuery</span>
<span>projects can help you there, because a range of official and third-party plug-ins are</span>
<span>now available to provide just about any features you can imagine.</span>
<h4>The jQuery User Interface</h4>
<span>First, there&rsquo;s the jQuery User Interface (known as jQuery UI), which takes off directly</span>
<span>where jQuery leaves off. With it you can add dragging and dropping, resizing, and</span>
<span>sorting methods to your web pages, as well as more animations and effects, animated</span>
<span>color transitions, more easing effects, and a bunch of widgets to create menus and</span>
<span>other features such as accordions, buttons, pickers, progress bars, sliders, spinners,</span>
<span>tabs, tool tips, and much more.</span>
<br/>
<span>If you want to see some demos before deciding whether to download, check out</span>
<span>jqueryui.com/demos</span>
<span>.</span>
<br/>
<span>The whole package is under 400 KB zipped and is freely downloadable and usable</span>
<span>with almost no restrictions (just the very generous MIT license), from</span>
<span>jqueryui.com</span>
<span>.</span>
<h4>Other Plug-Ins</h4>
<span>You can also add a wide variety of free, ready-made plug-ins to jQuery from numer‐</span>
<span>ous developers, all brought together at</span>
<span>plugins.jquery.com</span>
<span>.</span>
<br/>
<span>Some of the plug-ins include extensive form handling and verification, slideshows,</span>
<span>user responsiveness, image manipulation, even more animations, and much more.</span>
<h4>jQuery Mobile</h4>
<span>If you are developing for mobile browsers, you will also want to take a look at jQuery</span>
<span>mobile, which is more of a framework than a library, offering sophisticated, touch-</span>
<span>optimized ways to navigate the wide range of different types of mobile hard and soft‐</span>
<span>ware, to provide the best possible user experience.</span>
<br/>
<span>The jQuery Mobile download is fully customizable and can be tailored exactly to your</span>
<span>requirements, as shown in</span>
<span>Figure 21-23</span>
<span>, where the ThemeRoller app is being used.</span>
<p><img src="images/21.23.png"/></p>
<span>Figure 21-23. Creating a mobile theme with the ThemeRoller app</span>
<span>You&rsquo;ll find jQuery mobile especially useful if you are writing web apps, and can find</span>
<span>out more and download it from</span>
<span>jquerymobile.com</span>
<span>.</span>
<br/>
<span>You&rsquo;ve come a long way in this chapter, learning material that sometimes takes up</span>
<span>entire books. I hope you&rsquo;ve found everything clear, though, because jQuery is very</span>
<span>easy to learn and use. Please take a moment now to peruse</span>
<span>Appendix E</span>
<span>, which lists all</span>
<span>the main jQuery objects, events, and methods, and should serve as a handy reference.</span>
<span>If you need any other information, please check out</span>
<span>jquery.com</span>
<span>.</span>
<br/>
<span>For the remaining chapters, we&rsquo;ll turn our gaze to all the new goodies available in</span>
<span>HTML5, and then bring everything we&rsquo;ve learned together into a mini social net‐</span>
<span>working project.</span>