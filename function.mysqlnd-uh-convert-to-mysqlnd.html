---
layout: default
---

 <div class="refnamediv">
  <h1 class="refname">mysqlnd_uh_convert_to_mysqlnd</h1>
  <p class="verinfo">(PECL mysqlnd-uh &gt;= 1.0.0-alpha)</p><p class="refpurpose"><span class="refname">mysqlnd_uh_convert_to_mysqlnd</span> &#x2014; <span class="dc-title">Converts a MySQL connection handle into a mysqlnd connection handle</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.mysqlnd-uh-convert-to-mysqlnd-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> 
   <span class="methodname"><strong>mysqlnd_uh_convert_to_mysqlnd</strong></span>
    ( <span class="methodparam"><span class="type"><a href="class.mysqli.html" class="type mysqli">mysqli</a></span> <code class="parameter reference">&amp;$mysql_connection</code></span>
   )</div>

  <p class="para rdfs-comment">
   Converts a MySQL connection handle into a mysqlnd connection handle.
   After conversion you can execute mysqlnd library calls on the connection handle.
   This can be used to access mysqlnd functionality not made available
   through user space API calls.
  </p>
  <p class="para">
   The function can be disabled with
   <em><a href="mysqlnd-uh.configuration.html#ini.mysqlnd-uh.enable" class="link">mysqlnd_uh.enable</a></em>.
   If <em><a href="mysqlnd-uh.configuration.html#ini.mysqlnd-uh.enable" class="link">mysqlnd_uh.enable</a></em>
   is set to <strong><code>FALSE</code></strong> the function will not install the proxy and
   always return <strong><code>TRUE</code></strong>. Additionally, an error of the
   type <em>E_WARNING</em> may be emitted. The error message may
   read like <em>PHP Warning:  mysqlnd_uh_convert_to_mysqlnd(): (Mysqlnd User Handler)
   The plugin has been disabled by setting the configuration parameter mysqlnd_uh.enable = false.
   You are not allowed to call this function [...]</em>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mysqlnd-uh-convert-to-mysqlnd-parameters">
  <h3 class="title">Parameters</h3>
  <dl>

   
    <dt>
<code class="parameter">MySQL connection handle</code></dt>

    <dd>

     <p class="para">
      A MySQL connection handle of type mysql, mysqli or PDO_MySQL.
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mysqlnd-uh-convert-to-mysqlnd-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   A mysqlnd connection handle.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.mysqlnd-uh-convert-to-mysqlnd-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.4.0</td>
       <td>
        The <code class="parameter">mysql_connection</code> parameter can now be of type
        <em>mysql</em>, <em>PDO_MySQL</em>, or <em>mysqli</em>.
        Before, only the <em>mysqli</em> type was allowed.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mysqlnd-uh-convert-to-mysqlnd-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2173">
    <p><strong>Example #1 <span class="function"><strong>mysqlnd_uh_convert_to_mysqlnd()</strong></span> example</strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&#xA0;PDO&#xA0;user&#xA0;API&#xA0;gives&#xA0;no&#xA0;access&#xA0;to&#xA0;connection&#xA0;thread&#xA0;id&#xA0;*/<br></span><span style="color: #0000BB">$mysql_connection&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;mysql:host=localhost;dbname=test&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;root&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Convert&#xA0;PDO&#xA0;MySQL&#xA0;handle&#xA0;to&#xA0;mysqlnd&#xA0;handle&#xA0;*/<br></span><span style="color: #0000BB">$mysqlnd&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">mysqlnd_uh_convert_to_mysqlnd</span><span style="color: #007700">(</span><span style="color: #0000BB">$mysql_connection</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Create&#xA0;Proxy&#xA0;to&#xA0;call&#xA0;mysqlnd&#xA0;connection&#xA0;class&#xA0;methods&#xA0;*/<br></span><span style="color: #0000BB">$obj&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">MySQLndUHConnection</span><span style="color: #007700">();<br></span><span style="color: #FF8000">/*&#xA0;Call&#xA0;mysqlnd_conn::get_thread_id&#xA0;*/<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getThreadId</span><span style="color: #007700">(</span><span style="color: #0000BB">$mysqlnd</span><span style="color: #007700">));<br><br></span><span style="color: #FF8000">/*&#xA0;Use&#xA0;SQL&#xA0;to&#xA0;fetch&#xA0;connection&#xA0;thread&#xA0;id&#xA0;*/<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$mysql_connection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;SELECT&#xA0;CONNECTION_ID()&quot;</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">());<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
int(27054)
array(1) {
  [0]=&gt;
  array(2) {
    [&quot;CONNECTION_ID()&quot;]=&gt;
    string(5) &quot;27054&quot;
    [0]=&gt;
    string(5) &quot;27054&quot;
  }
}
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mysqlnd-uh-convert-to-mysqlnd-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member">
     <em><a href="mysqlnd-uh.configuration.html#ini.mysqlnd-uh.enable" class="link">mysqlnd_uh.enable</a></em>
    </li>
   </ul>
  </p>
 </div>


