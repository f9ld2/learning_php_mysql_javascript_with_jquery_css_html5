---
layout: default
---

  <h2 class="title">Basic usage</h2>
  <p class="para">
   This simple example shows how to connect, query, print
   resulting principals and disconnect from a KADM5 database.
   <div class="example" id="example-666">
    <p><strong>Example #1 KADM5 extension overview example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>&#xA0;&#xA0;$handle&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">kadm5_init_with_password</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;afs-1&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;GONICUS.LOCAL&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;admin/admin&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;password&quot;</span><span style="color: #007700">);<br><br>&#xA0;&#xA0;print&#xA0;</span><span style="color: #DD0000">&quot;&lt;h1&gt;get_principals&lt;/h1&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;</span><span style="color: #0000BB">$principals&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">kadm5_get_principals</span><span style="color: #007700">(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">);<br>&#xA0;&#xA0;for(&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$principals</span><span style="color: #007700">);&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;print&#xA0;</span><span style="color: #DD0000">&quot;</span><span style="color: #0000BB">$principals</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]</span><span style="color: #DD0000">&lt;br&gt;\n&quot;</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;print&#xA0;</span><span style="color: #DD0000">&quot;&lt;h1&gt;get_policies&lt;/h1&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;</span><span style="color: #0000BB">$policies&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">kadm5_get_policies</span><span style="color: #007700">(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">);<br>&#xA0;&#xA0;for(&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$policies</span><span style="color: #007700">);&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;print&#xA0;</span><span style="color: #DD0000">&quot;</span><span style="color: #0000BB">$policies</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]</span><span style="color: #DD0000">&lt;br&gt;\n&quot;</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;print&#xA0;</span><span style="color: #DD0000">&quot;&lt;h1&gt;get_principal&#xA0;burbach@GONICUS.LOCAL&lt;/h1&gt;\n&quot;</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;</span><span style="color: #0000BB">$options&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">kadm5_get_principal</span><span style="color: #007700">(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;burbach@GONICUS.LOCAL&quot;&#xA0;</span><span style="color: #007700">);<br>&#xA0;&#xA0;</span><span style="color: #0000BB">$keys&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br>&#xA0;&#xA0;for(&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$keys</span><span style="color: #007700">);&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$value&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #0000BB">$keys</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]];<br>&#xA0;&#xA0;&#xA0;&#xA0;print&#xA0;</span><span style="color: #DD0000">&quot;</span><span style="color: #0000BB">$keys</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]</span><span style="color: #DD0000">:&#xA0;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;}<br><br>&#xA0;&#xA0;</span><span style="color: #0000BB">$options&#xA0;</span><span style="color: #007700">=&#xA0;array(</span><span style="color: #0000BB">KADM5_PRINC_EXPIRE_TIME&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br>&#xA0;&#xA0;</span><span style="color: #0000BB">kadm5_modify_principal</span><span style="color: #007700">(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;burbach@GONICUS.LOCAL&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br><br>&#xA0;&#xA0;</span><span style="color: #0000BB">kadm5_destroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 