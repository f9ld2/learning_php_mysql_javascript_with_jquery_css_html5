---
layout: default
---

  <h2 class="title">Character sets</h2>

  <p class="para">
   Ideally a proper character set will be set at the server level, and doing this is described
   within the <a href="http://dev.mysql.com/doc/mysql/en/charset-configuration.html" class="link external">&#xBB;&#xA0;Character Set Configuration</a>
   section of the MySQL Server manual. Alternatively, each MySQL API offers a method to set 
   the character set at runtime.
  </p>

  <div class="caution"><strong class="caution">Caution</strong>
   <h1 class="title">The character set and character escaping</h1>
   <p class="para">
    The character set should be understood and defined, as it has an affect on every
    action, and includes security implications. For example, the escaping mechanism
    (e.g., <span class="function"><a href="mysqli.real-escape-string.html" class="function">mysqli_real_escape_string()</a></span> for mysqli, <span class="function"><a href="function.mysql-real-escape-string.html" class="function">mysql_real_escape_string()</a></span>
    for mysql, and <span class="methodname"><a href="pdo.quote.html" class="methodname">PDO::quote()</a></span> for PDO_MySQL) will adhere to
    this setting. It is important to realize that these functions will not use the character
    set that is defined with a query, so for example the following will not have an effect
    on them:
   </p>
  </div>

  <div class="example" id="example-1787">
   <p><strong>Example #1 Problems with setting the character set with SQL</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$mysqli&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;localhost&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;my_user&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;my_password&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;world&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Will&#xA0;NOT&#xA0;affect&#xA0;$mysqli-&gt;real_escape_string();<br></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;SET&#xA0;NAMES&#xA0;utf8&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Will&#xA0;NOT&#xA0;affect&#xA0;$mysqli-&gt;real_escape_string();<br></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;SET&#xA0;CHARACTER&#xA0;SET&#xA0;utf8&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;But,&#xA0;this&#xA0;will&#xA0;affect&#xA0;$mysqli-&gt;real_escape_string();<br></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_charset</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;utf8&apos;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;But,&#xA0;this&#xA0;will&#xA0;NOT&#xA0;affect&#xA0;it&#xA0;(utf-8&#xA0;vs&#xA0;utf8)&#xA0;--&#xA0;don&apos;t&#xA0;use&#xA0;dashes&#xA0;here<br></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_charset</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;utf-8&apos;</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <p class="para">
   Below are examples that demonstrate how to properly alter the character set at runtime
   using each API.
  </p>
  
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <strong>Possible UTF-8 confusion</strong><br>
   </p><p class="para">
    Because character set names in MySQL do not contain dashes, the string 
    &quot;utf8&quot; is valid in MySQL to set the character set to UTF-8. The string 
    &quot;utf-8&quot; is not valid, as using &quot;utf-8&quot; will fail to change the
    character set.
   </p>
  <p></p></blockquote>

  <div class="example" id="example-1788">
   <p><strong>Example #2 Setting the character set example: mysqli</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$mysqli&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;localhost&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;my_user&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;my_password&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;world&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Initial&#xA0;character&#xA0;set:&#xA0;%s\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">character_set_name</span><span style="color: #007700">());<br><br>if&#xA0;(!</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set_charset</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;utf8&apos;</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Error&#xA0;loading&#xA0;character&#xA0;set&#xA0;utf8:&#xA0;%s\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">error</span><span style="color: #007700">);<br>&#xA0;&#xA0;&#xA0;&#xA0;exit;<br>}<br><br>echo&#xA0;</span><span style="color: #DD0000">&quot;New&#xA0;character&#xA0;set&#xA0;information:\n&quot;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(&#xA0;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get_charset</span><span style="color: #007700">()&#xA0;);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <div class="example" id="example-1789">
   <p><strong>Example #3 Setting the character set example: <a href="ref.pdo-mysql.connection.html" class="link">pdo_mysql</a></strong></p>
   <div class="example-contents"><p>
    Note: This only works as of PHP 5.3.6.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$pdo&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;mysql:host=localhost;dbname=world;charset=utf8&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;my_user&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;my_pass&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <div class="example" id="example-1790">
   <p><strong>Example #4 Setting the character set example: mysql</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;localhost&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;my_user&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;my_pass&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$db&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;world&quot;</span><span style="color: #007700">);<br><br>echo&#xA0;</span><span style="color: #DD0000">&apos;Initial&#xA0;character&#xA0;set:&#xA0;&apos;&#xA0;</span><span style="color: #007700">.&#xA0;&#xA0;</span><span style="color: #0000BB">mysql_client_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br><br>if&#xA0;(!</span><span style="color: #0000BB">mysql_set_charset</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;utf8&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$conn</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Error:&#xA0;Unable&#xA0;to&#xA0;set&#xA0;the&#xA0;character&#xA0;set.\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;exit;<br>}<br><br>echo&#xA0;</span><span style="color: #DD0000">&apos;Your&#xA0;current&#xA0;character&#xA0;set&#xA0;is:&#xA0;&apos;&#xA0;</span><span style="color: #007700">.&#xA0;&#xA0;</span><span style="color: #0000BB">mysql_client_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>  
 