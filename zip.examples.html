---
layout: default
---

 <h1>Examples</h1>

 <div class="example" id="example-839">
  <p><strong>Example #1 Create a Zip archive</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$zip&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">ZipArchive</span><span style="color: #007700">();<br></span><span style="color: #0000BB">$filename&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&quot;./test112.zip&quot;</span><span style="color: #007700">;<br><br>if&#xA0;(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">ZipArchive</span><span style="color: #007700">::</span><span style="color: #0000BB">CREATE</span><span style="color: #007700">)!==</span><span style="color: #0000BB">TRUE</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;exit(</span><span style="color: #DD0000">&quot;cannot&#xA0;open&#xA0;&lt;</span><span style="color: #0000BB">$filename</span><span style="color: #DD0000">&gt;\n&quot;</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFromString</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;testfilephp.txt&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">time</span><span style="color: #007700">(),&#xA0;</span><span style="color: #DD0000">&quot;#1&#xA0;This&#xA0;is&#xA0;a&#xA0;test&#xA0;string&#xA0;added&#xA0;as&#xA0;testfilephp.txt.\n&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFromString</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;testfilephp2.txt&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">time</span><span style="color: #007700">(),&#xA0;</span><span style="color: #DD0000">&quot;#2&#xA0;This&#xA0;is&#xA0;a&#xA0;test&#xA0;string&#xA0;added&#xA0;as&#xA0;testfilephp2.txt.\n&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFile</span><span style="color: #007700">(</span><span style="color: #0000BB">$thisdir&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;/too.php&quot;</span><span style="color: #007700">,</span><span style="color: #DD0000">&quot;/testfromfile.php&quot;</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;numfiles:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numFiles&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br>echo&#xA0;</span><span style="color: #DD0000">&quot;status:&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">status&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

 </div>
 <div class="example" id="example-840">
  <p><strong>Example #2 Dump the archive details and listing</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$za&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">ZipArchive</span><span style="color: #007700">();<br><br></span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;test_with_comment.zip&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$za</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$za</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;numFiles:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numFiles&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br>echo&#xA0;</span><span style="color: #DD0000">&quot;status:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">status&#xA0;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br>echo&#xA0;</span><span style="color: #DD0000">&quot;statusSys:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">statusSys&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br>echo&#xA0;</span><span style="color: #DD0000">&quot;filename:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">filename&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br>echo&#xA0;</span><span style="color: #DD0000">&quot;comment:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">comment&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br><br>for&#xA0;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numFiles</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;index:&#xA0;</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">statIndex</span><span style="color: #007700">(</span><span style="color: #0000BB">$i</span><span style="color: #007700">));<br>}<br>echo&#xA0;</span><span style="color: #DD0000">&quot;numFile:&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numFiles&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

 </div>
 <div class="example" id="example-841">
  <p><strong>Example #3 Zip stream wrapper, read an OpenOffice meta info</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$reader&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">XMLReader</span><span style="color: #007700">();<br><br></span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;zip://&apos;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&apos;/test.odt#meta.xml&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$odt_meta&#xA0;</span><span style="color: #007700">=&#xA0;array();<br>while&#xA0;(</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">read</span><span style="color: #007700">())&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nodeType&#xA0;</span><span style="color: #007700">==&#xA0;</span><span style="color: #0000BB">XMLREADER</span><span style="color: #007700">::</span><span style="color: #0000BB">ELEMENT</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$elm&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;else&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nodeType&#xA0;</span><span style="color: #007700">==&#xA0;</span><span style="color: #0000BB">XMLREADER</span><span style="color: #007700">::</span><span style="color: #0000BB">END_ELEMENT&#xA0;</span><span style="color: #007700">&amp;&amp;&#xA0;</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&#xA0;</span><span style="color: #007700">==&#xA0;</span><span style="color: #DD0000">&apos;office:meta&apos;</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;break;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(!</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;continue;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$odt_meta</span><span style="color: #007700">[</span><span style="color: #0000BB">$elm</span><span style="color: #007700">]&#xA0;=&#xA0;</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;}<br>}<br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$odt_meta</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

 </div>
 <p class="para">
  This example uses the old API (PHP 4), it opens a ZIP file
  archive, reads each file in the archive and prints out its
  contents. The <var class="filename">test2.zip</var> archive used in this
  example is one of the test archives in the ZZIPlib source
  distribution.
 </p>
 <div class="example" id="example-842">
  <p><strong>Example #4 Zip Usage Example</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$zip&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">zip_open</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;/tmp/test2.zip&quot;</span><span style="color: #007700">);<br><br>if&#xA0;(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;while&#xA0;(</span><span style="color: #0000BB">$zip_entry&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">zip_read</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Name:&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">zip_entry_name</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Actual&#xA0;Filesize:&#xA0;&#xA0;&#xA0;&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">zip_entry_filesize</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Compressed&#xA0;Size:&#xA0;&#xA0;&#xA0;&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">zip_entry_compressedsize</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Compression&#xA0;Method:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">zip_entry_compressionmethod</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(</span><span style="color: #0000BB">zip_entry_open</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;r&quot;</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;File&#xA0;Contents:\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$buf&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">zip_entry_read</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">zip_entry_filesize</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">));<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;</span><span style="color: #0000BB">$buf</span><span style="color: #DD0000">\n&quot;</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">zip_entry_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;&#xA0;&#xA0;}<br><br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">zip_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">);<br><br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

 </div>
