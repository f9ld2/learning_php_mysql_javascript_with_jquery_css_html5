---
layout: default
---

 <div class="refnamediv">
  <h1 class="refname">Memcached::getServerByKey</h1>
  <p class="verinfo">(PECL memcached &gt;= 0.1.0)</p><p class="refpurpose"><span class="refname">Memcached::getServerByKey</span> &#x2014; <span class="dc-title">Map a key to a server</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-memcached.getserverbykey-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><strong>Memcached::getServerByKey</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$server_key</code></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>Memcached::getServerByKey()</strong></span> returns the server that
   would be selected by a particular <code class="parameter">server_key</code> in all
   the <span class="function"><strong>Memcached::*ByKey()</strong></span> operations.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-memcached.getserverbykey-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">server_key</code></dt>

     <dd>

      <p class="para">
       The key identifying the server to store the value on or retrieve it from. Instead of hashing on the actual key for the item, we hash on the server key when deciding which memcached server to talk to. This allows related items to be grouped together on a single server for efficiency with multi operations.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-memcached.getserverbykey-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array containing three keys of <em>host</em>,
   <em>port</em>, and <em>weight</em> on success or <strong><code>FALSE</code></strong>
   on failure.
   Use <span class="methodname"><a href="memcached.getresultcode.html" class="methodname">Memcached::getResultCode()</a></span> if necessary.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-memcached.getserverbykey-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-5000">
    <p><strong>Example #1 <span class="function"><strong>Memcached::getServerByKey()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$m&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">Memcached</span><span style="color: #007700">();<br></span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addServers</span><span style="color: #007700">(array(<br>&#xA0;&#xA0;&#xA0;&#xA0;array(</span><span style="color: #DD0000">&apos;mem1.domain.com&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">11211</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">40</span><span style="color: #007700">),<br>&#xA0;&#xA0;&#xA0;&#xA0;array(</span><span style="color: #DD0000">&apos;mem2.domain.com&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">11211</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">40</span><span style="color: #007700">),<br>&#xA0;&#xA0;&#xA0;&#xA0;array(</span><span style="color: #DD0000">&apos;mem3.domain.com&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">11211</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">20</span><span style="color: #007700">),<br>));<br><br></span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setOption</span><span style="color: #007700">(</span><span style="color: #0000BB">Memcached</span><span style="color: #007700">::</span><span style="color: #0000BB">OPT_LIBKETAMA_COMPATIBLE</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getServerByKey</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;user&apos;</span><span style="color: #007700">));<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getServerByKey</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;log&apos;</span><span style="color: #007700">));<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getServerByKey</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;ip&apos;</span><span style="color: #007700">));<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(3) {
  [&quot;host&quot;]=&gt;
  string(15) &quot;mem3.domain.com&quot;
  [&quot;port&quot;]=&gt;
  int(11211)
  [&quot;weight&quot;]=&gt;
  int(20)
}
array(3) {
  [&quot;host&quot;]=&gt;
  string(15) &quot;mem2.domain.com&quot;
  [&quot;port&quot;]=&gt;
  int(11211)
  [&quot;weight&quot;]=&gt;
  int(40)
}
array(3) {
  [&quot;host&quot;]=&gt;
  string(15) &quot;mem2.domain.com&quot;
  [&quot;port&quot;]=&gt;
  int(11211)
  [&quot;weight&quot;]=&gt;
  int(40)
}
</pre></div>
    </div>
   </div>
  </p>
 </div>


