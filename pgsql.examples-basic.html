---
layout: default
---

  <h2 class="title">Basic usage</h2>
  <p class="para">
   This simple example shows how to connect, execute a query, print
   resulting rows and disconnect from a PostgreSQL database.
   <div class="example" id="example-2286">
    <p><strong>Example #1 PostgreSQL extension overview example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&#xA0;Connecting,&#xA0;selecting&#xA0;database<br></span><span style="color: #0000BB">$dbconn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">pg_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;host=localhost&#xA0;dbname=publishing&#xA0;user=www&#xA0;password=foo&quot;</span><span style="color: #007700">)<br>&#xA0;&#xA0;&#xA0;&#xA0;or&#xA0;die(</span><span style="color: #DD0000">&apos;Could&#xA0;not&#xA0;connect:&#xA0;&apos;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">pg_last_error</span><span style="color: #007700">());<br><br></span><span style="color: #FF8000">//&#xA0;Performing&#xA0;SQL&#xA0;query<br></span><span style="color: #0000BB">$query&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;*&#xA0;FROM&#xA0;authors&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$result&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">pg_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$query</span><span style="color: #007700">)&#xA0;or&#xA0;die(</span><span style="color: #DD0000">&apos;Query&#xA0;failed:&#xA0;&apos;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">pg_last_error</span><span style="color: #007700">());<br><br></span><span style="color: #FF8000">//&#xA0;Printing&#xA0;results&#xA0;in&#xA0;HTML<br></span><span style="color: #007700">echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;table&gt;\n&quot;</span><span style="color: #007700">;<br>while&#xA0;(</span><span style="color: #0000BB">$line&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">pg_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">null</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">PGSQL_ASSOC</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;\t&lt;tr&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;foreach&#xA0;(</span><span style="color: #0000BB">$line&#xA0;</span><span style="color: #007700">as&#xA0;</span><span style="color: #0000BB">$col_value</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;\t\t&lt;td&gt;</span><span style="color: #0000BB">$col_value</span><span style="color: #DD0000">&lt;/td&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;}<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;\t&lt;/tr&gt;\n&quot;</span><span style="color: #007700">;<br>}<br>echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;/table&gt;\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&#xA0;Free&#xA0;resultset<br></span><span style="color: #0000BB">pg_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Closing&#xA0;connection<br></span><span style="color: #0000BB">pg_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$dbconn</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 