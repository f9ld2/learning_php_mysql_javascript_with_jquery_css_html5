---
layout: default
---

 <div class="refnamediv">
  <h1 class="refname">pcntl_signal</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.1.0, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">pcntl_signal</span> &#x2014; <span class="dc-title">Installs a signal handler</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.pcntl-signal-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>pcntl_signal</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$signo</code></span>
   , <span class="methodparam"><span class="type"><span class="type callable|int">callable|int</span></span> <code class="parameter">$handler</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$restart_syscalls</code><span class="initializer"> = true</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   The <span class="function"><strong>pcntl_signal()</strong></span> function installs a new
   signal handler or replaces the current signal handler for the signal indicated by <code class="parameter">signo</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.pcntl-signal-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">signo</code></dt>

     <dd>

      <p class="para">
       The signal number.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">handler</code></dt>

     <dd>

      <p class="para">
       The signal handler. This may be either a <span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span>, which
       will be invoked to handle the signal, or either of the two global
       constants <strong><code>SIG_IGN</code></strong> or <strong><code>SIG_DFL</code></strong>,
       which will ignore the signal or restore the default signal handler
       respectively. 
      </p>
      <p class="para">
       If a <span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> is given, it must implement the following
       signature:
      </p>
      <p class="para">
       <div class="methodsynopsis dc-description">
        <span class="type"><span class="type void">void</span></span> <span class="methodname"><span class="replaceable">handler</span></span>
         ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$signo</code></span>
        , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$signinfo</code></span>
        )</div>

       <dl>

        
         <dt>
<code class="parameter">signo</code></dt>

         <dd>

          <span class="simpara">
           The signal being handled.
          </span>
         </dd>

        
        
         <dt>
<code class="parameter">siginfo</code></dt>

         <dd>

          <span class="simpara">
           If operating systems supports siginfo_t structures, this will be an array of signal information dependent on the signal.
          </span>
         </dd>

        
       </dl>

      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       </p><p class="para">
        Note that when you set a handler to an object method, that object&apos;s
        reference count is increased which makes it persist until you either
        change the handler to something else, or your script ends.
       </p>
      </blockquote></dd></dl></p>
     

    
    
     <dt>
<code class="parameter">restart_syscalls</code></dt>

     <dd>

      <p class="para">
       Specifies whether system call restarting should be used when this
       signal arrives.
      </p>
     </dd>

    
   

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.pcntl-signal-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.pcntl-signal-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.3.0</td>
       <td>
        As of PHP 4.3.0 PCNTL uses ticks as the signal handle callback
        mechanism, which is much faster than the previous mechanism. This
        change follows the same semantics as using
        &quot;<a href="control-structures.declare.html#control-structures.declare.ticks" class="link">user ticks</a>&quot;.
        You must use the <a href="control-structures.declare.html" class="link">declare()</a> statement to
        specify the locations in your program where callbacks are allowed to
        occur for the signal handler to function properly (as used in the
        example below).
       </td>
      </tr>

      <tr>
       <td>7.1.0</td>
       <td>
        As of PHP 7.1.0 the handler callback is given a second argument
        containing the signinfo of the specific signal.  This data is only
        supplied if the operating system has the signinfo_t structure.
        If the OS does not implement siginfo_t NULL is supplied.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.pcntl-signal-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4193">
    <p><strong>Example #1 <span class="function"><strong>pcntl_signal()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&#xA0;tick&#xA0;use&#xA0;required&#xA0;as&#xA0;of&#xA0;PHP&#xA0;4.3.0<br></span><span style="color: #007700">declare(</span><span style="color: #0000BB">ticks&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;signal&#xA0;handler&#xA0;function<br></span><span style="color: #007700">function&#xA0;</span><span style="color: #0000BB">sig_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$signo</span><span style="color: #007700">)<br>{<br><br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;switch&#xA0;(</span><span style="color: #0000BB">$signo</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;case&#xA0;</span><span style="color: #0000BB">SIGTERM</span><span style="color: #007700">:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;handle&#xA0;shutdown&#xA0;tasks<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">exit;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;break;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;case&#xA0;</span><span style="color: #0000BB">SIGHUP</span><span style="color: #007700">:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;handle&#xA0;restart&#xA0;tasks<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">break;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;case&#xA0;</span><span style="color: #0000BB">SIGUSR1</span><span style="color: #007700">:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Caught&#xA0;SIGUSR1...\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;break;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;default:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;handle&#xA0;all&#xA0;other&#xA0;signals<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">}<br><br>}<br><br>echo&#xA0;</span><span style="color: #DD0000">&quot;Installing&#xA0;signal&#xA0;handler...\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&#xA0;setup&#xA0;signal&#xA0;handlers<br></span><span style="color: #0000BB">pcntl_signal</span><span style="color: #007700">(</span><span style="color: #0000BB">SIGTERM</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;sig_handler&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">pcntl_signal</span><span style="color: #007700">(</span><span style="color: #0000BB">SIGHUP</span><span style="color: #007700">,&#xA0;&#xA0;</span><span style="color: #DD0000">&quot;sig_handler&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">pcntl_signal</span><span style="color: #007700">(</span><span style="color: #0000BB">SIGUSR1</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;sig_handler&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;or&#xA0;use&#xA0;an&#xA0;object,&#xA0;available&#xA0;as&#xA0;of&#xA0;PHP&#xA0;4.3.0<br>//&#xA0;pcntl_signal(SIGUSR1,&#xA0;array($obj,&#xA0;&quot;do_something&quot;));<br><br></span><span style="color: #007700">echo</span><span style="color: #DD0000">&quot;Generating&#xA0;signal&#xA0;SIGUSR1&#xA0;to&#xA0;self...\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&#xA0;send&#xA0;SIGUSR1&#xA0;to&#xA0;current&#xA0;process&#xA0;id<br>//&#xA0;posix_*&#xA0;functions&#xA0;require&#xA0;the&#xA0;posix&#xA0;extension<br></span><span style="color: #0000BB">posix_kill</span><span style="color: #007700">(</span><span style="color: #0000BB">posix_getpid</span><span style="color: #007700">(),&#xA0;</span><span style="color: #0000BB">SIGUSR1</span><span style="color: #007700">);<br><br>echo&#xA0;</span><span style="color: #DD0000">&quot;Done\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.pcntl-signal-notes">
  <h3 class="title">Notes</h3>
  <p class="para">
   <span class="function"><strong>pcntl_signal()</strong></span> doesn&apos;t stack the signal handlers, but replaces them.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.pcntl-signal-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.pcntl-fork.html" class="function" rel="rdfs-seeAlso">pcntl_fork()</a> - Forks the currently running process</span></li>
    <li class="member"><span class="function"><a href="function.pcntl-waitpid.html" class="function" rel="rdfs-seeAlso">pcntl_waitpid()</a> - Waits on or returns the status of a forked child</span></li>
   </ul>
  </p>
 </div>


