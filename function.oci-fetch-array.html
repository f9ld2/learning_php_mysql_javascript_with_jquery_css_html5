---
layout: default
---

 <div class="refnamediv">
  <h1 class="refname">oci_fetch_array</h1>
  <p class="verinfo">(PHP 5, PHP 7, PECL OCI8 &gt;= 1.1.0)</p><p class="refpurpose"><span class="refname">oci_fetch_array</span> &#x2014; <span class="dc-title">Returns the next row from a query as an associative or numeric array
  </span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.oci-fetch-array-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>oci_fetch_array</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$statement</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   Returns an array containing the next result-set row of a query.
   Each array entry corresponds to a column of the row.  This function
   is typically called in a loop until it returns <strong><code>FALSE</code></strong>, indicating
   no more rows exist.
  </p>
  <p class="para">
   If <code class="parameter">statement</code> corresponds to a PL/SQL block
   returning Oracle Database 12c Implicit Result Sets, then rows from
   all sets are consecutively fetched. If
   <code class="parameter">statement</code> is returned
   by <span class="function"><a href="function.oci-get-implicit-resultset.html" class="function">oci_get_implicit_resultset()</a></span>, then only the
   subset of rows for one child query are returned.
  </p>
  <p class="para">For details on the data type mapping performed by
the OCI8 extension, see the <a href="oci8.datatypes.html" class="link">datatypes
supported by the driver</a></p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.oci-fetch-array-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">statement</code></dt>

     <dd>

       <p class="para">A valid OCI8 statement
identifier created by <span class="function"><a href="function.oci-parse.html" class="function">oci_parse()</a></span> and executed
by <span class="function"><a href="function.oci-execute.html" class="function">oci_execute()</a></span>, or a <em>REF
CURSOR</em> statement identifier.</p>
       <p class="para">
        Can also be a statement identifier returned by <span class="function"><a href="function.oci-get-implicit-resultset.html" class="function">oci_get_implicit_resultset()</a></span>.
       </p>
     </dd>

    
    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">
       An optional second parameter can be any combination of the following
       constants:
       <table class="doctable table">
        <caption><strong><span class="function"><strong>oci_fetch_array()</strong></span> Modes</strong></caption>
        
         <thead>
          <tr>
           <th>Constant</th>
           <th>Description</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td><strong><code>OCI_BOTH</code></strong></td>
           <td>Returns an array with both associative and numeric
            indices. This is the same
            as <strong><code>OCI_ASSOC</code></strong>
            + <strong><code>OCI_NUM</code></strong> and is the default
            behavior.</td>
          </tr>

          <tr>
           <td><strong><code>OCI_ASSOC</code></strong></td>
           <td>Returns an associative array.</td>
          </tr>

          <tr>
           <td><strong><code>OCI_NUM</code></strong></td>
           <td>Returns a numeric array.</td>
          </tr>

          <tr>
           <td><strong><code>OCI_RETURN_NULLS</code></strong></td>
           <td>Creates elements for <strong><code>NULL</code></strong> fields.  The element
             values will be a PHP <strong><code>NULL</code></strong>.
           </td>
          </tr>

          <tr>
           <td><strong><code>OCI_RETURN_LOBS</code></strong></td>
           <td>Returns the contents of LOBs instead of the LOB
             descriptors.</td>
          </tr>

         </tbody>
        
       </table>

      </p>
      <p class="para">
       The default <code class="parameter">mode</code> is <strong><code>OCI_BOTH</code></strong>.
      </p>
      <p class="para">
       Use the addition operator &quot;+&quot; to specify more than
       one mode at a time.
      </p>
     </dd>

    
   </dl>


  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.oci-fetch-array-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array with associative and/or numeric indices. If there
   are no more rows in the <code class="parameter">statement</code> then
   <strong><code>FALSE</code></strong> is returned.
  </p>
  <p class="para">
    By default, <em>LOB</em> columns are returned as LOB descriptors.
  </p>
  <p class="para">
   <em>DATE</em> columns are returned as strings formatted
   to the current date format.  The default format can be changed with
   Oracle environment variables such as <em>NLS_LANG</em> or
   by a previously executed <em>ALTER SESSION SET
   NLS_DATE_FORMAT</em> command.
  </p>
  <p class="para">
   Oracle&apos;s default, non-case sensitive column names will have
   uppercase associative indices in the result array.  Case-sensitive
   column names will have array indices using the exact column case.
   Use <span class="function"><a href="function.var-dump.html" class="function">var_dump()</a></span> on the result array to verify the
   appropriate case to use for each query. 
  </p>
  <p class="para">
   The table name is not included in the array index.  If your query
   contains two different columns with the same name,
   use <strong><code>OCI_NUM</code></strong> or add a column alias to the query
   to ensure name uniqueness, see example #7. Otherwise only one
   column will be returned via PHP.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.oci-fetch-array-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2227">
    <p><strong>Example #1 <span class="function"><strong>oci_fetch_array()</strong></span> with <strong><code>OCI_BOTH</code></strong></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;department_id,&#xA0;department_name&#xA0;FROM&#xA0;departments&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br>while&#xA0;((</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_BOTH</span><span style="color: #007700">))&#xA0;!=&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;Use&#xA0;the&#xA0;uppercase&#xA0;column&#xA0;names&#xA0;for&#xA0;the&#xA0;associative&#xA0;array&#xA0;indices<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;and&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;DEPARTMENT_ID&apos;</span><span style="color: #007700">]&#xA0;&#xA0;&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;are&#xA0;the&#xA0;same&lt;br&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;and&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;DEPARTMENT_NAME&apos;</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;are&#xA0;the&#xA0;same&lt;br&gt;\n&quot;</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2228">
    <p><strong>Example #2 <span class="function"><strong>oci_fetch_array()</strong></span> with <strong><code>OCI_NUM</code></strong></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">/*<br>&#xA0;&#xA0;Before&#xA0;running,&#xA0;create&#xA0;the&#xA0;table:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CREATE&#xA0;TABLE&#xA0;mytab&#xA0;(id&#xA0;NUMBER,&#xA0;description&#xA0;CLOB);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INSERT&#xA0;INTO&#xA0;mytab&#xA0;(id,&#xA0;description)&#xA0;values&#xA0;(1,&#xA0;&apos;A&#xA0;very&#xA0;long&#xA0;string&apos;);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;COMMIT;<br>*/<br><br></span><span style="color: #0000BB">$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;id,&#xA0;description&#xA0;FROM&#xA0;mytab&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br>while&#xA0;((</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_NUM</span><span style="color: #007700">))&#xA0;!=&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">read</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;this&#xA0;will&#xA0;output&#xA0;first&#xA0;11&#xA0;bytes&#xA0;from&#xA0;DESCRIPTION<br></span><span style="color: #007700">}<br><br></span><span style="color: #FF8000">//&#xA0;Output&#xA0;is:<br>//&#xA0;&#xA0;&#xA0;&#xA0;1<br>//&#xA0;&#xA0;&#xA0;&#xA0;A&#xA0;very&#xA0;long<br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2229">
    <p><strong>Example #3 <span class="function"><strong>oci_fetch_array()</strong></span> with <strong><code>OCI_ASSOC</code></strong></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">/*<br>&#xA0;&#xA0;Before&#xA0;running,&#xA0;create&#xA0;the&#xA0;table:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CREATE&#xA0;TABLE&#xA0;mytab&#xA0;(id&#xA0;NUMBER,&#xA0;description&#xA0;CLOB);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INSERT&#xA0;INTO&#xA0;mytab&#xA0;(id,&#xA0;description)&#xA0;values&#xA0;(1,&#xA0;&apos;A&#xA0;very&#xA0;long&#xA0;string&apos;);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;COMMIT;<br>*/<br><br></span><span style="color: #0000BB">$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;id,&#xA0;description&#xA0;FROM&#xA0;mytab&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br>while&#xA0;((</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">))&#xA0;!=&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;ID&apos;</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;DESCRIPTION&apos;</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">read</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;this&#xA0;will&#xA0;output&#xA0;first&#xA0;11&#xA0;bytes&#xA0;from&#xA0;DESCRIPTION<br></span><span style="color: #007700">}<br><br></span><span style="color: #FF8000">//&#xA0;Output&#xA0;is:<br>//&#xA0;&#xA0;&#xA0;&#xA0;1<br>//&#xA0;&#xA0;&#xA0;&#xA0;A&#xA0;very&#xA0;long<br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2230">
    <p><strong>Example #4 <span class="function"><strong>oci_fetch_array()</strong></span> with <strong><code>OCI_RETURN_NULLS</code></strong></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;1,&#xA0;null&#xA0;FROM&#xA0;dual&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br>while&#xA0;((</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array&#xA0;</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">))&#xA0;!=&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&#xA0;{&#xA0;</span><span style="color: #FF8000">//&#xA0;Ignore&#xA0;NULLs<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #FF8000">/*<br>The&#xA0;above&#xA0;code&#xA0;prints:<br>&#xA0;&#xA0;array(1)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;[1]=&gt;<br>&#xA0;&#xA0;&#xA0;&#xA0;string(1)&#xA0;&quot;1&quot;<br>&#xA0;&#xA0;}<br>*/<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;1,&#xA0;null&#xA0;FROM&#xA0;dual&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br>while&#xA0;((</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array&#xA0;</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">))&#xA0;!=&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&#xA0;{&#xA0;</span><span style="color: #FF8000">//&#xA0;Fetch&#xA0;NULLs<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #FF8000">/*<br>The&#xA0;above&#xA0;code&#xA0;prints:<br>&#xA0;&#xA0;array(2)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;[1]=&gt;<br>&#xA0;&#xA0;&#xA0;&#xA0;string(1)&#xA0;&quot;1&quot;<br>&#xA0;&#xA0;&#xA0;&#xA0;[&quot;NULL&quot;]=&gt;<br>&#xA0;&#xA0;&#xA0;&#xA0;NULL<br>&#xA0;&#xA0;}<br>*/<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2231">
    <p><strong>Example #5 <span class="function"><strong>oci_fetch_array()</strong></span> with <strong><code>OCI_RETURN_LOBS</code></strong></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">/*<br>&#xA0;&#xA0;Before&#xA0;running,&#xA0;create&#xA0;the&#xA0;table:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CREATE&#xA0;TABLE&#xA0;mytab&#xA0;(id&#xA0;NUMBER,&#xA0;description&#xA0;CLOB);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INSERT&#xA0;INTO&#xA0;mytab&#xA0;(id,&#xA0;description)&#xA0;values&#xA0;(1,&#xA0;&apos;A&#xA0;very&#xA0;long&#xA0;string&apos;);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;COMMIT;<br>*/<br><br></span><span style="color: #0000BB">$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;id,&#xA0;description&#xA0;FROM&#xA0;mytab&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br>while&#xA0;((</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_LOBS</span><span style="color: #007700">))&#xA0;!=&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;ID&apos;</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;DESCRIPTION&apos;</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;this&#xA0;contains&#xA0;all&#xA0;of&#xA0;DESCRIPTION<br>&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;In&#xA0;a&#xA0;loop,&#xA0;freeing&#xA0;the&#xA0;large&#xA0;variable&#xA0;before&#xA0;the&#xA0;2nd&#xA0;fetch&#xA0;reduces&#xA0;PHP&apos;s&#xA0;peak&#xA0;memory&#xA0;usage<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">unset(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);&#xA0;<br>}<br><br></span><span style="color: #FF8000">//&#xA0;Output&#xA0;is:<br>//&#xA0;&#xA0;&#xA0;&#xA0;1<br>//&#xA0;&#xA0;&#xA0;&#xA0;A&#xA0;very&#xA0;long&#xA0;string<br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2232">
    <p><strong>Example #6 <span class="function"><strong>oci_fetch_array()</strong></span> with case sensitive column names</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">/*<br>&#xA0;&#xA0;&#xA0;Before&#xA0;running,&#xA0;create&#xA0;the&#xA0;table:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CREATE&#xA0;TABLE&#xA0;mytab&#xA0;(&quot;Name&quot;&#xA0;VARCHAR2(20),&#xA0;city&#xA0;VARCHAR2(20));<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INSERT&#xA0;INTO&#xA0;mytab&#xA0;(&quot;Name&quot;,&#xA0;city)&#xA0;values&#xA0;(&apos;Chris&apos;,&#xA0;&apos;Melbourne&apos;);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;COMMIT;<br>*/<br><br></span><span style="color: #0000BB">$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;select&#xA0;*&#xA0;from&#xA0;mytab&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Because&#xA0;&apos;Name&apos;&#xA0;was&#xA0;created&#xA0;as&#xA0;a&#xA0;case-sensitive&#xA0;column,&#xA0;that&#xA0;same<br>//&#xA0;case&#xA0;is&#xA0;used&#xA0;for&#xA0;the&#xA0;array&#xA0;index.&#xA0;&#xA0;However&#xA0;uppercase&#xA0;&apos;CITY&apos;&#xA0;must<br>//&#xA0;be&#xA0;used&#xA0;for&#xA0;the&#xA0;case-insensitive&#xA0;column&#xA0;index<br></span><span style="color: #007700">print&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;Name&apos;</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;&#xA0;prints&#xA0;Chris<br></span><span style="color: #007700">print&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;CITY&apos;</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;&#xA0;prints&#xA0;Melbourne<br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2233">
    <p><strong>Example #7 <span class="function"><strong>oci_fetch_array()</strong></span> with columns having duplicate names</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">/*<br>&#xA0;&#xA0;Before&#xA0;running,&#xA0;create&#xA0;the&#xA0;tables:<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CREATE&#xA0;TABLE&#xA0;mycity&#xA0;(id&#xA0;NUMBER,&#xA0;name&#xA0;VARCHAR2(20));<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INSERT&#xA0;INTO&#xA0;mycity&#xA0;(id,&#xA0;name)&#xA0;values&#xA0;(1,&#xA0;&apos;Melbourne&apos;);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CREATE&#xA0;TABLE&#xA0;mycountry&#xA0;(id&#xA0;NUMBER,&#xA0;name&#xA0;VARCHAR2(20));<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;INSERT&#xA0;INTO&#xA0;mycountry&#xA0;(id,&#xA0;name)&#xA0;values&#xA0;(1,&#xA0;&apos;Australia&apos;);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;COMMIT;<br>*/<br><br></span><span style="color: #0000BB">$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$sql&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;mycity.name,&#xA0;mycountry.name<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;FROM&#xA0;mycity,&#xA0;mycountry<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WHERE&#xA0;mycity.id&#xA0;=&#xA0;mycountry.id&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Output&#xA0;only&#xA0;contains&#xA0;one&#xA0;&quot;NAME&quot;&#xA0;entry:<br>//&#xA0;&#xA0;&#xA0;&#xA0;array(1)&#xA0;{<br>//&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;[&quot;NAME&quot;]=&gt;<br>//&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;string(9)&#xA0;&quot;Australia&quot;<br>//&#xA0;&#xA0;&#xA0;&#xA0;}<br><br>//&#xA0;To&#xA0;query&#xA0;a&#xA0;repeated&#xA0;column&#xA0;name,&#xA0;use&#xA0;an&#xA0;SQL&#xA0;column&#xA0;alias&#xA0;like&#xA0;&quot;AS&#xA0;ctnm&quot;:<br></span><span style="color: #0000BB">$sql&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;mycity.name&#xA0;AS&#xA0;ctnm,&#xA0;mycountry.name&#xA0;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;FROM&#xA0;mycity,&#xA0;mycountry&#xA0;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WHERE&#xA0;mycity.id&#xA0;=&#xA0;mycountry.id&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Output&#xA0;now&#xA0;contains&#xA0;both&#xA0;columns&#xA0;selected:<br>//&#xA0;&#xA0;&#xA0;&#xA0;array(2)&#xA0;{<br>//&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;[&quot;CTNM&quot;]=&gt;<br>//&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;string(9)&#xA0;&quot;Melbourne&quot;<br>//&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;[&quot;NAME&quot;]=&gt;<br>//&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;string(9)&#xA0;&quot;Australia&quot;<br>//&#xA0;&#xA0;&#xA0;&#xA0;}<br><br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2234">
    <p><strong>Example #8 <span class="function"><strong>oci_fetch_array()</strong></span> with <em>DATE</em> columns</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #FF8000">//&#xA0;Set&#xA0;the&#xA0;date&#xA0;format&#xA0;for&#xA0;this&#xA0;connection.<br>//&#xA0;For&#xA0;performance&#xA0;reasons,&#xA0;consider&#xA0;changing&#xA0;the&#xA0;format<br>//&#xA0;in&#xA0;a&#xA0;trigger&#xA0;or&#xA0;with&#xA0;environment&#xA0;variables&#xA0;instead<br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;ALTER&#xA0;SESSION&#xA0;SET&#xA0;NLS_DATE_FORMAT&#xA0;=&#xA0;&apos;YYYY-MM-DD&apos;&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;hire_date&#xA0;FROM&#xA0;employees&#xA0;WHERE&#xA0;employee_id&#xA0;=&#xA0;188&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;HIRE_DATE&apos;</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;prints&#xA0;1997-06-14<br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2235">
    <p><strong>Example #9 <span class="function"><strong>oci_fetch_array()</strong></span> with <em>REF CURSOR</em></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*<br>&#xA0;&#xA0;Create&#xA0;the&#xA0;PL/SQL&#xA0;stored&#xA0;procedure&#xA0;as:<br><br>&#xA0;&#xA0;CREATE&#xA0;OR&#xA0;REPLACE&#xA0;PROCEDURE&#xA0;myproc(p1&#xA0;OUT&#xA0;SYS_REFCURSOR)&#xA0;AS<br>&#xA0;&#xA0;BEGIN<br>&#xA0;&#xA0;&#xA0;&#xA0;OPEN&#xA0;p1&#xA0;FOR&#xA0;SELECT&#xA0;*&#xA0;FROM&#xA0;all_objects&#xA0;WHERE&#xA0;ROWNUM&#xA0;&lt;&#xA0;5000;<br>&#xA0;&#xA0;END;<br>*/<br><br></span><span style="color: #0000BB">$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;BEGIN&#xA0;myproc(:rc);&#xA0;END;&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$refcur&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_new_cursor</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_bind_by_name</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;:rc&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$refcur</span><span style="color: #007700">,&#xA0;-</span><span style="color: #0000BB">1</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_B_CURSOR</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Execute&#xA0;the&#xA0;returned&#xA0;REF&#xA0;CURSOR&#xA0;and&#xA0;fetch&#xA0;from&#xA0;it&#xA0;like&#xA0;a&#xA0;statement&#xA0;identifier<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$refcur</span><span style="color: #007700">);&#xA0;&#xA0;<br>echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;table&#xA0;border=&apos;1&apos;&gt;\n&quot;</span><span style="color: #007700">;<br>while&#xA0;((</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$refcur</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">))&#xA0;!=&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;tr&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;foreach&#xA0;(</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">as&#xA0;</span><span style="color: #0000BB">$item</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;&#xA0;&#xA0;&#xA0;&lt;td&gt;&quot;</span><span style="color: #007700">.(</span><span style="color: #0000BB">$item&#xA0;</span><span style="color: #007700">!==&#xA0;</span><span style="color: #0000BB">null&#xA0;</span><span style="color: #007700">?&#xA0;</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">)&#xA0;:&#xA0;</span><span style="color: #DD0000">&quot;&amp;nbsp;&quot;</span><span style="color: #007700">).</span><span style="color: #DD0000">&quot;&lt;/td&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;}<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;/tr&gt;\n&quot;</span><span style="color: #007700">;<br>}<br>echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;/table&gt;\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$refcur</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2236">
    <p><strong>Example #10 Pagination with <span class="function"><strong>oci_fetch_array()</strong></span> using a <em>LIMIT</em>-like query</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/XE&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #FF8000">//&#xA0;Find&#xA0;the&#xA0;version&#xA0;of&#xA0;the&#xA0;database<br></span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;/Release&#xA0;([0-9]+)\./&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">oci_server_version</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$oracleversion&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br><br></span><span style="color: #FF8000">//&#xA0;This&#xA0;is&#xA0;the&#xA0;query&#xA0;you&#xA0;want&#xA0;to&#xA0;&quot;page&quot;&#xA0;through<br></span><span style="color: #0000BB">$sql&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;SELECT&#xA0;city,&#xA0;postal_code&#xA0;FROM&#xA0;locations&#xA0;ORDER&#xA0;BY&#xA0;city&apos;</span><span style="color: #007700">;<br><br>if&#xA0;(</span><span style="color: #0000BB">$oracleversion&#xA0;</span><span style="color: #007700">&gt;=&#xA0;</span><span style="color: #0000BB">12</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;Make&#xA0;use&#xA0;of&#xA0;Oracle&#xA0;12c&#xA0;OFFSET&#xA0;/&#xA0;FETCH&#xA0;NEXT&#xA0;syntax<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$sql&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$sql&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&apos;&#xA0;OFFSET&#xA0;:offset&#xA0;ROWS&#xA0;FETCH&#xA0;NEXT&#xA0;:numrows&#xA0;ROWS&#xA0;ONLY&apos;</span><span style="color: #007700">;<br>}&#xA0;else&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;Older&#xA0;Oracle&#xA0;versions&#xA0;need&#xA0;a&#xA0;nested&#xA0;query&#xA0;selecting&#xA0;a&#xA0;subset<br>&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;from&#xA0;$sql.&#xA0;&#xA0;Or,&#xA0;if&#xA0;the&#xA0;SQL&#xA0;statement&#xA0;is&#xA0;known&#xA0;at&#xA0;development<br>&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;time,&#xA0;consider&#xA0;using&#xA0;a&#xA0;row_number()&#xA0;function&#xA0;instead&#xA0;of&#xA0;this<br>&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;nested&#xA0;solution.&#xA0;&#xA0;In&#xA0;production&#xA0;environments,&#xA0;be&#xA0;careful&#xA0;to<br>&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;avoid&#xA0;SQL&#xA0;Injection&#xA0;issues&#xA0;with&#xA0;concatenation.<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$sql&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&quot;SELECT&#xA0;*&#xA0;FROM&#xA0;(SELECT&#xA0;a.*,&#xA0;ROWNUM&#xA0;AS&#xA0;my_rnum<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;FROM&#xA0;(</span><span style="color: #0000BB">$sql</span><span style="color: #DD0000">)&#xA0;a<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WHERE&#xA0;ROWNUM&#xA0;&lt;=&#xA0;:offset&#xA0;+&#xA0;:numrows)<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;WHERE&#xA0;my_rnum&#xA0;&gt;&#xA0;:offset&quot;</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #0000BB">$offset&#xA0;&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;skip&#xA0;this&#xA0;many&#xA0;rows<br></span><span style="color: #0000BB">$numrows&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">5</span><span style="color: #007700">;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;return&#xA0;5&#xA0;rows<br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_bind_by_name</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;:numrows&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$numrows</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_bind_by_name</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;:offset&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$offset</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br>while&#xA0;((</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC&#xA0;</span><span style="color: #007700">+&#xA0;</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">))&#xA0;!=&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;CITY&apos;</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;POSTAL_CODE&apos;</span><span style="color: #007700">]&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&lt;br&gt;\n&quot;</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">//&#xA0;Output&#xA0;is:<br>//&#xA0;&#xA0;&#xA0;&#xA0;Beijing&#xA0;190518<br>//&#xA0;&#xA0;&#xA0;&#xA0;Bern&#xA0;3095<br>//&#xA0;&#xA0;&#xA0;&#xA0;Bombay&#xA0;490231<br>//&#xA0;&#xA0;&#xA0;&#xA0;Geneva&#xA0;1730<br>//&#xA0;&#xA0;&#xA0;&#xA0;Hiroshima&#xA0;6823<br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2237">
    <p><strong>Example #11 <span class="function"><strong>oci_fetch_array()</strong></span> with Oracle Database 12<em class="emphasis">c</em> Implicit Result Sets</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$conn&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;hr&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;welcome&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;localhost/pdborcl&apos;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$e&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;message&apos;</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #FF8000">//&#xA0;Requires&#xA0;OCI8&#xA0;2.0&#xA0;and&#xA0;Oracle&#xA0;Database&#xA0;12c<br>//&#xA0;Also&#xA0;see&#xA0;oci_get_implicit_resultset()<br></span><span style="color: #0000BB">$sql&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;DECLARE<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;c1&#xA0;SYS_REFCURSOR;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;BEGIN<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;OPEN&#xA0;c1&#xA0;FOR&#xA0;SELECT&#xA0;city,&#xA0;postal_code&#xA0;FROM&#xA0;locations&#xA0;WHERE&#xA0;ROWNUM&#xA0;&lt;&#xA0;4&#xA0;ORDER&#xA0;BY&#xA0;city;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DBMS_SQL.RETURN_RESULT(c1);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;OPEN&#xA0;c1&#xA0;FOR&#xA0;SELECT&#xA0;country_id&#xA0;FROM&#xA0;locations&#xA0;WHERE&#xA0;ROWNUM&#xA0;&lt;&#xA0;4&#xA0;ORDER&#xA0;BY&#xA0;city;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;DBMS_SQL.RETURN_RESULT(c1);<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;END;&apos;</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$stid&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Note:&#xA0;oci_fetch_all&#xA0;and&#xA0;oci_fetch()&#xA0;cannot&#xA0;be&#xA0;used&#xA0;in&#xA0;this&#xA0;manner<br></span><span style="color: #007700">echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;table&gt;\n&quot;</span><span style="color: #007700">;<br>while&#xA0;((</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">))&#xA0;!=&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;tr&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;foreach&#xA0;(</span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">as&#xA0;</span><span style="color: #0000BB">$item</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;&#xA0;&lt;td&gt;&quot;</span><span style="color: #007700">.(</span><span style="color: #0000BB">$item</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">?</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">|</span><span style="color: #0000BB">ENT_SUBSTITUTE</span><span style="color: #007700">):</span><span style="color: #DD0000">&quot;&amp;nbsp;&quot;</span><span style="color: #007700">).</span><span style="color: #DD0000">&quot;&lt;/td&gt;\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;}<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;/tr&gt;\n&quot;</span><span style="color: #007700">;<br>}<br>echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;/table&gt;\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&#xA0;Output&#xA0;is:<br>//&#xA0;&#xA0;&#xA0;&#xA0;Beijing&#xA0;190518<br>//&#xA0;&#xA0;&#xA0;&#xA0;Bern&#xA0;&#xA0;&#xA0;&#xA0;3095<br>//&#xA0;&#xA0;&#xA0;&#xA0;Bombay&#xA0;&#xA0;490231<br>//&#xA0;&#xA0;&#xA0;&#xA0;CN<br>//&#xA0;&#xA0;&#xA0;&#xA0;CH<br>//&#xA0;&#xA0;&#xA0;&#xA0;IN<br><br></span><span style="color: #0000BB">oci_free_statement</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.oci-fetch-array-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Associative array indices need to be in uppercase for standard
    Oracle columns that were created with case insensitive names.
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">For
queries returning a large number of rows, performance can be
significantly improved by
increasing <a href="oci8.configuration.html#ini.oci8.default-prefetch" class="link">oci8.default_prefetch</a>
or using <span class="function"><a href="function.oci-set-prefetch.html" class="function">oci_set_prefetch()</a></span>.
</p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    The function <span class="function"><strong>oci_fetch_array()</strong></span>
    is <em class="emphasis">insignificantly</em> slower than
    <span class="function"><a href="function.oci-fetch-assoc.html" class="function">oci_fetch_assoc()</a></span>
    or <span class="function"><a href="function.oci-fetch-row.html" class="function">oci_fetch_row()</a></span>, but is more flexible.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.oci-fetch-array-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.oci-fetch.html" class="function" rel="rdfs-seeAlso">oci_fetch()</a> - Fetches the next row from a query into internal buffers</span></li>
    <li class="member"><span class="function"><a href="function.oci-fetch-all.html" class="function" rel="rdfs-seeAlso">oci_fetch_all()</a> - Fetches multiple rows from a query into a two-dimensional array</span></li>
    <li class="member"><span class="function"><a href="function.oci-fetch-assoc.html" class="function" rel="rdfs-seeAlso">oci_fetch_assoc()</a> - Returns the next row from a query as an associative array</span></li>
    <li class="member"><span class="function"><a href="function.oci-fetch-object.html" class="function" rel="rdfs-seeAlso">oci_fetch_object()</a> - Returns the next row from a query as an object</span></li>
    <li class="member"><span class="function"><a href="function.oci-fetch-row.html" class="function" rel="rdfs-seeAlso">oci_fetch_row()</a> - Returns the next row from a query as a numeric array</span></li>
    <li class="member"><span class="function"><a href="function.oci-set-prefetch.html" class="function" rel="rdfs-seeAlso">oci_set_prefetch()</a> - Sets number of rows to be prefetched by queries</span></li>
   </ul>
  </p>
 </div>


