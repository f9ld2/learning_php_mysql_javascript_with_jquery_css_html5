---
layout: default
---

 <div class="refnamediv">
  <h1 class="refname">EvTimer::__construct</h1>
  <p class="verinfo">(PECL ev &gt;= 0.2.0)</p><p class="refpurpose"><span class="refname">EvTimer::__construct</span> &#x2014; <span class="dc-title">Constructs an EvTimer watcher object</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-evtimer.construct-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="methodname"><strong>EvTimer::__construct</strong></span>
    ( <span class="methodparam">
    <span class="type">double</span>
     <code class="parameter">$after</code>
   </span>
   , <span class="methodparam">
    <span class="type">double</span>
     <code class="parameter">$repeat</code>
   </span>
   , <span class="methodparam">
    <span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span>
     <code class="parameter">$callback</code>
   </span>
   [, <span class="methodparam">
    <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span>
     <code class="parameter">$data</code>
    <span class="initializer"> = <strong><code>NULL</code></strong></span>
   </span>
   [, <span class="methodparam">
    <span class="type">int</span>
     <code class="parameter">$priority</code>
    <span class="initializer"> = 0</span>
   </span>
  ]] )</div>

  <p class="para rdfs-comment">
   Constructs an EvTimer watcher object.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-evtimer.construct-parameters">
  <h3 class="title">Parameters</h3>
  <dl>

   
    <dt>

     <code class="parameter">after</code>
    </dt>

    <dd>

     <p class="para">
      Configures the timer to trigger after
      <code class="parameter">after</code>
      seconds.
     </p>
    </dd>

   
   
    <dt>

     <code class="parameter">repeat</code>
    </dt>

    <dd>

     <p class="para">
      If repeat is
      <strong><code>0.0</code></strong>
      , then it will automatically be stopped once the timeout is reached. If
      it is positive, then the timer will automatically be configured to
      trigger again every repeat seconds later, until stopped manually.
     </p>
    </dd>

   
   
    <dt>

     <code class="parameter">callback</code>
    </dt>

    <dd>

     <p class="para">
      See
      <a href="ev.watcher-callbacks.html" class="link">Watcher callbacks</a>
      .
     </p>
    </dd>

   
   
    <dt>

     <code class="parameter">data</code>
    </dt>

    <dd>

     <p class="para">
      Custom data associated with the watcher.
     </p>
    </dd>

   
   
    <dt>

     <code class="parameter">priority</code>
    </dt>

    <dd>

     <p class="para">
      <a href="class.ev.html#ev.constants.watcher-pri" class="link">Watcher priority</a>
     </p>
    </dd>

   
  </dl>

 </div>

 <div class="refsect1 returnvalues" id="refsect1-evtimer.construct-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns EvTimer object on success.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-evtimer.construct-examples">
  <h3 class="title">Examples</h3>
 <div class="example" id="example-4180">
   <p><strong>Example #1 Simple timers</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&#xA0;Create&#xA0;and&#xA0;start&#xA0;timer&#xA0;firing&#xA0;after&#xA0;2&#xA0;seconds<br></span><span style="color: #0000BB">$w1&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">EvTimer</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&#xA0;function&#xA0;()&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;2&#xA0;seconds&#xA0;elapsed\n&quot;</span><span style="color: #007700">;<br>});<br><br></span><span style="color: #FF8000">//&#xA0;Create&#xA0;and&#xA0;launch&#xA0;timer&#xA0;firing&#xA0;after&#xA0;2&#xA0;seconds&#xA0;repeating&#xA0;each&#xA0;second<br>//&#xA0;until&#xA0;we&#xA0;manually&#xA0;stop&#xA0;it<br></span><span style="color: #0000BB">$w2&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">EvTimer</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&#xA0;function&#xA0;(</span><span style="color: #0000BB">$w</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;is&#xA0;called&#xA0;every&#xA0;second,&#xA0;is&#xA0;launched&#xA0;after&#xA0;2&#xA0;seconds\n&quot;</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;iteration&#xA0;=&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">iteration</span><span style="color: #007700">(),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;Stop&#xA0;the&#xA0;watcher&#xA0;after&#xA0;5&#xA0;iterations<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">iteration</span><span style="color: #007700">()&#xA0;==&#xA0;</span><span style="color: #0000BB">5&#xA0;</span><span style="color: #007700">and&#xA0;</span><span style="color: #0000BB">$w</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stop</span><span style="color: #007700">();<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;Stop&#xA0;the&#xA0;watcher&#xA0;if&#xA0;further&#xA0;calls&#xA0;cause&#xA0;more&#xA0;than&#xA0;10&#xA0;iterations<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">iteration</span><span style="color: #007700">()&#xA0;&gt;=&#xA0;</span><span style="color: #0000BB">10&#xA0;</span><span style="color: #007700">and&#xA0;</span><span style="color: #0000BB">$w</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stop</span><span style="color: #007700">();<br>});<br><br></span><span style="color: #FF8000">//&#xA0;Create&#xA0;stopped&#xA0;timer.&#xA0;It&#xA0;will&#xA0;be&#xA0;inactive&#xA0;until&#xA0;we&#xA0;start&#xA0;it&#xA0;ourselves<br></span><span style="color: #0000BB">$w_stopped&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">EvTimer</span><span style="color: #007700">::</span><span style="color: #0000BB">createStopped</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&#xA0;function(</span><span style="color: #0000BB">$w</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Callback&#xA0;of&#xA0;a&#xA0;timer&#xA0;created&#xA0;as&#xA0;stopped\n&quot;</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;Stop&#xA0;the&#xA0;watcher&#xA0;after&#xA0;2&#xA0;iterations<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">iteration</span><span style="color: #007700">()&#xA0;&gt;=&#xA0;</span><span style="color: #0000BB">2&#xA0;</span><span style="color: #007700">and&#xA0;</span><span style="color: #0000BB">$w</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">stop</span><span style="color: #007700">();<br>});<br><br></span><span style="color: #FF8000">//&#xA0;Loop&#xA0;until&#xA0;Ev::stop()&#xA0;is&#xA0;called&#xA0;or&#xA0;all&#xA0;of&#xA0;watchers&#xA0;stop<br></span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">run</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&#xA0;Start&#xA0;and&#xA0;look&#xA0;if&#xA0;it&#xA0;works<br></span><span style="color: #0000BB">$w_stopped</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">start</span><span style="color: #007700">();<br>echo&#xA0;</span><span style="color: #DD0000">&quot;Run&#xA0;single&#xA0;iteration\n&quot;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">run</span><span style="color: #007700">(</span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">RUN_ONCE</span><span style="color: #007700">);<br><br>echo&#xA0;</span><span style="color: #DD0000">&quot;Restart&#xA0;the&#xA0;second&#xA0;watcher&#xA0;and&#xA0;try&#xA0;to&#xA0;handle&#xA0;the&#xA0;same&#xA0;events,&#xA0;but&#xA0;don&apos;t&#xA0;block\n&quot;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$w2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">again</span><span style="color: #007700">();<br></span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">run</span><span style="color: #007700">(</span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">RUN_NOWAIT</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$w&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">EvTimer</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&#xA0;function()&#xA0;{});<br>echo&#xA0;</span><span style="color: #DD0000">&quot;Running&#xA0;a&#xA0;blocking&#xA0;loop\n&quot;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">Ev</span><span style="color: #007700">::</span><span style="color: #0000BB">run</span><span style="color: #007700">();<br>echo&#xA0;</span><span style="color: #DD0000">&quot;END\n&quot;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  <div class="example-contents"><p>The above example will output
something similar to:</p></div>
  <div class="example-contents screen">
<div class="cdata"><pre>
2 seconds elapsed
is called every second, is launched after 2 seconds
iteration = 1
is called every second, is launched after 2 seconds
iteration = 2
is called every second, is launched after 2 seconds
iteration = 3
is called every second, is launched after 2 seconds
iteration = 4
is called every second, is launched after 2 seconds
iteration = 5
Run single iteration
Callback of a timer created as stopped
Restart the second watcher and try to handle the same events, but don&apos;t block
Running a blocking loop
is called every second, is launched after 2 seconds
iteration = 8
is called every second, is launched after 2 seconds
iteration = 9
is called every second, is launched after 2 seconds
iteration = 10
END
</pre></div>
  </div>
  </div>
 </div>

 <div class="refsect1 seealso" id="refsect1-evtimer.construct-seealso">
  <h3 class="title">See Also</h3>
  <ul class="simplelist">
   <li class="member">
    <span class="methodname"><a href="evtimer.createstopped.html" class="methodname" rel="rdfs-seeAlso">EvTimer::createStopped()</a> - Creates EvTimer stopped watcher object</span>
   </li>
   <li class="member">
    <a href="class.evperiodic.html" class="classname">EvPeriodic</a>
   </li>
   <li class="member">
    <a href="http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_timer_code_relative_and_opti" class="link external">&#xBB;&#xA0;ev_timer - relative and optionally repeating timeouts</a>
   </li>
   <li class="member">
    <a href="http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#Be_smart_about_timeouts" class="link external">&#xBB;&#xA0;Be smart about timeouts</a>
   </li>
  </ul>
 </div>

