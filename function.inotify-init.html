---
layout: default
---

 <div class="refnamediv">
  <h1 class="refname">inotify_init</h1>
  <p class="verinfo">(PECL inotify &gt;= 0.1.2)</p><p class="refpurpose"><span class="refname">inotify_init</span> &#x2014; <span class="dc-title">Initialize an inotify instance</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.inotify-init-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> <span class="methodname"><strong>inotify_init</strong></span>
    ( <span class="methodparam">void</span>
   )</div>

  <p class="para rdfs-comment">
   Initialize an inotify instance for use with
   <span class="function"><a href="function.inotify-add-watch.html" class="function">inotify_add_watch()</a></span>
  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.inotify-init-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   A stream resource or <strong><code>FALSE</code></strong> on error.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.inotify-init-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2696">
    <p><strong>Example #1 Example usage of inotify</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&#xA0;Open&#xA0;an&#xA0;inotify&#xA0;instance<br></span><span style="color: #0000BB">$fd&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">inotify_init</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&#xA0;Watch&#xA0;__FILE__&#xA0;for&#xA0;metadata&#xA0;changes&#xA0;(e.g.&#xA0;mtime)<br></span><span style="color: #0000BB">$watch_descriptor&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">inotify_add_watch</span><span style="color: #007700">(</span><span style="color: #0000BB">$fd</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">IN_ATTRIB</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;generate&#xA0;an&#xA0;event<br></span><span style="color: #0000BB">touch</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Read&#xA0;events<br></span><span style="color: #0000BB">$events&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">inotify_read</span><span style="color: #007700">(</span><span style="color: #0000BB">$fd</span><span style="color: #007700">);<br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$events</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;The&#xA0;following&#xA0;methods&#xA0;allows&#xA0;to&#xA0;use&#xA0;inotify&#xA0;functions&#xA0;without&#xA0;blocking&#xA0;on&#xA0;inotify_read():<br><br>//&#xA0;-&#xA0;Using&#xA0;stream_select()&#xA0;on&#xA0;$fd:<br></span><span style="color: #0000BB">$read&#xA0;</span><span style="color: #007700">=&#xA0;array(</span><span style="color: #0000BB">$fd</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$write&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$except&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br></span><span style="color: #0000BB">stream_select</span><span style="color: #007700">(</span><span style="color: #0000BB">$read</span><span style="color: #007700">,</span><span style="color: #0000BB">$write</span><span style="color: #007700">,</span><span style="color: #0000BB">$except</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;-&#xA0;Using&#xA0;stream_set_blocking()&#xA0;on&#xA0;$fd<br></span><span style="color: #0000BB">stream_set_blocking</span><span style="color: #007700">(</span><span style="color: #0000BB">$fd</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br></span><span style="color: #0000BB">inotify_read</span><span style="color: #007700">(</span><span style="color: #0000BB">$fd</span><span style="color: #007700">);&#xA0;</span><span style="color: #FF8000">//&#xA0;Does&#xA0;no&#xA0;block,&#xA0;and&#xA0;return&#xA0;false&#xA0;if&#xA0;no&#xA0;events&#xA0;are&#xA0;pending<br><br>//&#xA0;-&#xA0;Using&#xA0;inotify_queue_len()&#xA0;to&#xA0;check&#xA0;if&#xA0;event&#xA0;queue&#xA0;is&#xA0;not&#xA0;empty<br></span><span style="color: #0000BB">$queue_len&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">inotify_queue_len</span><span style="color: #007700">(</span><span style="color: #0000BB">$fd</span><span style="color: #007700">);&#xA0;</span><span style="color: #FF8000">//&#xA0;If&#xA0;&gt;&#xA0;0,&#xA0;inotify_read()&#xA0;will&#xA0;not&#xA0;block<br><br>//&#xA0;Stop&#xA0;watching&#xA0;__FILE__&#xA0;for&#xA0;metadata&#xA0;changes<br></span><span style="color: #0000BB">inotify_rm_watch</span><span style="color: #007700">(</span><span style="color: #0000BB">$fd</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$watch_descriptor</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Close&#xA0;the&#xA0;inotify&#xA0;instance<br>//&#xA0;This&#xA0;may&#xA0;have&#xA0;closed&#xA0;all&#xA0;watches&#xA0;if&#xA0;this&#xA0;was&#xA0;not&#xA0;already&#xA0;done<br></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fd</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(
  array(
    &apos;wd&apos; =&gt; 1,     // Equals $watch_descriptor
    &apos;mask&apos; =&gt; 4,   // IN_ATTRIB bit is set
    &apos;cookie&apos; =&gt; 0, // unique id to connect related events (e.g. 
                   // IN_MOVE_FROM and IN_MOVE_TO events)
    &apos;name&apos; =&gt; &apos;&apos;,  // the name of a file (e.g. if we monitored changes
                   // in a directory)
  ),
);
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.inotify-init-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.inotify-add-watch.html" class="function" rel="rdfs-seeAlso">inotify_add_watch()</a> - Add a watch to an initialized inotify instance</span></li>
    <li class="member"><span class="function"><a href="function.inotify-rm-watch.html" class="function" rel="rdfs-seeAlso">inotify_rm_watch()</a> - Remove an existing watch from an inotify instance</span></li>
    <li class="member"><span class="function"><a href="function.inotify-queue-len.html" class="function" rel="rdfs-seeAlso">inotify_queue_len()</a> - Return a number upper than zero if there are pending events</span></li>
    <li class="member"><span class="function"><a href="function.inotify-read.html" class="function" rel="rdfs-seeAlso">inotify_read()</a> - Read events from an inotify instance</span></li>
    <li class="member"><span class="function"><a href="function.fclose.html" class="function" rel="rdfs-seeAlso">fclose()</a> - Closes an open file pointer</span></li>
   </ul>
  </p>
 </div>


