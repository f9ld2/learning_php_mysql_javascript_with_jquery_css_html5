---
layout: default
---

  <h2 class="title">Basic usage</h2>
  <p class="para">
   <div class="example" id="example-4280">
    <p><strong>Example #1 Shared Memory Operations Overview</strong></p> 
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>&#xA0;&#xA0;&#xA0;<br></span><span style="color: #FF8000">//&#xA0;Create&#xA0;100&#xA0;byte&#xA0;shared&#xA0;memory&#xA0;block&#xA0;with&#xA0;system&#xA0;id&#xA0;of&#xA0;0xff3<br></span><span style="color: #0000BB">$shm_id&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">shmop_open</span><span style="color: #007700">(</span><span style="color: #0000BB">0xff3</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;c&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0644</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$shm_id</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Couldn&apos;t&#xA0;create&#xA0;shared&#xA0;memory&#xA0;segment\n&quot;</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">//&#xA0;Get&#xA0;shared&#xA0;memory&#xA0;block&apos;s&#xA0;size<br></span><span style="color: #0000BB">$shm_size&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">shmop_size</span><span style="color: #007700">(</span><span style="color: #0000BB">$shm_id</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;SHM&#xA0;Block&#xA0;Size:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$shm_size&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;has&#xA0;been&#xA0;created.\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&#xA0;Lets&#xA0;write&#xA0;a&#xA0;test&#xA0;string&#xA0;into&#xA0;shared&#xA0;memory<br></span><span style="color: #0000BB">$shm_bytes_written&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">shmop_write</span><span style="color: #007700">(</span><span style="color: #0000BB">$shm_id</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;my&#xA0;shared&#xA0;memory&#xA0;block&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br>if&#xA0;(</span><span style="color: #0000BB">$shm_bytes_written&#xA0;</span><span style="color: #007700">!=&#xA0;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;my&#xA0;shared&#xA0;memory&#xA0;block&quot;</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Couldn&apos;t&#xA0;write&#xA0;the&#xA0;entire&#xA0;length&#xA0;of&#xA0;data\n&quot;</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">//&#xA0;Now&#xA0;lets&#xA0;read&#xA0;the&#xA0;string&#xA0;back<br></span><span style="color: #0000BB">$my_string&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">shmop_read</span><span style="color: #007700">(</span><span style="color: #0000BB">$shm_id</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$shm_size</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$my_string</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Couldn&apos;t&#xA0;read&#xA0;from&#xA0;shared&#xA0;memory&#xA0;block\n&quot;</span><span style="color: #007700">;<br>}<br>echo&#xA0;</span><span style="color: #DD0000">&quot;The&#xA0;data&#xA0;inside&#xA0;shared&#xA0;memory&#xA0;was:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">$my_string&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//Now&#xA0;lets&#xA0;delete&#xA0;the&#xA0;block&#xA0;and&#xA0;close&#xA0;the&#xA0;shared&#xA0;memory&#xA0;segment<br></span><span style="color: #007700">if&#xA0;(!</span><span style="color: #0000BB">shmop_delete</span><span style="color: #007700">(</span><span style="color: #0000BB">$shm_id</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Couldn&apos;t&#xA0;mark&#xA0;shared&#xA0;memory&#xA0;block&#xA0;for&#xA0;deletion.&quot;</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">shmop_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$shm_id</span><span style="color: #007700">);<br>&#xA0;&#xA0;&#xA0;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 