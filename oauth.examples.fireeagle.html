---
layout: default
---

  <h2 class="title">FireEagle</h2>
  <p class="para">
   <div class="example" id="example-6161">
    
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$req_url&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;https://fireeagle.yahooapis.com/oauth/request_token&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$authurl&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;https://fireeagle.yahoo.net/oauth/authorize&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$acc_url&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;https://fireeagle.yahooapis.com/oauth/access_token&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$api_url&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;https://fireeagle.yahooapis.com/api/0.1&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$conskey&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;your_consumer_key&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$conssec&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;your_consumer_secret&apos;</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&#xA0;In&#xA0;state=1&#xA0;the&#xA0;next&#xA0;request&#xA0;should&#xA0;include&#xA0;an&#xA0;oauth_token.<br>//&#xA0;If&#xA0;it&#xA0;doesn&apos;t&#xA0;go&#xA0;back&#xA0;to&#xA0;0<br></span><span style="color: #007700">if(!isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;oauth_token&apos;</span><span style="color: #007700">])&#xA0;&amp;&amp;&#xA0;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;state&apos;</span><span style="color: #007700">]==</span><span style="color: #0000BB">1</span><span style="color: #007700">)&#xA0;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;state&apos;</span><span style="color: #007700">]&#xA0;=&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>try&#xA0;{<br>&#xA0;&#xA0;</span><span style="color: #0000BB">$oauth&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">OAuth</span><span style="color: #007700">(</span><span style="color: #0000BB">$conskey</span><span style="color: #007700">,</span><span style="color: #0000BB">$conssec</span><span style="color: #007700">,</span><span style="color: #0000BB">OAUTH_SIG_METHOD_HMACSHA1</span><span style="color: #007700">,</span><span style="color: #0000BB">OAUTH_AUTH_TYPE_URI</span><span style="color: #007700">);<br>&#xA0;&#xA0;</span><span style="color: #0000BB">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">enableDebug</span><span style="color: #007700">();<br>&#xA0;&#xA0;if(!isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;oauth_token&apos;</span><span style="color: #007700">])&#xA0;&amp;&amp;&#xA0;!</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;state&apos;</span><span style="color: #007700">])&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$request_token_info&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getRequestToken</span><span style="color: #007700">(</span><span style="color: #0000BB">$req_url</span><span style="color: #007700">);<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;secret&apos;</span><span style="color: #007700">]&#xA0;=&#xA0;</span><span style="color: #0000BB">$request_token_info</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;oauth_token_secret&apos;</span><span style="color: #007700">];<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;state&apos;</span><span style="color: #007700">]&#xA0;=&#xA0;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;Location:&#xA0;&apos;</span><span style="color: #007700">.</span><span style="color: #0000BB">$authurl</span><span style="color: #007700">.</span><span style="color: #DD0000">&apos;?oauth_token=&apos;</span><span style="color: #007700">.</span><span style="color: #0000BB">$request_token_info</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;oauth_token&apos;</span><span style="color: #007700">]);<br>&#xA0;&#xA0;&#xA0;&#xA0;exit;<br>&#xA0;&#xA0;}&#xA0;else&#xA0;if(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;state&apos;</span><span style="color: #007700">]==</span><span style="color: #0000BB">1</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setToken</span><span style="color: #007700">(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;oauth_token&apos;</span><span style="color: #007700">],</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;secret&apos;</span><span style="color: #007700">]);<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$access_token_info&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getAccessToken</span><span style="color: #007700">(</span><span style="color: #0000BB">$acc_url</span><span style="color: #007700">);<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;state&apos;</span><span style="color: #007700">]&#xA0;=&#xA0;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;token&apos;</span><span style="color: #007700">]&#xA0;=&#xA0;</span><span style="color: #0000BB">$access_token_info</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;oauth_token&apos;</span><span style="color: #007700">];<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;secret&apos;</span><span style="color: #007700">]&#xA0;=&#xA0;</span><span style="color: #0000BB">$access_token_info</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;oauth_token_secret&apos;</span><span style="color: #007700">];<br>&#xA0;&#xA0;}&#xA0;<br>&#xA0;&#xA0;</span><span style="color: #0000BB">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setToken</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;token&apos;</span><span style="color: #007700">],</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;secret&apos;</span><span style="color: #007700">]);<br>&#xA0;&#xA0;</span><span style="color: #0000BB">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;</span><span style="color: #0000BB">$api_url</span><span style="color: #DD0000">/user.json&quot;</span><span style="color: #007700">);<br>&#xA0;&#xA0;</span><span style="color: #0000BB">$json&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">json_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLastResponse</span><span style="color: #007700">());<br>&#xA0;&#xA0;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$json</span><span style="color: #007700">);<br>}&#xA0;catch(</span><span style="color: #0000BB">OAuthException&#xA0;$E</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$E</span><span style="color: #007700">);<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 