---
layout: default
title: "Practical PHP"
---
<h2>Practical PHP</h2>
<span>Previous chapters went over the elements of the PHP language. This chapter builds on your new programming skills to teach you some common but important practical tasks. You will learn the best ways to manage string handling to achieve clear and concise code that displays in web browsers exactly how you want it to, including advanced date and time management. You&rsquo;ll also find out how to create and otherwise modify files, including those uploaded by users.</span>
<h3>Using printf</h3>
<span>You&rsquo;ve already seen the print and echo functions, which simply output text to the browser. But a much more powerful function, printf, controls the format of the output by letting you put special formatting characters in a string. For each formatting character, printf expects you to pass an argument that it will display using that format. For instance, the following example uses the %d conversion specifier to display the value 3 in decimal:</span>
<pre><code class="php">printf("There are %d items in your basket", 3);</code></pre>
<span>If you replace the %d with %b, the value 3 would be displayed in binary ( 11 ). Table 7-1 shows the conversion specifiers supported.</span>
<br/>
<span>Table 7-1. The printf conversion specifiers</span>
<table class="tbl-left">
    <tr>
        <td>Specifier</td>
        <td>Conversion action on argument arg</td>
        <td>Example (for an arg of 123)</td>
    </tr>
    <tr>
        <td>%</td>
        <td>Display a % character (no arg required)</td>
        <td>%</td>
    </tr>
    <tr>
        <td>b</td>
        <td>Display arg as a binary integer</td>
        <td>1111011</td>
    </tr>
    <tr>
        <td>c</td>
        <td>Display ASCII character for the arg</td>
        <td>{</td>
    </tr>
    <tr>
        <td>d</td>
        <td>Display arg as a signed decimal integer</td>
        <td>123</td>
    </tr>
    <tr>
        <td>e</td>
        <td>Display arg using scientific notation</td>
        <td>1.23000e+2</td>
    </tr>
    <tr>
        <td>f</td>
        <td>Display arg as floating point</td>
        <td>123.000000</td>
    </tr>
    <tr>
        <td>o</td>
        <td>Display arg as an octal integer</td>
        <td>173</td>
    </tr>
    <tr>
        <td>s</td>
        <td>Display arg as a string</td>
        <td>123</td>
    </tr>
    <tr>
        <td>u</td>
        <td>Display arg as an unsigned decimal</td>
        <td>123</td>
    </tr>
    <tr>
        <td>x</td>
        <td>Display arg in lowercase hexadecimal</td>
        <td>7b</td>
    </tr>
    <tr>
        <td>X</td>
        <td>Display arg in uppercase hexadecimal</td>
        <td>7B</td>
    </tr>
</table>
<br/>
<span>You can have as many specifiers as you like in a printf function, as long as you pass a matching number of arguments, and as long as each specifier is prefaced by a % symbol. Therefore, the following code is valid, and will output "My name is Simon. I'm 33 years old, which is 21 in hexadecimal" :</span>
<pre>
<code class="php">
    printf("My name is %s. I'm %d years old, which is %X in hexadecimal",
        'Simon', 33, 33);
</code>
</pre>
<span>If you leave out any arguments, you will receive a parse error informing you that a right bracket, ), was unexpectedly encountered.</span>
<br/>
<span>A more practical example of printf sets colors in HTML using decimal. For example, suppose you know you want a color that has a triplet value of 65 red, 127 green, and 245 blue, but don&rsquo;t want to convert this to hexadecimal yourself. Here&rsquo;s an easy solution is:</span>
<pre><code class="php">printf("&lt;span style='color:#%X%X%X'&gt;Hello&lt;/span&gt;", 65, 127, 245);</code></pre>
<span>Check the format of the color specification between the apostrophes ( '' ) carefully. First comes the pound, or hash, sign ( # ) expected by the color specification. Then come three %X format specifiers, one for each of your numbers. The resulting output from this command is as follows:</span>
<pre><code class="html">&lt;span style='color:#417FF5'&gt;Hello&lt;/span&gt;</code></pre>
<span>Usually, you&rsquo;ll find it convenient to use variables or expressions as arguments to printf. For instance, if you stored values for your colors in the three variables $r, $g, and $b, you could create a darker color with this:</span>
<pre><code class="php">printf("&lt;span style='color:#%X%X%X'&gt;Hello&lt;/span&gt;", $r-20, $g-20, $b-20);</code></pre>
<h4>Precision Setting</h4>
<span>Not only can you specify a conversion type, but you can also set the precision of the displayed result. For example, amounts of currency are usually displayed with only two digits of precision. However, after a calculation, a value may have a greater precision than this, such as 123.42 / 12, which results in 10.285. To ensure that such values are correctly stored internally, but displayed with only two digits of precision, you can insert the string ".2" between the % symbol and the conversion specifier:</span>
<pre><code class="php">printf("The result is: $%.2f", 123.42 / 12);</code></pre>
<span>The output from this command is as follows:</span>
<br/>
<b class="t30">The result is $10.29</b>
<br/>
<span>But you actually have even more control than that, because you can also specify whether to pad output with either zeros or spaces by prefacing the specifier with certain values. Example 7-1 shows four possible combinations.</span>
<br/>
<span>Example 7-1. Precision setting</span>
<pre>
<code class="php">
&lt;?php
    echo "&lt;pre&gt;"; // Enables viewing of the spaces
    // Pad to 15 spaces
    printf("The result is $%15f\n", 123.42 / 12);
    // Pad to 15 spaces, fill with zeros
    printf("The result is $%015f\n", 123.42 / 12);
    // Pad to 15 spaces, 2 decimal places precision
    printf("The result is $%15.2f\n", 123.42 / 12);
    // Pad to 15 spaces, 2 decimal places precision, fill with zeros
    printf("The result is $%015.2f\n", 123.42 / 12);
    // Pad to 15 spaces, 2 decimal places precision, fill with # symbol
    printf("The result is $%'#15.2f\n", 123.42 / 12);
?&gt;
</code>
</pre>
<span>The output from this example looks like this:</span>
<br/>
<b class="t30">The result is $ 10.285000</b><br/>
<b class="t30">The result is $00000010.285000</b><br/>
<b class="t30">The result is $ 10.29</b><br/>
<b class="t30">The result is $000000000010.29</b><br/>
<b class="t30">The result is $##########10.29</b><br/>
<span>The way it works is simple if you go from right to left (see Table 7-2 ). Notice that:</span>
<br/>
<span>&bull; The rightmost character is the conversion specifier: in this case, f for floating point.</span>
<br/>
<span>&bull; Just before the conversion specifier, if there is a period and a number together, then the precision of the output is specified as the value of the number.</span>
<br/>
<span>&bull; Regardless of whether there&rsquo;s a precision specifier, if there is a number, then that represents the number of characters to which the output should be padded. In the previous example, this is 15 characters. If the output is already equal to or greater than the padding length, then this argument is ignored.</span>
<br/>
<span>&bull; The leftmost parameter allowed after the % symbol is a 0, which is ignored unless a padding value has been set, in which case the output is padded with zeros instead of spaces. If a pad character other than zero or a space is required, you can use any one of your choices as long as you preface it with a single quotation mark, like this: '#.</span>
<br/>
<span>&bull; On the left is the % symbol, which starts the conversion.</span>
<br/>
<span>Table 7-2. Conversion specifier components</span>
<table class="tbl-left">
    <tr>
        <td>Start conversion</td>
        <td>Pad character</td>
        <td>Number of pad characters</td>
        <td>Display precision</td>
        <td>Conversion specifier</td>
        <td>Examples</td>
    </tr>
    <tr>
        <td>%</td>
        <td></td>
        <td>15</td>
        <td></td>
        <td>f</td>
        <td>10.285000</td>
    </tr>
    <tr>
        <td>%</td>
        <td>0</td>
        <td>15</td>
        <td>.2</td>
        <td>f</td>
        <td>000000000010.29</td>
    </tr>
    <tr>
        <td>%</td>
        <td>'#</td>
        <td>15</td>
        <td>.4</td>
        <td>f</td>
        <td>########10.2850</td>
    </tr>
</table>
<h4>String Padding</h4>
<span>You can also pad strings to required lengths (as you can with numbers), select different padding characters, and even choose between left and right justification. Example 7-2 shows various examples.</span>
<br/>
<span>Example 7-2. String padding</span>
<pre>
<code class="php">
&lt;?php
    echo "&lt;pre&gt;"; // Enables viewing of the spaces
    $h = 'Rasmus';
    
    printf("[%s]\n", $h); // Standard string output
    printf("[%12s]\n", $h); // Right justify with spaces to width 12
    printf("[%-12s]\n", $h); // Left justify with spaces
    printf("[%012s]\n", $h); // Zero padding
    printf("[%'#12s]\n\n", $h); // Use the custom padding character '#'
    
    $d = 'Rasmus Lerdorf'; // The original creator of PHP
    printf("[%12.8s]\n", $d); // Right justify, cutoff of 8 characters
    printf("[%-12.12s]\n", $d); // Left justify, cutoff of 12 characters
    printf("[%-'@12.10s]\n", $d); // Left justify, pad '@', cutoff 10 chars
?&gt;
</code>
</pre>
<span>Note how for purposes of layout in a web page, I&rsquo;ve used the &lt;pre&gt; HTML tag to preserve all the spaces and the \n newline character after each of the lines to be displayed. The output from this example is as follows:</span>
<br/>
<b class="t30">[Rasmus]</b><br/>
<b class="t30">[ Rasmus]</b><br/>
<b class="t30">[Rasmus ]</b><br/>
<b class="t30">[000000Rasmus]</b><br/>
<b class="t30">[######Rasmus]</b><br/>
<b class="t30">[ Rasmus L]</b><br/>
<b class="t30">[Rasmus Lerdo]</b><br/>
<b class="t30">[Rasmus Ler@@]</b><br/>
<span>When you are specifying a padding value, if a string is already of equal or greater length than that value, it will be ignored, unless a cutoff value is given that shortens the string back to less than the padding value.</span>
<br/>
<span>Table 7-3 shows the components available to string conversion specifiers.</span>
<br/>
<span>Table 7-3. String conversion specifier components</span>
<br/>
<table class="tbl-left">
    <tr>
        <td>Start conversion</td>
        <td>Left/right justify</td>
        <td>Padding character</td>
        <td>Number of pad characters</td>
        <td>Cutoff</td>
        <td>Conversion specifier</td>
        <td>Examples (using &ldquo;Rasmus&rdquo;)</td>
    </tr>
    <tr>
        <td>%</td>
        <td></td>
        <td></td>
        <td></td>
        <td>s</td>
        <td>[Rasmus]</td>
    </tr>
    <tr>
        <td>%</td>
        <td>-</td>
        <td></td>
        <td>10</td>
        <td></td>
        <td>s</td>
        <td>[Rasmus ]</td>
    </tr>
    <tr>
        <td>%</td>
        <td></td>
        <td>'#</td>
        <td>8</td>
        <td>.4</td>
        <td>s</td>
        <td>[####Rasm]</td>
    </tr>
</table>
<h4>Using sprintf</h4>
<span>Often, you don&rsquo;t want to output the result of a conversion but need it to use elsewhere in your code. This is where the sprintf function comes in. With it, you can send the output to another variable rather than to the browser.</span>
<br/>
<span>You might use it to make a conversion, as in the following example, which returns the hexadecimal string value for the RGB color group 65, 127, 245 in $hexstring :</span>
<pre><code class="php">$hexstring = sprintf("%X%X%X", 65, 127, 245);</code></pre>
<span>Or you may wish to store output ready to display later on:</span>
<pre>
<code class="php">
    $out = sprintf("The result is: $%.2f", 123.42 / 12);
    echo $out;
</code>
</pre>
<h3>Date and Time Functions</h3>
<span>To keep track of the date and time, PHP uses standard Unix timestamps, which are simply the number of seconds since the start of January 1, 1970. To determine the current timestamp, you can use the time function:</span>
<pre><code class="php">echo time();</code></pre>
<span>Because the value is stored as seconds, to obtain the timestamp for this time next week, you would use the following, which adds 7 days times 24 hours times 60 minutes times 60 seconds to the returned value:</span>
<pre><code class="php">echo time() + 7 * 24 * 60 * 60;</code></pre>
<span>If you wish to create a timestamp for a given date, you can use the mktime function. Its output is the timestamp 946684800 for the first second of the first minute of the first hour of the first day of the year 2000:</span>
<pre><code class="php">echo mktime(0, 0, 0, 1, 1, 2000);</code></pre>
<span>The parameters to pass are, in order from left to right:</span>
<br/>
<span>&bull; The number of the hour (0&ndash;23)</span>
<br/>
<span>&bull; The number of the minute (0&ndash;59)</span>
<br/>
<span>&bull; The number of seconds (0&ndash;59)</span>
<br/>
<span>&bull; The number of the month (1&ndash;12)</span>
<br/>
<span>&bull; The number of the day (1&ndash;31)</span>
<br/>
<span>&bull; The year (1970&ndash;2038, or 1901&ndash;2038 with PHP 5.1.0+ on 32-bit signed systems) You may ask why you are limited to the years 1970 through 2038. Well, it&rsquo;s because the original developers of Unix chose the start of the year 1970 as the base date that no programmer should need to go before!</span>
<br/>
<span>Luckily, because (as of version 5.1.0) PHP supports systems using a signed 32-bit integer for the timestamp, dates from 1901 to 2038 are allowed on them. However, that introduces a problem even worse than the original because the Unix designers also decided that nobody would be using Unix after about 70 years or so, and therefore believed they could get away with storing the timestamp as a 32-bit value&mdash;which will run out on January 19, 2038!</span>
<br/>
<span>This will create what has come to be known as the Y2K38 bug (much like the millennium bug, which was caused by storing years as two-digit values, and which also had to be fixed). PHP introduced the DateTime class in version 5.2 to overcome this issue, but it will work only on 64-bit architecture.</span>
<br/>
<span>To display the date, use the date function, which supports a plethora of formatting options, enabling you to display the date any way you wish. The format is as follows:</span>
<pre><code class="php">date($format, $timestamp);</code></pre>
<span>The parameter $format should be a string containing formatting specifiers as detailed in Table 7-4, and $timestamp should be a Unix timestamp. For the complete list of specifiers, please see http://php.net/manual/en/function.date.php. The following command will output the current date and time in the format "Thursday July 6th, 2017 - 1:38pm" :</span>
<pre><code class="php">echo date("l F jS, Y - g:ia", time());</code></pre>
<span>Table 7-4. The major date function format specifiers</span>
<br/>
<table class="tbl-left">
    <tr>
        <td>Format</td>
        <td>Description</td>
        <td>Returned value</td>
    </tr>
    <tr>
        <td>Day specifiers</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>d</td>
        <td>Day of month, two digits, with leading zeros</td>
        <td>01 to 31</td>
    </tr>
    <tr>
        <td>D</td>
        <td>Day of the week, three letters</td>
        <td>Mon to Sun</td>
    </tr>
    <tr>
        <td>j</td>
        <td>Day of the month, no leading zeros</td>
        <td>1 to 31</td>
    </tr>
    <tr>
        <td>l</td>
        <td>Day of week, full names</td>
        <td>Sunday to Saturday</td>
    </tr>
    <tr>
        <td>N</td>
        <td>Day of week, numeric, Monday to Sunday</td>
        <td>1 to 7</td>
    </tr>
    <tr>
        <td>S</td>
        <td>Suffix for day of month (useful with specifier j)</td>
        <td>st,nd,rd, or th</td>
    </tr>
    <tr>
        <td>w</td>
        <td>Day of week, numeric, Sunday to Saturday</td>
        <td>0 to 6</td>
    </tr>
    <tr>
        <td>z</td>
        <td>Day of year</td>
        <td>0 to 365</td>
    </tr>
    <tr>
        <td>Week specifier</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>W</td>
        <td>Week number of year</td>
        <td>01 to 52</td>
    </tr>
    <tr>
        <td>Month specifiers</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>F</td>
        <td>Month name</td>
        <td>January to December</td>
    </tr>
    <tr>
        <td>m</td>
        <td>Month number with leading zeros</td>
        <td>01 to 12</td>
    </tr>
    <tr>
        <td>M</td>
        <td>Month name, three letters</td>
        <td>Jan to Dec</td>
    </tr>
    <tr>
        <td>n</td>
        <td>Month number, no leading zeros</td>
        <td>1 to 12</td>
    </tr>
    <tr>
        <td>t</td>
        <td>Number of days in given month</td>
        <td>28 to 31</td>
    </tr>
    <tr>
        <td>Year specifiers</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>L</td>
        <td>Leap year</td>
        <td>1 = Yes, 0 = No</td>
    </tr>
    <tr>
        <td>y</td>
        <td>Year, 2 digits</td>
        <td>00 to 99</td>
    </tr>
    <tr>
        <td>Y</td>
        <td>Year, 4 digits</td>
        <td>0000 to 9999</td>
    </tr>
    <tr>
        <td>Time specifiers</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>a</td>
        <td>Before or after midday, lowercase</td>
        <td>am or pm</td>
    </tr>
    <tr>
        <td>A</td>
        <td>Before or after midday, uppercase</td>
        <td>AM or PM</td>
    </tr>
    <tr>
        <td>g</td>
        <td>Hour of day, 12-hour format, no leading zeros</td>
        <td>1 to 12</td>
    </tr>
    <tr>
        <td>G</td>
        <td>Hour of day, 24-hour format, no leading zeros</td>
        <td>00 to 23</td>
    </tr>
    <tr>
        <td>h</td>
        <td>Hour of day, 12-hour format, with leading zeros</td>
        <td>01 to 12</td>
    </tr>
    <tr>
        <td>H</td>
        <td>Hour of day, 24-hour format, with leading zeros</td>
        <td>00 to 23</td>
    </tr>
    <tr>
        <td>i</td>
        <td>Minutes, with leading zeros</td>
        <td>00 to 59</td>
    </tr>
    <tr>
        <td>s</td>
        <td>Seconds, with leading zeros</td>
        <td>00 to 59</td>
    </tr>
</table>
<h4>Date Constants</h4>
<span>There are a number of useful constants that you can use with the date command to return the date in specific formats. For example, date(DATE_RSS) returns the current date and time in the valid format for an RSS feed. Some of the more commonly used constants are as follows:</span>
<br/>
<span>DATE_ATOM</span>
<div class="t30">
This is the format for Atom feeds. The PHP format is
"Y-m-d\TH:i:sP"
and example
output is
"2018-08-16T12:00:00+00:00".
</div>
<span>DATE_COOKIE</span>
<div class="t30">
This is the format for cookies set from a web server or JavaScript. The PHP format is
"l, d-M-y H:i:s T"
and example output is
"Thursday, 16-Aug-18 12:00:00
UTC".
</div>
<span>DATE_RSS</span>
<div class="t30">
This is the format for RSS feeds. The PHP format is
"D, d M Y H:i:s O"
and exam‐
ple output is
"Thu, 16 Aug 2018 12:00:00 UTC".
</div>
<span>DATE_W3C</span>
<div class="t30">
This is the format for the World Wide Web Consortium. The PHP format is
"Y-m-d
\TH:i:sP"
and example output is
"2018-08-16T12:00:00+00:00"
.
The complete list can be found at
http://php.net/manual/en/class.datetime.php.
</div>
<h4>Using checkdate</h4>
<span>You&rsquo;ve seen how to display a valid date in a variety of formats. But how can you check whether a user has submitted a valid date to your program? The answer is to pass the month, day, and year to the checkdate function, which returns a value of TRUE if the date is valid, or FALSE if it is not.</span>
<br/>
<span>For example, if February 30 of any year is input, it will always be an invalid date. Example 7-3 shows code that you could use for this. As it stands, it will find the given date invalid.</span>
<br/>
<span>Example 7-3. Checking for the validity of a date</span>
<pre>
<code class="php">
&lt;?php
    $month = 9; // September (only has 30 days)
    $day = 31; // 31st
    $year = 2018; // 2018
    
    if (checkdate($month, $day, $year)) echo "Date is valid";
    else echo "Date is invalid";
?&gt;
</code>
</pre>

<h3>File Handling</h3>
<span>Powerful as it is, MySQL is not the only (or necessarily the best) way to store all data on a web server. Sometimes it can be quicker and more convenient to directly access files on the hard disk. Cases in which you might need to do this are modifying images such as uploaded user avatars, or log files that you wish to process.</span>
<br/>
<span>First, though, a note about file naming: if you are writing code that may be used on various PHP installations, there is no way of knowing whether these systems are case- sensitive. For example, Windows and Mac OS X filenames are not case-sensitive, but Linux and Unix ones are. Therefore, you should always assume that the system is case-sensitive and stick to a convention such as all lowercase filenames.</span>
<h4>Checking Whether a File Exists</h4>
<span>To determine whether a file already exists, you can use the file_exists function, which returns either TRUE or FALSE, and is used like this:</span>
<pre><code class="php">if (file_exists("testfile.txt")) echo "File exists";</code></pre>
<h4>Creating a File</h4>
<span>At this point, testfile.txt doesn&rsquo;t exist, so let&rsquo;s create it and write a few lines to it. Type Example 7-4 and save it as testfile.php.</span>
<br/>
<span>Example 7-4. Creating a simple text file</span>
<pre>
<code class="php">
&lt;?php // testfile.php
    $fh = fopen("testfile.txt", 'w') or die("Failed to create file");

    $text = &lt;&lt;&lt;_END
        Line 1
        Line 2
        Line 3
    _END;

    fwrite($fh, $text) or die("Could not write to file");
    fclose($fh);
    echo "File 'testfile.txt' written successfully";
?&gt;
</code>
</pre>
<span>When you run this in a browser, all being well, you will receive the message File 'testfile.txt' written successfully. If you receive an error message, your hard disk may be full or, more likely, you may not have permission to create or write to the file, in which case you should modify the attributes of the destination folder according to your operating system. Otherwise, the file testfile.txt should now be residing in the same folder in which you saved the testfile.php program. Try opening the file in a text or program editor&mdash;the contents will look like this:</span>
<br/>
<b class="t30">Line 1</b><br/>
<b class="t30">Line 2</b><br/>
<b class="t30">Line 3</b><br/>
<span>This simple example shows the sequence that all file handling takes:</span>
<br/>
<span>1. Always start by opening the file. You do this through a call to fopen.</span>
<br/>
<span>2. Then you can call other functions; here we write to the file ( fwrite ), but you can also read from an existing file ( fread or fgets ) and do other things.</span>
<br/>
<span>3. Finish by closing the file ( fclose ). Although the program does this for you when it ends, you should clean up by closing the file when you&rsquo;re finished.</span>
<br/>
<span>Every open file requires a file resource so that PHP can access and manage it. The preceding example sets the variable $fh (which I chose to stand for file handle ) to the value returned by the fopen function. Thereafter, each file-handling function that accesses the opened file, such as fwrite or fclose, must be passed $fh as a parameter to identify the file being accessed. Don&rsquo;t worry about the content of the $fh variable; it&rsquo;s a number PHP uses to refer to internal information about the file&mdash;you just pass the variable to other functions.</span>
<br/>
<span>Upon failure, FALSE will be returned by fopen. The previous example shows a simple way to capture and respond to the failure: it calls the die function to end the program and give the user an error message. A web application would never abort in this crude way (you would create a web page with an error message instead), but this is fine for our testing purposes.</span>
<br/>
<span>Notice the second parameter to the fopen call. It is simply the character w, which tells the function to open the file for writing. The function creates the file if it doesn&rsquo;t already exist. Be careful when playing around with these functions: if the file already exists, the w mode parameter causes the fopen call to delete the old contents (even if you don&rsquo;t write anything new!).</span>
<br/>
<span>There are several different mode parameters that can be used here, as detailed in Table 7-5.</span>
<br/>
<span>Table 7-5. The supported fopen modes</span>
<table class="tbl-left">
    <tr>
        <td>Mode</td>
        <td>Action</td>
        <td>Description</td>
    </tr>
    <tr>
        <td>'r'</td>
        <td>Read from file start</td>
        <td>Open for reading only; place the file pointer at the beginning of the file. Return
        FALSE
        if the
        file doesn&rsquo;t already exist.</td>
    </tr>
    <tr>
        <td>'r+'</td>
        <td>Read from file start and allow writing</td>
        <td>Open for reading and writing; place the file pointer at the beginning of the file. Return
        FALSE
        if the file doesn&rsquo;t already exist.</td>
    </tr>
    <tr>
        <td>'w'</td>
        <td>Write from file start and truncate file</td>
        <td>Open for writing only; place the file pointer at the beginning of the file and truncate the file to zero length. If the file doesn&rsquo;t exist, attempt to create it.</td>
    </tr>
    <tr>
        <td>'w+'</td>
        <td>Write from file start, truncate file, and allow reading</td>
        <td>Open for reading and writing; place the file pointer at the beginning of the file and truncate the file to zero length. If the file doesn&rsquo;t exist, attempt to create it.</td>
    </tr>
    <tr>
        <td>'a'</td>
        <td>Append to file end</td>
        <td>Open for writing only; place the file pointer at the end of the file. If the file doesn&rsquo;t exist, attempt to create it.</td>
    </tr>
    <tr>
        <td>'a+'</td>
        <td>Append to file end and allow reading</td>
        <td>Open for reading and writing; place the file pointer at the end of the file. If the file doesn&rsquo;t exist, attempt to create it.</td>
    </tr>
</table>

<h4>Reading from Files</h4>
<span>The easiest way to read from a text file is to grab a whole line through fgets (think of the final s as standing for string ), as in Example 7-5.</span>
<br/>
<span>Example 7-5. Reading a file with fgets</span>
<pre>
<code class="php">
&lt;?php
    $fh = fopen("testfile.txt", 'r') or
    die("File does not exist or you lack permission to open it");
    $line = fgets($fh);
    fclose($fh);
    echo $line;
?&gt;
</code>
</pre>
<span>If you created the file as shown in Example 7-4, you&rsquo;ll get the first line:</span>
<br/>
<b class="t30">Line 1</b>
<br/>
<span>Or you can retrieve multiple lines or portions of lines through the fread function, as in Example 7-6.</span>
<br/>
<span>Example 7-6. Reading a file with fread</span>
<pre>
<code class="php">
&lt;?php
    $fh = fopen("testfile.txt", 'r') or
    die("File does not exist or you lack permission to open it");
    $text = fread($fh, 3);
    fclose($fh);
    echo $text;
?&gt;
</code>
</pre>
<span>I&rsquo;ve requested three characters in the fread call, so the program displays this:</span>
<br/>
<span>Lin</span>
<br/>
<span>The fread function is commonly used with binary data. But if you use it on text data that spans more than one line, remember to count newline characters.</span>
<h4>Copying Files</h4>
<span>Let&rsquo;s try out the PHP copy function to create a clone of testfile.txt. Type Example 7-7 and save it as copyfile.php, and then call up the program in your browser.</span>
<br/>
<span>Example 7-7. Copying a file</span>
<pre>
<code class="php">
&lt;?php // copyfile.php
    copy('testfile.txt', 'testfile2.txt') or die("Could not copy file");
    echo "File successfully copied to 'testfile2.txt'";
?&gt;
</code>
</pre>
<span>If you check your folder again, you&rsquo;ll see that you now have the new file testfile2.txt in it. By the way, if you don&rsquo;t want your programs to exit on a failed copy attempt, you could try the alternate syntax in Example 7-8.</span>
<br/>
<span>Example 7-8. Alternate syntax for copying a file</span>
<br/>
<pre>
<code class="php">
&lt;?php // copyfile2.php
    if (!copy('testfile.txt', 'testfile2.txt')) echo "Could not copy file";
    else echo "File successfully copied to 'testfile2.txt'";
?&gt;
</code>
</pre>
<h4>Moving a File</h4>
<span>To move a file, rename it with the rename function, as in Example 7-9.</span>
<br/>
<span>Example 7-9. Moving a file</span>
<br/>
<pre>
<code class="php">
&lt;?php // movefile.php
    if (!rename('testfile2.txt', 'testfile2.new'))
    echo "Could not rename file";
    else echo "File successfully renamed to 'testfile2.new'";
?&gt;
</code>
</pre>
<br/>
<span>You can use the rename function on directories, too. To avoid any warning messages, if the original file doesn&rsquo;t exist, you can call the file_exists function first to check.</span>
<h4>Deleting a File</h4>
<span>Deleting a file is just a matter of using the unlink function to remove it from the file system, as in Example 7-10.</span><br/>
<span>Example 7-10. Deleting a file</span>
<pre>
<code class="php">
&lt;?php // deletefile.php
    if (!unlink('testfile2.new')) echo "Could not delete file";
    else echo "File 'testfile2.new' successfully deleted";
?&gt;
</code>
</pre>
<span>Whenever you access files on your hard disk directly, you must also always ensure that it is impossible for your file system to be compromised. For example, if you are deleting a file based on user input, you must make absolutely certain it is a file that can be safely deleted and that the user is allowed to delete it.</span>
<br/>
<span>As with moving a file, a warning message will be displayed if the file doesn&rsquo;t exist, which you can avoid by using file_exists to first check for its existence before calling unlink.</span>
<h4>Updating Files</h4>
<span>Often, you will want to add more data to a saved file, which you can do in many ways. You can use one of the append write modes (see Table 7-5 ), or you can simply open a file for reading and writing with one of the other modes that supports writing, and move the file pointer to the correct place within the file that you wish to write to or read from.</span>
<br/>
<span>The file pointer is the position within a file at which the next file access will take place, whether it&rsquo;s a read or a write. It is not the same as the &nbsp;file handle &nbsp;(as stored in the variable $fh in Example 7-4 ), which contains details about the file being accessed.</span>
<br/>
<span>You can see this in action by typing Example 7-11 and saving it as update.php. Then call it up in your browser.</span>
<br/>
<span>Example 7-11. Updating a file</span>
<pre>
<code class="php">
&lt;?php // update.php
    $fh = fopen("testfile.txt", 'r+') or die("Failed to open file");
    $text = fgets($fh);
    fseek($fh, 0, SEEK_END);
    fwrite($fh, "$text") or die("Could not write to file");
    fclose($fh);
    echo "File 'testfile.txt' successfully updated";
?&gt;
</code>
</pre>
<span>This program opens testfile.txt for both reading and writing by setting the mode with 'r+', which puts the file pointer right at the start. It then uses the fgets function to read in a single line from the file (up to the first line feed). After that, the fseek function is called to move the file pointer right to the file end, at which point the line of text that was extracted from the start of the file (stored in $text ) is then appended to file&rsquo;s end and the file is closed. The resulting file now looks like this:</span>
<br/>
<b class="t30">Line 1</b><br/>
<b class="t30">Line 2</b><br/>
<b class="t30">Line 3</b><br/>
<b class="t30">Line 1</b><br/>
<span>The first line has successfully been copied and then appended to the file&rsquo;s end.</span>
<br/>
<span>As used here, in addition to the $fh file handle, the fseek function was passed two other parameters, 0 and SEEK_END. SEEK_END tells the function to move the file pointer to the end of the file, and 0 tells it how many positions it should then be moved backward from that point. In the case of Example 7-11, a value of 0 is used, because the pointer is required to remain at the file&rsquo;s end.</span>
<br/>
<span>There are two other seek options available to the fseek function: SEEK_SET and SEEK_CUR. The SEEK_SET option tells the function to set the file pointer to the exact position given by the preceding parameter. Thus, the following example moves the file pointer to position 18:</span>
<pre><code class="php">fseek($fh, 18, SEEK_SET);</code></pre>
<span>SEEK_CUR sets the file pointer to the current position plus the value of the given offset. Therefore, if the file pointer is currently at position 18, the following call will move it to position 23:</span>
<pre><code class="php">fseek($fh, 5, SEEK_CUR);</code></pre>
<span>Although this is not recommended unless you have very specific reasons for it, it is even possible to use text files such as this (but with fixed line lengths) as simple flat file databases. Your program can then use fseek to move back and forth within such a file to retrieve, update, and add new records. You can also delete records by overwriting them with zero characters, and so on.</span>
<h4>Locking Files for Multiple Accesses</h4>
<span>Web programs are often called by many users at the same time. If more than one person tries to write to a file simultaneously, it can become corrupted. And if one person writes to it while another is reading from it, the file is all right, but the person reading it can get odd results. To handle simultaneous users, you must use the file-locking flock function. This function queues up all other requests to access a file until your program releases the lock. So, whenever your programs use write access on files that may be accessed concurrently by multiple users, you should also add file locking to them, as in Example 7-12, which is an updated version of Example 7-11.</span>
<br/>
<span>Example 7-12. Updating a file with file locking</span>
<pre>
<code class="php">
&lt;?php
    $fh = fopen("testfile.txt", 'r+') or die("Failed to open file");
    $text = fgets($fh);
    
    if (flock($fh, LOCK_EX))
    {
        fseek($fh, 0, SEEK_END);
        fwrite($fh, "$text") or die("Could not write to file");
        flock($fh, LOCK_UN);
    }
    fclose($fh);
    echo "File 'testfile.txt' successfully updated";
?&gt;
</code>
</pre>
<span>There is a trick to file locking to preserve the best possible response time for your website visitors: perform it directly before a change you make to a file, and then unlock it immediately afterward. Having a file locked for any longer than this will slow down your application unnecessarily. This is why the calls to flock in Example 7-12 are directly before and after the fwrite call.</span>
<br/>
<span>The first call to flock sets an exclusive file lock on the file referred to by $fh using the LOCK_EX parameter:</span>
<pre><code class="php">flock($fh, LOCK_EX);</code></pre>
<span>From this point onward, no other processes can write to (or even read from) the file until you release the lock by using the LOCK_UN parameter, like this:</span>
<pre><code class="php">flock($fh, LOCK_UN);</code></pre>
<span>As soon as the lock is released, other processes are again allowed access to the file. This is one reason why you should re-seek to the point you wish to access in a file each time you need to read or write data, because another process could have changed the file since the last access.</span>
<br/>
<span>However, did you notice that the call to request an exclusive lock is nested as part of an if statement? This is because flock is not supported on all systems; thus, it is wise to check whether you successfully secured a lock, just in case one could not be obtained.</span>
<br/>
<span>Something else you must consider is that flock is what is known as an advisory lock. This means that it locks out only other processes that call the function. If you have any code that goes right in and modifies files without implementing flock file locking, it will always override the locking and could wreak havoc on your files.</span>
<br/>
<span>By the way, implementing file locking and then accidentally leaving it out in one section of code can lead to an extremely hard-to-locate bug.</span>
<br/>
<span>flock will not work on NFS and many other networked file systems. Also, when using a multithreaded server like ISAPI, you may not be able to rely on flock to protect files against other PHP scripts running in parallel threads of the same server instance. Additionally, flock is not supported on any system using the old FAT file system, such as older versions of Windows.</span>
<h4>Reading an Entire File</h4>
<span>A handy function for reading in an entire file without having to use file handles is file_get_contents. It&rsquo;s very easy to use, as you can see in Example 7-13.</span>
<br/>
<span>Example 7-13. Using file_get_contents</span>
<pre>
<code class="php">
&lt;?php
    echo "&lt;pre&gt;"; // Enables display of line feeds
    echo file_get_contents("testfile.txt");
    echo "&lt;/pre&gt;"; // Terminates pre tag
?&gt;
</code>
</pre>
<span>But the function is actually a lot more useful than that, because you can also use it to fetch a file from a server across the Internet, as in Example 7-14, which requests the HTML from the O&rsquo;Reilly home page, and then displays it as if the user had surfed to the page itself. The result will be similar to Figure 7-1.</span>
<br/>
<span>Example 7-14. Grabbing the O&rsquo;Reilly home page</span>
<pre>
<code class="php">
&lt;?php
    echo file_get_contents("http://oreilly.com");
?&gt;
</code>
</pre>
<p><img src="images/7.1.png"/></p>
<span>Figure 7-1. The O&rsquo;Reilly home page grabbed with file_get_contents</span>
<h4>Uploading Files</h4>
<span>Uploading files to a web server is a subject that seems daunting to many people, but it actually couldn&rsquo;t be much easier. All you need to do to upload a file from a form is choose a special type of encoding called multipart/form-data, and your browser will handle the rest. To see how this works, type the program in Example 7-15 and save it as upload.php. When you run it, you&rsquo;ll see a form in your browser that lets you upload a file of your choice.</span>
<br/>
<span>Example 7-15. Image uploader upload.php</span>
<pre>
<code class="php">
&lt;?php // upload.php
    echo &lt;&lt;&lt;_END
    &lt;html&gt;&lt;head&gt;&lt;title&gt;PHP Form Upload&lt;/title&gt;&lt;/head&gt;&lt;body&gt;
    &lt;form method='post' action='upload.php' enctype='multipart/form-data'&gt;
    Select File: &lt;input type='file' name='filename' size='10'&gt;
    &lt;input type='submit' value='Upload'&gt;
    &lt;/form&gt;
    _END;
    if ($_FILES)
    {
        $name = $_FILES['filename']['name'];
        move_uploaded_file($_FILES['filename']['tmp_name'], $name);
        echo "Uploaded image '$name'&lt;br&gt;&lt;img src='$name'&gt;";
    }
    echo "&lt;/body&gt;&lt;/html&gt;";
?&gt;
</code>
</pre>

<span>Let&rsquo;s examine this program a section at a time. The first line of the multiline echo statement starts an HTML document, displays the title, and then starts the document&rsquo;s body.</span>
<br/>
<span>Next we come to the form that selects the Post method of form submission, sets the target for posted data to the program &nbsp;upload.php (the program itself), and tells the web browser that the data posted should be encoded via the content MIME type of multipart/form-data.</span>
<br/>
<span>With the form set up, the next lines display the prompt Select File: and then request two inputs. The first request is for a file; it uses an input type of file, a name of filename, and an input field with a width of 10 characters. The second requested input is just a Submit button that is given the label Upload (which replaces the default button text of Submit Query). And then the form is closed.</span>
<br/>
<span>This short program shows a common technique in web programming in which a single program is called twice: once when the user first visits a page, and again when the user presses the Submit button.</span>
<br/>
<span>The PHP code to receive the uploaded data is fairly simple, because all uploaded files are placed into the associative system array $_FILES. Therefore, a quick check to see whether $_FILES contains anything is sufficient to determine whether the user has uploaded a file. This is done with the statement if ($_FILES).</span>
<br/>
<span>The first time the user visits the page, before uploading a file, $_FILES is empty, so the program skips this block of code. When the user uploads a file, the program runs again and discovers an element in the $_FILES array.</span>
<br/>
<span>Once the program realizes that a file was uploaded, the actual name, as read from the uploading computer, is retrieved and placed into the variable $name. Now all that&rsquo;s necessary is to move the file from the temporary location in which PHP stored the uploaded file to a more permanent one. We do this using the move_uploaded_file function, passing it the original name of the file, with which it is saved to the current directory.</span>
<br/>
<span>Finally, the uploaded image is displayed within an IMG tag, and the result should look like Figure 7-2.</span>
<br/>
<span>If you run this program and receive warning messages such as Per mission denied for the move_uploaded_file function call, then you may not have the correct permissions set for the folder in which the program is running.</span>
<p><img src="images/7.2.png"/></p>
<span>Figure 7-2. Uploading an image as form data</span>
<h6>Using $_FILES</h6>
<span>Five things are stored in the $_FILES array when a file is uploaded, as shown in Table 7-6 (where file is the file upload field name supplied by the submitting form).</span>
<br/>
<span>Table 7-6. The contents of the $_FILES array</span>
<br/>
<span>Array element Contents $_FILES[' file '][' name '] The name of the uploaded file (e.g., smiley.jpg ) $_FILES[' file '][' type '] The content type of the file (e.g., image/jpeg ) $_FILES[' file '][' size '] The file&rsquo;s size in bytes $_FILES[' file '][' tmp_name '] The name of the temporary file stored on the server $_FILES[' file '][' error '] The error code resulting from the file upload</span>
<br/>
<span>Content types used to be known as &nbsp;MIME (Multipurpose Internet Mail Extension) types, but because their use later expanded to the whole Internet, now they are often called Internet media types. Table 7-7 shows some of the more frequently used types that turn up in $_FILES[' file '][' type '].</span>
<br/>
<span>Table 7-7. Some common Internet media content types</span>
<table class="tbl-left">
    <tr>
        <td>application/pdf</td>
        <td>image/gif</td>
        <td>multipart/form-data</td>
        <td>text/xml</td>
    </tr>
    <tr>
        <td>application/zip</td>
        <td>image/jpeg</td>
        <td>text/css</td>
        <td>video/mpeg</td>
    </tr>
    <tr>
        <td>audio/mpeg</td>
        <td>image/png</td>
        <td>text/html</td>
        <td>video/mp4</td>
    </tr>
    <tr>
        <td>audio/x-wav</td>
        <td>image/tiff</td>
        <td>text/plain</td>
        <td>video/quicktime</td>
    </tr>
</table><br/>

<span>Validation I hope it now goes without saying (although I&rsquo;ll do so anyway) that form data validation is of the utmost importance, due to the possibility of users attempting to hack into your server.</span>
<br/>
<span>In addition to maliciously formed input data, some of the things you also have to check are whether a file was actually received and, if so, whether the right type of data was sent.</span>
<br/>
<span>Taking all these things into account, &nbsp;Example 7-16, &nbsp;upload2.php, is a more secure rewrite of upload.php.</span>
<br/>
<span>Example 7-16. A more secure version of upload.php</span>
<pre>
<code class="php">
&lt;?php // upload2.php
    echo &lt;&lt;&lt;_END
        &lt;html&gt;&lt;head&gt;&lt;title&gt;PHP Form Upload&lt;/title&gt;&lt;/head&gt;&lt;body&gt;
        &lt;form method='post' action='upload2.php' enctype='multipart/form-data'&gt;
        Select a JPG, GIF, PNG or TIF File:
        &lt;input type='file' name='filename' size='10'&gt;
        &lt;input type='submit' value='Upload'&gt;&lt;/form&gt;
    _END;
    
    if ($_FILES)
    {
        $name = $_FILES['filename']['name'];
        switch($_FILES['filename']['type'])
        {
            case 'image/jpeg': $ext = 'jpg'; break;
            case 'image/gif': $ext = 'gif'; break;
            case 'image/png': $ext = 'png'; break;
            case 'image/tiff': $ext = 'tif'; break;
            default: $ext = ''; break;
        }
        
        if ($ext)
        {
            $n = "image.$ext";
            move_uploaded_file($_FILES['filename']['tmp_name'], $n);
            echo "Uploaded image '$name' as '$n':&lt;br&gt;";
            echo "&lt;img src='$n'&gt;";
        }
        else echo "'$name' is not an accepted image file";
    }
    else echo "No image has been uploaded";
        echo "&lt;/body&gt;&lt;/html&gt;";
?&gt;
</code>
</pre>
<span>The non-HTML section of code has been expanded from the half-dozen lines of Example 7-15 to more than 20 lines, starting at if ($_FILES).</span>
<br/>
<span>As with the previous version, this if line checks whether any data was actually posted, but there is now a matching else near the bottom of the program that echoes a message to screen when nothing has been uploaded.</span>
<br/>
<span>Within the if statement, the variable $name is assigned the value of the filename as retrieved from the uploading computer (just as before), but this time we won&rsquo;t rely on the user having sent us valid data. Instead a switch statement is used to check the uploaded content type against the four types of image this program supports. If a match is made, the variable $ext is set to the three-letter file extension for that type. Should no match be found, the file uploaded was not of an accepted type and the variable $ext is set to the empty string "".</span>
<br/>
<span>The next section of code then checks the variable $ext to see whether it contains a string and, if so, creates a new filename called $n with the base name image and the extension stored in $ext. This means that the program is in full control over the name of the file to be created, as it can be only one of image.jpg, image.gif, image.png, or image.tif.</span>
<br/>
<span>Safe in the knowledge that the program has not been compromised, the rest of the PHP code is much the same as in the previous version. It moves the uploaded temporary image to its new location and then displays it, while also displaying the old and new image names.</span>
<br/>
<span>Don&rsquo;t worry about having to delete the temporary file that PHP creates during the upload process, because if the file has not been moved or renamed, it will be automatically removed when the program exits.</span>
<br/>
<span>After the if statement, there is a matching else, which is executed only if an unsupported image type was uploaded, in which case it displays an appropriate error message.</span>
<br/>
<span>When you write your own file-uploading routines, I strongly advise you to use a similar approach and have pre-chosen names and locations for uploaded files. That way, no attempts to add pathnames and other malicious data to the variables you use can get through. If this means that more than one user could end up having a file uploaded with the same name, you could prefix such files with their user&rsquo;s name, or save them to individually created folders for each user.</span>
<br/>
<span>But if you must use a supplied filename, you should sanitize it by allowing only alphanumeric characters and the period, which you can do with the following command, using a regular expression (see Chapter 17 ) to perform a search and replace on $name :</span>
<pre><code class="php">$name = preg_replace("/[^A-Za-z0-9.]/", "", $name);</code></pre>
<span>This leaves only the characters A&ndash;Z, a&ndash;z, 0&ndash;9, and periods in the string $name, and strips out everything else.</span>
<br/>
<span>Even better, to ensure that your program will work on all systems, regardless of whether they are case-sensitive or case-insensitive, you should probably use the following command instead, which changes all uppercase characters to lowercase at the same time:</span>
<pre><code class="php">$name = strtolower(ereg_replace("[^A-Za-z0-9.]", "", $name));</code></pre>
<span>Sometimes you may encounter the media type of image/pjpeg, which indicates a progressive JPEG, but you can safely add this to your code as an alias of image/jpeg, like this:</span>
<br/>
<span>case 'image/pjpeg': case 'image/jpeg': $ext = 'jpg'; break;</span>
<h3>System Calls</h3>
<span>Sometimes PHP will not have the function you need to perform a certain action, but the operating system it is running on may. In such cases, you can use the exec system call to do the job.</span>
<br/>
<span>For example, to quickly view the contents of the current directory, you can use a program such as Example 7-17. If you are on a Windows system, it will run as is using the Windows dir command. On Linux, Unix, or Mac OS X, comment out or remove the first line and uncomment the second to use the ls system command. You may wish to type this program, save it as exec.php, and call it up in your browser.</span>
<br/>
<span>Example 7-17. Executing a system command</span>
<pre>
<code class="php">
&lt;?php // exec.php
    $cmd = "dir"; // Windows
    // $cmd = "ls"; // Linux, Unix &amp; Mac
    exec(escapeshellcmd($cmd), $output, $status);
    
    if ($status) echo "Exec command failed";
    else
    {
        echo "&lt;pre&gt;";
        foreach($output as $line) echo htmlspecialchars("$line\n");
        echo "&lt;/pre&gt;";
    }
?&gt;
</code>
</pre>
<span>The htmlspecialchars function is called to turn any special characters returned by the system into ones that HTML can understand and properly display, neatening the output. Depending on the system you are using, the result of running this program will look something like this (from a Windows dir command):</span><br/>
<b class="t30">Volume in drive C is Hard Disk</b><br/>
<b class="t30">Volume Serial Number is DC63-0E29</b><br/>
<b class="t30">Directory of C:\xampp\htdocs</b><br/>
<b class="t30">09/07/2014 10:06 &lt;DIR&gt;.</b><br/>
<b class="t30">09/07/2014 10:06 &lt;DIR&gt;..</b><br/>
<b class="t30">08/07/2014 09:16 &lt;DIR&gt; forbidden</b><br/>
<b class="t30">08/07/2014 09:16 &lt;DIR&gt; img</b><br/>
<b class="t30">30/03/2013 12:28 202 index.html</b><br/>
<b class="t30">30/03/2013 12:28 267 index.php</b><br/>
<b class="t30">08/07/2014 09:16 &lt;DIR&gt; restricted</b><br/>
<b class="t30">08/07/2014 09:56 110 test.html</b><br/>
<b class="t30">09/07/2014 08:46 &lt;DIR&gt; xampp</b><br/>
<b class="t60">3 File(s) 579 bytes</b><br/>
<b class="t60">6 Dir(s) 1,793,430,867,968 bytes free</b><br/>
<span>exec takes three arguments:</span>
<br/>
<span>&bull; The command itself (in the previous case, $cmd )</span>
<br/>
<span>&bull; An array in which the system will put the output from the command (in the previous case, $output )</span>
<br/>
<span>&bull; A variable to contain the returned status of the call (which, in the previous case, is $status )</span>
<br/>
<span>If you wish, you can omit the $output and $status parameters, but you will not know the output created by the call or even whether it completed successfully.</span>
<br/>
<span>You should also note the use of the escapeshellcmd function. It is a good habit to always use this when issuing an exec call, because it sanitizes the command string, preventing the execution of arbitrary commands, should you supply user input to the call.</span>
<br/>
<span>The system calling functions are typically disabled on shared web hosts, as they pose a security risk. You should always try to solve your problems within PHP if you can, and go to the system directly only if it is really necessary. Also, going to the system is relatively slow, and you need to code two implementations if your application is expected to run on both Windows and Linux/Unix systems.</span>
<h3>XHTML or HTML5?</h3>
<span>Because XHTML documents need to be well formed, you can parse them using standard XML parsers&mdash;unlike HTML, which requires a lenient HTML-specific parser. For this reason, XHTML never really caught on, and when the time came to devise a new standard, the World Wide Web Consortium chose to support HTML5 rather than the newer XHTML2 standard.</span>
<br/>
<span>HTML5 has some of the features of both HTML4 and XHTML, but is much simpler to use and less strict to validate and, happily, there is now just a single document type you need to place at the head of an HTML5 document (instead of the variety of strict, transitional, and frameset types previously required), namely:</span>
<pre><code class="html">&lt;!DOCTYPE html&gt;</code></pre>
<span>Just the simple word html is sufficient to tell the browser that your web page is designed for HTML5 and, because all the latest versions of the most popular browsers have been supporting most of the HTML5 specification since 2011 or so, this document type is generally the only one you need, unless you choose to cater to older browsers.</span>
<br/>
<span>For all intents and purposes, when writing HTML documents, web developers can safely ignore the old XHTML document types and syntax (such as using &lt;br /&gt; instead of the simpler &lt;br&gt; tag). But if you find yourself having to cater to a very old browser or an unusual application that relies on XHTML, then you can get more information on how to do that at http://xhtml.com.</span>