---
layout: default
---

 <div class="refnamediv">
  <h1 class="refname">maxdb_affected_rows</h1>
  <h1 class="refname">maxdb::affected_rows</h1>
  <p class="verinfo">(PECL maxdb &gt;= 1.0)</p><p class="refpurpose"><span class="refname">maxdb_affected_rows</span> -- <span class="refname">maxdb::affected_rows</span> &#x2014; <span class="dc-title">Gets the number of affected rows in a previous MaxDB operation</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.maxdb-affected-rows-description">
  <h3 class="title">Description</h3>
  <p class="para">Procedural style</p>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>maxdb_affected_rows</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$link</code></span>
   )</div>

  <p class="para rdfs-comment">Object oriented style</p>
  <div class="fieldsynopsis"><span class="type">int</span> <var class="varname">$maxdb-&gt;affected_rows</var>;</div>

  <p class="para">
   <span class="function"><strong>maxdb_affected_rows()</strong></span> returns the number of rows affected by the last
   INSERT, UPDATE, or DELETE query associated with the provided <code class="parameter">link</code>
   parameter. If this number cannot be determined, this function will return -1.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    For SELECT statements <span class="function"><strong>maxdb_affected_rows()</strong></span> works like
    <span class="function"><a href="function.maxdb-num-rows.html" class="function">maxdb_num_rows()</a></span>.
   </p>
  <p></p></blockquote>
  <p class="para">
   The <span class="function"><strong>maxdb_affected_rows()</strong></span> function only works with queries which modify
   a table. In order to return the number of rows from a SELECT query, use the
   <span class="function"><a href="function.maxdb-num-rows.html" class="function">maxdb_num_rows()</a></span> function instead.
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.maxdb-affected-rows-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   An integer greater than zero indicates the number of rows affected or retrieved.
   Zero indicates that no records where updated for an UPDATE statement, no rows matched
   the WHERE clause in the query or that no query has yet been executed.
   -1 indicates that the number of rows affected can not be determined.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.maxdb-affected-rows-examples">
  <h3 class="title">Examples</h3>
  <div class="example" id="example-1321">
   <p><strong>Example #1 Object oriented style</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$maxdb&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">maxdb</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;localhost&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;MONA&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;RED&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;DEMODB&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;check&#xA0;connection&#xA0;*/<br></span><span style="color: #007700">if&#xA0;(</span><span style="color: #0000BB">maxdb_connect_errno</span><span style="color: #007700">())&#xA0;{<br>&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Connect&#xA0;failed:&#xA0;%s\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">maxdb_connect_error</span><span style="color: #007700">());<br>&#xA0;&#xA0;&#xA0;exit();<br>}<br><br></span><span style="color: #0000BB">maxdb_report&#xA0;</span><span style="color: #007700">(</span><span style="color: #0000BB">MAXDB_REPORT_OFF</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;DROP&#xA0;TABLE&#xA0;mycustomer&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">maxdb_report&#xA0;</span><span style="color: #007700">(</span><span style="color: #0000BB">MAXDB_REPORT_ERROR</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Insert&#xA0;rows&#xA0;*/<br></span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;CREATE&#xA0;TABLE&#xA0;mycustomer&#xA0;AS&#xA0;SELECT&#xA0;*&#xA0;from&#xA0;hotel.customer&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Affected&#xA0;rows&#xA0;(INSERT):&#xA0;%d\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">affected_rows</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;ALTER&#xA0;TABLE&#xA0;mycustomer&#xA0;ADD&#xA0;Status&#xA0;int&#xA0;default&#xA0;0&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;update&#xA0;rows&#xA0;*/<br></span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;UPDATE&#xA0;mycustomer&#xA0;SET&#xA0;Status=1&#xA0;WHERE&#xA0;cno&#xA0;&gt;&#xA0;50&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Affected&#xA0;rows&#xA0;(UPDATE):&#xA0;%d\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">affected_rows</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;delete&#xA0;rows&#xA0;*/<br></span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;DELETE&#xA0;FROM&#xA0;mycustomer&#xA0;WHERE&#xA0;cno&#xA0;&lt;&#xA0;50&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Affected&#xA0;rows&#xA0;(DELETE):&#xA0;%d\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">affected_rows</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;select&#xA0;all&#xA0;rows&#xA0;*/<br></span><span style="color: #0000BB">$result&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;SELECT&#xA0;title&#xA0;FROM&#xA0;mycustomer&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Affected&#xA0;rows&#xA0;(SELECT):&#xA0;%d\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">affected_rows</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">/*&#xA0;Delete&#xA0;table&#xA0;Language&#xA0;*/<br></span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;DROP&#xA0;TABLE&#xA0;mycustomer&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;close&#xA0;connection&#xA0;*/<br></span><span style="color: #0000BB">$maxdb</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-1322">
   <p><strong>Example #2 Procedural style</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$link&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">maxdb_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;localhost&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;MONA&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;RED&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;DEMODB&quot;</span><span style="color: #007700">);<br><br>if&#xA0;(!</span><span style="color: #0000BB">$link</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Can&apos;t&#xA0;connect&#xA0;to&#xA0;localhost.&#xA0;Error:&#xA0;%s\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">maxdb_connect_error</span><span style="color: #007700">());<br>&#xA0;&#xA0;&#xA0;exit();<br>}<br><br></span><span style="color: #0000BB">maxdb_report&#xA0;</span><span style="color: #007700">(</span><span style="color: #0000BB">MAXDB_REPORT_OFF</span><span style="color: #007700">);<br></span><span style="color: #0000BB">maxdb_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">,</span><span style="color: #DD0000">&quot;DROP&#xA0;TABLE&#xA0;mycustomer&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">maxdb_report&#xA0;</span><span style="color: #007700">(</span><span style="color: #0000BB">MAXDB_REPORT_ERROR</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Insert&#xA0;rows&#xA0;*/<br></span><span style="color: #0000BB">maxdb_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;CREATE&#xA0;TABLE&#xA0;mycustomer&#xA0;AS&#xA0;SELECT&#xA0;*&#xA0;from&#xA0;hotel.customer&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Affected&#xA0;rows&#xA0;(INSERT):&#xA0;%d\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">maxdb_affected_rows</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">));<br><br></span><span style="color: #0000BB">maxdb_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;ALTER&#xA0;TABLE&#xA0;mycustomer&#xA0;ADD&#xA0;Status&#xA0;int&#xA0;default&#xA0;0&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;update&#xA0;rows&#xA0;*/<br></span><span style="color: #0000BB">maxdb_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;UPDATE&#xA0;mycustomer&#xA0;SET&#xA0;Status=1&#xA0;WHERE&#xA0;cno&#xA0;&gt;&#xA0;50&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Affected&#xA0;rows&#xA0;(UPDATE):&#xA0;%d\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">maxdb_affected_rows</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">));<br><br></span><span style="color: #FF8000">/*&#xA0;delete&#xA0;rows&#xA0;*/<br></span><span style="color: #0000BB">maxdb_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;DELETE&#xA0;FROM&#xA0;mycustomer&#xA0;WHERE&#xA0;cno&#xA0;&lt;&#xA0;50&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Affected&#xA0;rows&#xA0;(DELETE):&#xA0;%d\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">maxdb_affected_rows</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">));<br><br></span><span style="color: #FF8000">/*&#xA0;select&#xA0;all&#xA0;rows&#xA0;*/<br></span><span style="color: #0000BB">$result&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">maxdb_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;SELECT&#xA0;title&#xA0;FROM&#xA0;mycustomer&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Affected&#xA0;rows&#xA0;(SELECT):&#xA0;%d\n&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">maxdb_affected_rows</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">));<br><br></span><span style="color: #0000BB">maxdb_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Delete&#xA0;table&#xA0;Language&#xA0;*/<br></span><span style="color: #0000BB">maxdb_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;DROP&#xA0;TABLE&#xA0;mycustomer&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;close&#xA0;connection&#xA0;*/<br></span><span style="color: #0000BB">maxdb_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <p class="para">The above example will output
something similar to:</p>
  <div class="example-contents screen">
<div class="cdata"><pre>
Affected rows (INSERT): 15
Affected rows (UPDATE): 15
Affected rows (DELETE): 0
Affected rows (SELECT): 15
</pre></div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.maxdb-affected-rows-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.maxdb-num-rows.html" class="function" rel="rdfs-seeAlso">maxdb_num_rows()</a> - Gets the number of rows in a result</span></li>
    <li class="member"><span class="function"><a href="function.maxdb-info.html" class="function" rel="rdfs-seeAlso">maxdb_info()</a> - Retrieves information about the most recently executed query</span></li>
   </ul>
  </p>
 </div>


