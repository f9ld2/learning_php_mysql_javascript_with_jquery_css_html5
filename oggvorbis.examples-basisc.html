---
layout: default
---

  <h2 class="title">Examples on using the ogg:// wrapper.</h2>
  <p class="para">
   <div class="example" id="example-664">
    <p><strong>Example #1 Reading an OGG/Vorbis file</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>dl</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;oggvorbis.so&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;By&#xA0;default,&#xA0;ogg://&#xA0;will&#xA0;decode&#xA0;to&#xA0;Signed&#xA0;16-bit&#xA0;Little&#xA0;Endian&#xA0;*/<br></span><span style="color: #0000BB">$fp&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;ogg://myaudio.ogg&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;r&apos;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Collect&#xA0;some&#xA0;information&#xA0;about&#xA0;the&#xA0;file.&#xA0;*/<br></span><span style="color: #0000BB">$metadata&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">stream_get_meta_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Inspect&#xA0;the&#xA0;first&#xA0;song&#xA0;(usually&#xA0;the&#xA0;only&#xA0;song,&#xA0;<br>&#xA0;&#xA0;&#xA0;but&#xA0;OGG/Vorbis&#xA0;files&#xA0;may&#xA0;be&#xA0;chained)&#xA0;*/<br></span><span style="color: #0000BB">$songdata&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$metadata</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;wrapper_data&apos;</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br><br>echo&#xA0;</span><span style="color: #DD0000">&quot;OGG/Vorbis&#xA0;file&#xA0;encoded&#xA0;by:&#xA0;</span><span style="color: #007700">{</span><span style="color: #0000BB">$songdata</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;vendor&apos;</span><span style="color: #007700">]}</span><span style="color: #DD0000">\n.&quot;</span><span style="color: #007700">;<br>echo&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;&#xA0;</span><span style="color: #007700">{</span><span style="color: #0000BB">$songdata</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;channels&apos;</span><span style="color: #007700">]}</span><span style="color: #DD0000">&#xA0;channels&#xA0;of&#xA0;</span><span style="color: #007700">{</span><span style="color: #0000BB">$songdata</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;rate&apos;</span><span style="color: #007700">]}</span><span style="color: #DD0000">Hz&#xA0;sampling&#xA0;encoded&#xA0;at&#xA0;</span><span style="color: #007700">{</span><span style="color: #0000BB">$songdata</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;bitrate_nominal&apos;</span><span style="color: #007700">]}</span><span style="color: #DD0000">bps.\n&quot;</span><span style="color: #007700">;<br>foreach(</span><span style="color: #0000BB">$songdata</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;comments&apos;</span><span style="color: #007700">]&#xA0;as&#xA0;</span><span style="color: #0000BB">$comment</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;&#xA0;&#xA0;</span><span style="color: #0000BB">$comment</span><span style="color: #DD0000">\n&quot;</span><span style="color: #007700">;<br>}<br><br>while&#xA0;(</span><span style="color: #0000BB">$audio_data&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">fread</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">8192</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;</span><span style="color: #FF8000">/*&#xA0;Do&#xA0;something&#xA0;with&#xA0;the&#xA0;PCM&#xA0;audio&#xA0;we&apos;re&#xA0;extracting&#xA0;from&#xA0;the&#xA0;OGG.<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Copying&#xA0;to&#xA0;/dev/dsp&#xA0;is&#xA0;a&#xA0;good&#xA0;target&#xA0;on&#xA0;linux&#xA0;systems,&#xA0;<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;just&#xA0;remember&#xA0;to&#xA0;setup&#xA0;the&#xA0;device&#xA0;for&#xA0;your&#xA0;sampling&#xA0;mode&#xA0;first.&#xA0;*/<br></span><span style="color: #007700">}<br><br></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>

  <p class="para">
   <div class="example" id="example-665">
    <p><strong>Example #2 Encode an audio file to OGG/Vorbis</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>dl</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;oggvorbis.so&apos;</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$context&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">(array(</span><span style="color: #DD0000">&apos;ogg&apos;</span><span style="color: #007700">=&gt;array(<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&apos;pcm_mode&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #0000BB">OGGVORBIS_PCM_S8</span><span style="color: #007700">,&#xA0;&#xA0;</span><span style="color: #FF8000">/*&#xA0;Signed&#xA0;8bit&#xA0;audio&#xA0;*/<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&apos;rate&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #0000BB">44100</span><span style="color: #007700">,&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">/*&#xA0;44kHz&#xA0;CD&#xA0;quality&#xA0;*/<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&apos;bitrate&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">,&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">/*&#xA0;Midquality&#xA0;VBR&#xA0;*/<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&apos;channels&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">/*&#xA0;Mono&#xA0;*/<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&apos;serialno&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #0000BB">12345</span><span style="color: #007700">)));&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">/*&#xA0;Unique&#xA0;within&#xA0;our&#xA0;stream&#xA0;*/<br><br>/*&#xA0;Open&#xA0;file&#xA0;for&#xA0;appending.&#xA0;&#xA0;This&#xA0;will&#xA0;&quot;chain&quot;&#xA0;a&#xA0;second&#xA0;OGG&#xA0;stream&#xA0;at&#xA0;the&#xA0;end&#xA0;of&#xA0;the&#xA0;first.&#xA0;*/<br></span><span style="color: #0000BB">$ogg&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;ogg://mysong.ogg&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;a&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$context</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$pcm&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;mysample.pcm&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;r&apos;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Compress&#xA0;the&#xA0;raw&#xA0;PCM&#xA0;audio&#xA0;from&#xA0;mysample.pcm&#xA0;into&#xA0;mysong.ogg&#xA0;*/<br></span><span style="color: #0000BB">stream_copy_to_stream</span><span style="color: #007700">(</span><span style="color: #0000BB">$pcm</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$ogg</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$pcm</span><span style="color: #007700">);<br></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$ogg</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 