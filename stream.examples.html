---
layout: default
---

 <h1>Examples</h1>
<h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="stream.streamwrapper.example-1.html">Example class registered as stream wrapper</a></li></ul>

 <p class="para">
  <div class="example" id="example-4594">
   <p><strong>Example #1 Using <span class="function"><a href="function.file-get-contents.html" class="function">file_get_contents()</a></span>
    to retrieve data from multiple sources</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&#xA0;Read&#xA0;local&#xA0;file&#xA0;from&#xA0;/home/bar&#xA0;*/<br></span><span style="color: #0000BB">$localfile&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;/home/bar/foo.txt&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Identical&#xA0;to&#xA0;above,&#xA0;explicitly&#xA0;naming&#xA0;FILE&#xA0;scheme&#xA0;*/<br></span><span style="color: #0000BB">$localfile&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;file:///home/bar/foo.txt&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Read&#xA0;remote&#xA0;file&#xA0;from&#xA0;www.example.com&#xA0;using&#xA0;HTTP&#xA0;*/<br></span><span style="color: #0000BB">$httpfile&#xA0;&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;http://www.example.com/foo.txt&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Read&#xA0;remote&#xA0;file&#xA0;from&#xA0;www.example.com&#xA0;using&#xA0;HTTPS&#xA0;*/<br></span><span style="color: #0000BB">$httpsfile&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;https://www.example.com/foo.txt&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Read&#xA0;remote&#xA0;file&#xA0;from&#xA0;ftp.example.com&#xA0;using&#xA0;FTP&#xA0;*/<br></span><span style="color: #0000BB">$ftpfile&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;ftp://user:pass@ftp.example.com/foo.txt&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&#xA0;Read&#xA0;remote&#xA0;file&#xA0;from&#xA0;ftp.example.com&#xA0;using&#xA0;FTPS&#xA0;*/<br></span><span style="color: #0000BB">$ftpsfile&#xA0;&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;ftps://user:pass@ftp.example.com/foo.txt&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  <div class="example" id="example-4595">
   <p><strong>Example #2 Making a POST request to an https server</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&#xA0;Send&#xA0;POST&#xA0;request&#xA0;to&#xA0;https://secure.example.com/form_action.php<br>*&#xA0;Include&#xA0;form&#xA0;elements&#xA0;named&#xA0;&quot;foo&quot;&#xA0;and&#xA0;&quot;bar&quot;&#xA0;with&#xA0;dummy&#xA0;values<br>*/<br><br></span><span style="color: #0000BB">$sock&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">fsockopen</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;ssl://secure.example.com&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">443</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$errno</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$errstr</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">30</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$sock</span><span style="color: #007700">)&#xA0;die(</span><span style="color: #DD0000">&quot;</span><span style="color: #0000BB">$errstr</span><span style="color: #DD0000">&#xA0;(</span><span style="color: #0000BB">$errno</span><span style="color: #DD0000">)\n&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$data&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&quot;foo=&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Value&#xA0;for&#xA0;Foo&quot;</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;&amp;bar=&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Value&#xA0;for&#xA0;Bar&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;POST&#xA0;/form_action.php&#xA0;HTTP/1.0\r\n&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;Host:&#xA0;secure.example.com\r\n&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;Content-type:&#xA0;application/x-www-form-urlencoded\r\n&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;Content-length:&#xA0;&quot;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&quot;\r\n&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;Accept:&#xA0;*/*\r\n&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;\r\n&quot;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$headers&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&quot;&quot;</span><span style="color: #007700">;<br>while&#xA0;(</span><span style="color: #0000BB">$str&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">fgets</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">4096</span><span style="color: #007700">)))<br></span><span style="color: #0000BB">$headers&#xA0;</span><span style="color: #007700">.=&#xA0;</span><span style="color: #DD0000">&quot;</span><span style="color: #0000BB">$str</span><span style="color: #DD0000">\n&quot;</span><span style="color: #007700">;<br><br>echo&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$body&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&quot;&quot;</span><span style="color: #007700">;<br>while&#xA0;(!</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">))<br></span><span style="color: #0000BB">$body&#xA0;</span><span style="color: #007700">.=&#xA0;</span><span style="color: #0000BB">fgets</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">4096</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  <div class="example" id="example-4596">
   <p><strong>Example #3 Writing data to a compressed file</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&#xA0;Create&#xA0;a&#xA0;compressed&#xA0;file&#xA0;containing&#xA0;an&#xA0;arbitrarty&#xA0;string<br>*&#xA0;File&#xA0;can&#xA0;be&#xA0;read&#xA0;back&#xA0;using&#xA0;compress.zlib&#xA0;stream&#xA0;or&#xA0;just<br>*&#xA0;decompressed&#xA0;from&#xA0;the&#xA0;command&#xA0;line&#xA0;using&#xA0;&apos;gzip&#xA0;-d&#xA0;foo-bar.txt.gz&apos;<br>*/<br></span><span style="color: #0000BB">$fp&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;compress.zlib://foo-bar.txt.gz&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;wb&quot;</span><span style="color: #007700">);<br>if&#xA0;(!</span><span style="color: #0000BB">$fp</span><span style="color: #007700">)&#xA0;die(</span><span style="color: #DD0000">&quot;Unable&#xA0;to&#xA0;create&#xA0;file.&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;This&#xA0;is&#xA0;a&#xA0;test.\n&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>

 
