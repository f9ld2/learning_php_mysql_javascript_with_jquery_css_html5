---
layout: default
---

 <h1>Examples</h1>

 <p class="para">
  <div class="example" id="example-6240">
   <p><strong>Example #1 Registering a PHP script to run as a service</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>win32_create_service</span><span style="color: #007700">(array(<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&apos;service&apos;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&apos;dummyphp&apos;</span><span style="color: #007700">,&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">#&#xA0;the&#xA0;name&#xA0;of&#xA0;your&#xA0;service<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&apos;display&apos;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&apos;sample&#xA0;dummy&#xA0;PHP&#xA0;service&apos;</span><span style="color: #007700">,&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">#&#xA0;short&#xA0;description<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&apos;description&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&apos;This&#xA0;is&#xA0;a&#xA0;dummy&#xA0;Windows&#xA0;service&#xA0;created&#xA0;using&#xA0;PHP.&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #FF8000">#&#xA0;long&#xA0;description<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&apos;params&apos;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&apos;&quot;&apos;&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #0000BB">__FILE__&#xA0;</span><span style="color: #007700">.&#xA0;</span><span style="color: #DD0000">&apos;&quot;&#xA0;&#xA0;run&apos;</span><span style="color: #007700">,&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">#&#xA0;path&#xA0;to&#xA0;the&#xA0;script&#xA0;and&#xA0;parameters<br></span><span style="color: #007700">));<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  <div class="example" id="example-6241">
   <p><strong>Example #2 Unregistering a service</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>win32_delete_service</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;dummyphp&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  <div class="example" id="example-6242">
   <p><strong>Example #3 Running as a service</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">if&#xA0;(</span><span style="color: #0000BB">$argv</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&#xA0;==&#xA0;</span><span style="color: #DD0000">&apos;run&apos;</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;</span><span style="color: #0000BB">win32_start_service_ctrl_dispatcher</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;dummyphp&apos;</span><span style="color: #007700">);<br><br>&#xA0;&#xA0;while&#xA0;(</span><span style="color: #0000BB">WIN32_SERVICE_CONTROL_STOP&#xA0;</span><span style="color: #007700">!=&#xA0;</span><span style="color: #0000BB">win32_get_last_control_message</span><span style="color: #007700">())&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">#&#xA0;do&#xA0;your&#xA0;work&#xA0;here.<br>&#xA0;&#xA0;&#xA0;&#xA0;#&#xA0;try&#xA0;not&#xA0;to&#xA0;take&#xA0;up&#xA0;more&#xA0;than&#xA0;30&#xA0;seconds&#xA0;before&#xA0;going&#xA0;around&#xA0;the&#xA0;loop<br>&#xA0;&#xA0;&#xA0;&#xA0;#&#xA0;again<br>&#xA0;&#xA0;</span><span style="color: #007700">}<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
