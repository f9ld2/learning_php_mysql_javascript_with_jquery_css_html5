---
layout: default
---


 <h1 class="title">The MongoDBRef class</h1>
 

 <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.9.0)</p>

  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">This extension that defines this class
is deprecated. Instead, the <a href="set.mongodb.html" class="link">MongoDB</a> extension should be used.
There is no equivalent for this class in the new extension.</p>
   <p class="para">
    The concept of database references, and hence this class, has been
    deprecated in the database.
   </p>
  </div>


  <div class="section" id="mongodbref.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    This class can be used to create lightweight links between objects in 
    different collections.
   </p>
   <p class="para">
    <em class="emphasis">Motivation</em>: Suppose we need to refer to a document in 
    another collection. The easiest way is to create a field in the current 
    document.  For example, if we had a &quot;people&quot; collection and an &quot;addresses&quot;
    collection, we might want to create a link between each person document and
    an address document:
    <div class="example" id="example-1620">
     <p><strong>Example #1 Linking documents</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$people&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">people</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$addresses&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addresses</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$myAddress&#xA0;</span><span style="color: #007700">=&#xA0;array(</span><span style="color: #DD0000">&quot;line&#xA0;1&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&quot;123&#xA0;Main&#xA0;Street&quot;</span><span style="color: #007700">,&#xA0;<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&quot;line&#xA0;2&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #0000BB">null</span><span style="color: #007700">,<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&quot;city&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&quot;Springfield&quot;</span><span style="color: #007700">,<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&quot;state&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&quot;Vermont&quot;</span><span style="color: #007700">,<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #DD0000">&quot;country&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&quot;USA&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;save&#xA0;the&#xA0;address<br></span><span style="color: #0000BB">$addresses</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$myAddress</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;save&#xA0;a&#xA0;person&#xA0;with&#xA0;a&#xA0;reference&#xA0;to&#xA0;the&#xA0;address<br></span><span style="color: #0000BB">$me&#xA0;</span><span style="color: #007700">=&#xA0;array(</span><span style="color: #DD0000">&quot;name&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&quot;Fred&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;address&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #0000BB">$myAddress</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;_id&apos;</span><span style="color: #007700">]);<br></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$me</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    Then, later on, we can find the person&apos;s address by querying the &quot;addresses&quot;
    collection with the <a href="class.mongoid.html" class="classname">MongoId</a> we saved in the &quot;people&quot;
    collection.
   </p>
   <p class="para">
    Suppose now that we have a more general case, where we don&apos;t know which
    collection (or even which database) contains the referenced document.  
    <strong class="classname">MongoDBRef</strong> is a good choice for this case, as it is a
    common format that all of the drivers and the database understand.
   </p>
   <p class="para">
    If each person had a list of things they liked which could come from
    multiple collections, such as &quot;hobbies&quot;, &quot;sports&quot;, &quot;books&quot;, etc., we could
    use <strong class="classname">MongoDBRef</strong>s to keep track of what &quot;like&quot; went
    with what collection:
    <div class="example" id="example-1621">
     <p><strong>Example #2 Creating MongoDBRef links</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$people&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;people&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;model&#xA0;trains&#xA0;are&#xA0;in&#xA0;the&#xA0;&quot;hobbies&quot;&#xA0;collection<br></span><span style="color: #0000BB">$trainRef&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">MongoDBRef</span><span style="color: #007700">::</span><span style="color: #0000BB">create</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;hobbies&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$modelTrains</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;_id&apos;</span><span style="color: #007700">]);<br></span><span style="color: #FF8000">//&#xA0;soccer&#xA0;is&#xA0;in&#xA0;the&#xA0;&quot;sports&quot;&#xA0;collection<br></span><span style="color: #0000BB">$soccerRef&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">MongoDBRef</span><span style="color: #007700">::</span><span style="color: #0000BB">create</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;sports&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$soccer</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;_id&apos;</span><span style="color: #007700">]);<br><br></span><span style="color: #FF8000">//&#xA0;now&#xA0;we&apos;ll&#xA0;know&#xA0;what&#xA0;collections&#xA0;the&#xA0;items&#xA0;in&#xA0;the&#xA0;&quot;likes&quot;&#xA0;array&#xA0;came&#xA0;from&#xA0;when<br>//&#xA0;we&#xA0;retrieve&#xA0;this&#xA0;document<br></span><span style="color: #0000BB">$people</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">insert</span><span style="color: #007700">(array(</span><span style="color: #DD0000">&quot;name&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&quot;Fred&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;likes&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;array(</span><span style="color: #0000BB">$trainRef</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$soccerRef</span><span style="color: #007700">)));<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    Database references can be thought of as hyperlinks: they give the unique 
    address of another document, but they do not load it or automatically follow
    the link/reference.  
   </p>
   <p class="para">
    A database reference is just a normal associative array, not an instance of
    <strong class="classname">MongoDBRef</strong>, so this class is a little different than 
    the other data type classes.  This class contains exclusively static methods 
    for manipulating database references.
   </p>
  </div>


  <div class="section" id="mongodbref.synopsis">
   <h2 class="title">Class synopsis</h2>


   <div class="classsynopsis">
    <div class="ooclass"></div>


    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">MongoDBRef</strong>
     </span>
     {</div>

    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">array</span> <span class="methodname"><a href="mongodbref.create.html" class="methodname">create</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$collection</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$id</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$database</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">array</span> <span class="methodname"><a href="mongodbref.get.html" class="methodname">get</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.mongodb.html" class="type MongoDB">MongoDB</a></span> <code class="parameter">$db</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$ref</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">bool</span> <span class="methodname"><a href="mongodbref.isref.html" class="methodname">isRef</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$ref</code></span>
   )</div>

   }</div>


  </div>

  <div class="section">
   <h2 class="title">See Also</h2>
   <p class="para">
    MongoDB core docs on <a href="https://docs.mongodb.com/manual/reference/database-references/" class="link external">&#xBB;&#xA0;databases references</a>.
   </p>
  </div>
 </div>

 



 





 





 



<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="mongodbref.create.html">MongoDBRef::create</a> &#x2014; Creates a new database reference</li><li><a href="mongodbref.get.html">MongoDBRef::get</a> &#x2014; Fetches the object pointed to by a reference</li><li><a href="mongodbref.isref.html">MongoDBRef::isRef</a> &#x2014; Checks if an array is a database reference</li></ul>
