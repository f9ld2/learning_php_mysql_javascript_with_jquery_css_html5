---
layout: default
---
<h2>Introduction to PHP</h2>
<span>In</span>
<span>Chapter 1</span>
<span>, I explained that PHP is the language that you use to make the server</span>
<span>generate dynamic output&mdash;output that is potentially different each time a browser</span>
<span>requests a page. In this chapter, you&rsquo;ll start learning this simple but powerful lan‐</span>
<span>guage; it will be the topic of the following chapters up through</span>
<span>Chapter 7</span>
<span>.</span><br/>
<span>I encourage you to develop your PHP code in one of the IDEs listed in</span>
<span>Chapter 2</span>
<span>. It</span>
<span>will help you catch typos and speed up learning tremendously in comparison to less</span>
<span>feature-rich editors.</span><br/>
<span>Many of these development environments let you run the PHP code and see the out‐</span>
<span>put discussed in this chapter. I&rsquo;ll also show you how to embed the PHP in an HTML</span>
<span>file so that you can see what the output looks like in a web page (the way your users</span>
<span>will ultimately see it). But that step, as thrilling as it may be at first, isn&rsquo;t really impor</span>
<span>tant at this stage.</span><br/>
<span>In production, your web pages will be a combination of PHP, HTML, and JavaScript,</span>
<span>and some MySQL statements laid out using CSS, and possibly utilizing various</span>
<span>HTML5 elements. Furthermore, each page can lead to other pages to provide users</span>
<span>with ways to click through links and fill out forms. We can avoid all that complexity</span>
<span>while learning each language, though. Focus for now on just writing PHP code and</span>
<span>making sure that you get the output you expect&mdash;or at least that you understand the</span>
<span>output you actually get!</span>
<h3>Incorporating PHP Within HTML</h3>
<span>By default, PHP documents end with the extension</span>
<span>.php</span>
<span>. When a web server encoun</span>
<span>ters this extension in a requested file, it automatically passes it to the PHP processor.</span>
<span>Of course, web servers are highly configurable, and some web developers choose to</span>
<span>force files ending with</span>
<span>.htm</span>
<span>or</span>
<span>.html</span>
<span>to also get parsed by the PHP processor, usually</span>
<span>because they want to hide the fact that they are using PHP.</span><br/>
<span>Your PHP program is responsible for passing back a clean file suitable for display in a</span>
<span>web browser. At its very simplest, a PHP document will output only HTML. To prove</span>
<span>this, you can take any normal HTML document such as an</span>
<span>index.html</span>
<span>file and save it</span>
<span>as</span>
<span>index.php</span>
<span>, and it will display identically to the original.</span><br/>
<span>To trigger the PHP commands, you need to learn a new tag. Here is the first part:</span><br/>
<pre><code class="php">&lt;?php</code></pre>
<span>The first thing you may notice is that the tag has not been closed. This is because</span>
<span>entire sections of PHP can be placed inside this tag, and they finish only when the</span>
<span>closing part is encountered, which looks like this:</span>
<pre><code class="php">?&gt;</code></pre>
<span>A small PHP &ldquo;Hello World&rdquo; program might look like</span>
<span>Example 3-1</span>
<span>.</span><br/>
<span>Example 3-1. Invoking PHP</span>
<pre>
<code class="php">
&lt;?php
    echo "Hello world";
?&gt;
</code>
</pre>
<span>The way you use this tag is quite flexible. Some programmers open the tag at the start</span>
<span>of a document and close it right at the end, outputting any HTML directly from PHP</span>
<span>commands. Others, however, choose to insert only the smallest possible fragments of</span>
<span>PHP within these tags wherever dynamic scripting is required, leaving the rest of the</span>
<span>document in standard HTML.</span><br/>
<span>The latter type of programmer generally argues that their style of coding results in</span>
<span>faster code, while the former say that the speed increase is so minimal that it doesn&rsquo;t</span>
<span>justify the additional complexity of dropping in and out of PHP many times in a sin</span>
<span>gle document.</span><br/>
<span>As you learn more, you will surely discover your preferred style of PHP development,</span>
<span>but for the sake of making the examples in this book easier to follow, I have adopted</span>
<span>the approach of keeping the number of transfers between PHP and HTML to a mini</span>
<span>mum&mdash;generally only once or twice in a document.</span><br/>
<span>By the way, there is a slight variation to the PHP syntax. If you browse the Internet for</span>
<span>PHP examples, you may also encounter code where the opening and closing syntax</span>
<span>looks like this:</span>
<pre>
<code class="php">
&lt;?
    echo "Hello world";
?&gt;
</code>
</pre>
<span>Although it&rsquo;s not as obvious that the PHP parser is being called, this is a valid, alter</span>
<span>native syntax that also usually works, but should be discouraged, as it is incompatible</span>
<span>with XML and its use is now deprecated (meaning that it is no longer recommended</span>
<span>and could be removed in future versions).</span><br/>
<span>If you have only PHP code in a file, you may omit the closing</span>
<span>?&gt;</span>
<span>.</span>
<span>This can be a good practice, as it will ensure that you have no</span>
<span>excess whitespace leaking from your PHP files (especially impor</span>
<span>tant when you&rsquo;re writing object-oriented code).</span><br/>
<h3>This Book&rsquo;s Examples</h3>
<span>To save you the time it would take to type them all in, all the examples from this book</span>
<span>have been archived onto the website at</span>
<span>&nbsp;http://lpmj.net</span>
<span>, which you can download to</span>
<span>your computer by clicking the Download Examples link in the heading section (see</span>
<span>Figure 3-1</span>
<span>).</span>
<p><img src="images/3.1.png"/></p>
<span>Figure 3-1. Viewing examples from this book at</span>
<span>http://lpmj.net</span><br/>
<span>As well as having all the examples saved by chapter and example number (such as</span>
<span>example3-1.php</span>
<span>), the provided archive also contains an additional directory called</span>
<span>named_examples</span>
<span>, in which you&rsquo;ll find all the examples I suggest you save using a spe</span>
<span>cific</span>
<span>filename</span>
<span>(such</span>
<span>as</span>
<span>the</span>
<span>upcoming</span>
<span>Example</span>
<span>3-4</span>
<span>,</span>
<span>which</span>
<span>should</span>
<span>be</span>
<span>saved</span>
<span>as</span>
<span>test1.php</span>
<span>).</span><br/>
<h3>The Structure of PHP</h3>
<span>We&rsquo;re going to cover quite a lot of ground in this section. It&rsquo;s not too difficult, but I</span>
<span>recommend that you work your way through it carefully, as it sets the foundation for</span>
<span>everything else in this book. As always, there are some useful questions at the end of</span>
<span>the chapter that you can use to test how much you&rsquo;ve learned.</span>
<h4>Using Comments</h4>
<span>There are two ways in which you can add comments to your PHP code. The first</span>
<span>turns a single line into a comment by preceding it with a pair of forward slashes:</span><br/>
<span>// This is a comment</span><br/>
<span>This version of the comment feature is a great way to temporarily remove a line of</span>
<span>code from a program that is giving you errors. For example, you could use such a</span>
<span>comment to hide a debugging line of code until you need it, like this:</span><br/>
<span>// echo "X equals $x";</span><br/>
<span>You can also use this type of comment directly after a line of code to describe its</span>
<span>action, like this:</span><br/>
<span>$x += 10; // Increment $x by 10</span><br/>
<span>When you need multiple-line comments, there&rsquo;s a second type of comment, which</span>
<span>looks like</span>
<span>Example 3-2</span>
<span>.</span><br/>
<span>Example 3-2. A multiline comment</span><br/>
<pre>
<code class="php">
&lt;?php
/*  This is a section
    of multiline comments
    which will not be
    interpreted */
?&gt;
</code>
</pre>
<span>You can use the</span>
<span>/*</span>
<span>and</span>
<span>*/</span>
<span>pairs of characters to open and close comments almost</span>
<span>anywhere you like inside your code. Most, if not all, programmers use this construct</span>
<span>to temporarily comment out entire sections of code that do not work or that, for one</span>
<span>reason or another, they do not wish to be interpreted.</span><br/>
<span>A common error is to use</span>
<span>/*</span>
<span>and</span>
<span>*/</span>
<span>to comment out a large section</span>
<span>of code that already contains a commented-out section that uses</span>
<span>those characters. You can&rsquo;t nest comments this way; the PHP inter</span>
<span>preter won&rsquo;t know where a comment ends and will display an error</span>
<span>message. However, if you use a program editor or IDE with syntax</span>
<span>highlighting, this type of error is easier to spot.</span><br/>
<h4>Basic Syntax</h4>
<span>PHP is quite a simple language with roots in C and Perl, yet it looks more like Java. It</span>
<span>is also very flexible, but there are a few rules that you need to learn about its syntax</span>
<span>and structure.</span><br/>
<h6>Semicolons</h6>
<span>You may have noticed in the previous examples that the PHP commands ended with</span>
<span>a semicolon, like this:</span><br/>
<span>$x += 10;</span><br/>
<span>Probably the most common cause of errors you will encounter with PHP is forgetting</span>
<span>this semicolon. This causes PHP to treat multiple statements like one statement,</span>
<span>which it is unable to understand, prompting it to produce a</span>
<span>Parse error</span>
<span>message.</span>
<h6>The $ symbol</h6>
<span>The</span>
<span>$</span>
<span>symbol has come to be used in many different ways by different programming</span>
<span>languages. For example, if you have ever written in the BASIC language, you will have</span>
<span>used the</span>
<span>$</span>
<span>to terminate variable names to denote them as strings.</span><br/>
<span>In PHP, however, you must place a</span>
<span>$</span>
<span>in front of</span>
<span>all</span>
<span>variables. This is required to make</span>
<span>the PHP parser faster, as it instantly knows whenever it comes across a variable.</span>
<span>Whether your variables are numbers, strings, or arrays, they should all look some‐</span>
<span>thing like those in</span>
<span>Example 3-3</span>
<span>.</span><br/>
<span>Example 3-3.</span>
<span>Three different types of variable assignment</span><br/>
<pre>
<code class="php">
&lt;?php
    $mycounter = 1;
    $mystring = "Hello";
    $myarray = array("One", "Two", "Three");
?&gt;
</code>
</pre>
<span>And really that&rsquo;s pretty much all the syntax that you have to remember. Unlike lan</span>
<span>guages such as Python, which are very strict about how you indent and lay out our</span>
<span>code, PHP leaves you completely free to use (or not use) all the indenting and spacing</span>
<span>you like. In fact, sensible use of</span>
<span>whitespace</span>
<span>is generally encouraged (along with com</span>
<span>prehensive commenting) to help you understand your code when you come back to</span>
<span>it. It also helps other programmers when they have to maintain your code.</span>

<h4>Variables</h4>
<span>There&rsquo;s a simple metaphor that will help you understand what PHP variables are all</span>
<span>about. Just think of them as little (or big) matchboxes! That&rsquo;s right&mdash;matchboxes that</span>
<span>you&rsquo;ve painted over and written names on.</span>
<h6>String variables</h6>
<span>Imagine you have a matchbox on which you have written the word</span>
<span>&nbsp;username</span>
<span>. You</span>
<span>then write</span>
<span>Fred Smith</span>
<span>on a piece of paper and place it into the box (see</span>
<span>Figure 3-2</span>
<span>).</span>
<span>Well, that&rsquo;s the same process as assigning a string value to a variable, like this:</span><br/>
<span>$username = "Fred Smith";</span><br/>
<p><img src="images/3.2.png"/></p>
<span>Figure 3-2. You can think of variables as matchboxes containing items</span><br/>
<span>The quotation marks indicate that &ldquo;Fred Smith&rdquo; is a</span>
<span>&nbsp;string</span>
<span>&nbsp;of characters. You must</span>
<span>enclose</span>
<span>each</span>
<span>string</span>
<span>in</span>
<span>either</span>
<span>quotation</span>
<span>marks</span>
<span>or</span>
<span>apostrophes</span>
<span>(single</span>
<span>quotes),</span>
<span>although there is a subtle difference between the two types of quote, which is</span>
<span>explained later. When you want to see what&rsquo;s in the box, you open it, take the piece of</span>
<span>paper out, and read it. In PHP, doing so looks like this:</span><br/>
<span>echo $username;</span><br/>
<span>Or you can assign it to another variable (photocopy the paper and place the copy in</span>
<span>another matchbox), like this:</span><br/>
<span>$current_user = $username;</span><br/>
<span>If you are keen to start trying out PHP for yourself, you could enter the examples in</span>
<span>this chapter into an IDE (as recommended at the end of</span>
<span>&nbsp;Chapter 2</span>
<span>) to see instant</span>
<span>results, or you could enter the code in</span>
<span>Example 3-4</span>
<span>into a program editor and save it</span>
<span>to your server&rsquo;s document root directory (also discussed in</span>
<span>Chapter 2</span>
<span>) as</span>
<span>test1.php</span>
<span>.</span><br/>
<span>Example 3-4. Your</span>
<span>first PHP program</span><br/>
<pre>
<code class="php">
&lt;?php // test1.php
    $username = "Fred Smith";
    echo $username;
    echo "&lt;br&gt;";
    $current_user = $username;
    echo $current_user;
?&gt;
</code>
</pre>
<span>Now you can call it up by entering the following into your browser&rsquo;s address bar:</span><br/>
<span>http://localhost/test1.php</span><br/>
<span>If during installation of your web server (as detailed in</span>
<span>Chapter 2</span>
<span>)</span>
<span>you changed the port assigned to the server to anything other than</span>
<span>80, then you must place that port number within the URL in this</span>
<span>and all other examples in this book. So, for example, if you changed</span>
<span>the port to 8080, the preceding URL becomes this:</span><br/>
<span>http://localhost:8080/test1.php</span><br/>
<span>I won&rsquo;t mention this again, so just remember to use the port num‐</span>
<span>ber if required when trying examples or writing your own code.</span><br/>
<span>The result of running this code should be two occurrences of the name</span>
<span>Fred Smith</span>
<span>,</span>
<span>the first of which is the result of the</span>
<span>echo $username</span>
<span>command, and the second of</span>
<span>the</span>
<span>echo $current_user</span>
<span>command.</span><br/>
<h6>Numeric variables</h6>
<span>Variables don&rsquo;t contain just strings&mdash;they can contain numbers too. If we return to</span>
<span>the matchbox analogy, to store the number 17 in the variable</span>
<span>$count</span>
<span>, the equivalent</span>
<span>would be placing, say, 17 beads in a matchbox on which you have written the word</span>
<span>count</span>
<span>:</span><br/>
<span>$count = 17;</span><br/>
<span>You could also use a floating-point number (containing a decimal point); the syntax is</span>
<span>the same:</span><br/>
<span>$count = 17.5;</span><br/>
<span>To read the contents of the matchbox, you would simply open it and count the beads.</span>
<span>In PHP, you would assign the value of</span>
<span>$count</span>
<span>to another variable or perhaps just echo</span>
<span>it to the web browser.</span>
<h6>Arrays</h6>
<span>So what are arrays? Well, you can think of them as several matchboxes glued together.</span>
<span>For example, let&rsquo;s say we want to store the player names for a five-person soccer team</span>
<span>in an array called</span>
<span>$team</span>
<span>. To do this, we could glue five matchboxes side by side and</span>
<span>write down the names of all the players on separate pieces of paper, placing one in</span>
<span>each matchbox.</span><br/>
<span>Across the whole top of the matchbox assembly we would write the word</span>
<span>team</span>
<span>(see</span>
<span>Figure 3-3</span>
<span>). The equivalent of this in PHP would be the following:</span><br/>
<span>$team = array('Bill', 'Mary', 'Mike', 'Chris', 'Anne');</span><br/>
<span>This syntax is more complicated than the ones I&rsquo;ve explained so far. The array-</span>
<span>building code consists of the following construct:</span><br/>
<span>array();</span><br/>
<span>with five strings inside. Each string is enclosed in apostrophes.</span><br/>
<span>If we then wanted to know who player 4 is, we could use this command:</span><br/>
<span>echo $team[3]; // Displays the name Chris</span>
<p><img src="images/3.3.png"/></p>
<span>Figure 3-3. An array is like several matchboxes glued together</span><br/>
<span>The reason the previous statement has the number 3, not 4, is because the first ele‐</span>
<span>ment of a PHP array is actually the zeroth element, so the player numbers will there‐</span>
<span>fore be 0 through 4.</span>
<h6>Two-dimensional arrays</h6>
<span>There&rsquo;s a lot more you can do with arrays. For example, instead of being single</span>
<span>dimensional lines of matchboxes, they can be two-dimensional matrixes or can even</span>
<span>have three or more dimensions.</span><br/>
<span>As an example of a two-dimensional array, let&rsquo;s say we want to keep track of a game of</span>
<span>tic-tac-toe, which requires a data structure of nine cells arranged in a 3&times;3 square. To</span>
<span>represent this with matchboxes, imagine nine of them glued to each other in a matrix</span>
<span>of three rows by three columns (see</span>
<span>Figure 3-4</span>
<span>).</span>
<p><img src="images/3.4.png"/></p>
<span>Figure 3-4. A multidimensional array simulated with matchboxes</span><br/>
<span>You can now place a piece of paper with either an</span>
<span>x</span>
<span>or an</span>
<span>o</span>
<span>in the correct matchbox</span>
<span>for each move played. To do this in PHP code, you have to set up an array containing</span>
<span>three more arrays, as in</span>
<span>Example 3-5</span>
<span>, in which the array is set up with a game already</span>
<span>in progress.</span><br/>
<span>Example 3-5.</span>
<span>Defining a two-dimensional array</span><br/>
<pre>
<code class="php">
&lt;?php
    $oxo = array(
        array('x', ' ', 'o'),
        array('o', 'o', 'x'),
        array('x', 'o', ' ')
    );
?&gt;
</code>
</pre>
<span>Once again, we&rsquo;ve moved up a step in complexity, but it&rsquo;s easy to understand if you</span>
<span>grasp the basic array syntax. There are three</span>
<span>array()</span>
<span>constructs nested inside the</span>
<span>outer</span>
<span>array()</span>
<span>construct.</span><br/>
<span>To then return the third element in the second row of this array, you would use the</span>
<span>following PHP command, which will display an</span>
<span>x</span>
<span>:</span><br/>
<span>echo $oxo[1][2];</span><br/>
<span>Remember</span>
<span>that</span>
<span>array</span>
<span>indexes</span>
<span>(pointers</span>
<span>at</span>
<span>elements</span>
<span>within</span>
<span>an</span>
<span>array) start from zero, not one, so the</span>
<span>[1]</span>
<span>in the previous com‐</span>
<span>mand refers to the second of the three arrays, and the</span>
<span>[2]</span>
<span>refer‐</span>
<span>ences the third position within that array. It will return the contents</span>
<span>of the matchbox three along and two down.</span><br/>
<span>As mentioned, we can support arrays with even more dimensions by simply creating</span>
<span>more arrays within arrays. However, we will not be covering arrays of more than two</span>
<span>dimensions in this book.</span><br/>
<span>And don&rsquo;t worry if you&rsquo;re still having difficulty coming to grips with using arrays, as</span>
<span>the subject is explained in detail in</span>
<span>Chapter 6</span>
<span>.</span>
<h6>Variable-naming rules</h6>
<span>When creating PHP variables, you must follow these four rules:</span><br/>
<span>&bull;</span>
<span>Variable names must start with a letter of the alphabet or the</span>
<span>&nbsp;_</span>
<span>&nbsp;(underscore)</span>
<span>character.</span><br/>
<span>&bull;</span>
<span>Variable names can contain only the characters</span>
<span>a-z</span>
<span>,</span>
<span>A-Z</span>
<span>,</span>
<span>0-9</span>
<span>, and</span>
<span>_</span>
<span>(underscore).</span><br/>
<span>&bull;</span>
<span>Variable names may not contain spaces. If a variable must comprise more than</span>
<span>one</span>
<span>word,</span>
<span>it</span>
<span>should</span>
<span>be</span>
<span>separated</span>
<span>with</span>
<span>the</span>
<span>_</span>
<span>(</span>
<span>underscore</span>
<span>)</span>
<span>character</span>
<span>(e.g.,</span>
<span>$user_name</span>
<span>).</span><br/>
<span>&bull;</span>
<span>Variable names are case-sensitive. The variable</span>
<span>$High_Score</span>
<span>is not the same as</span>
<span>the variable</span>
<span>$high_score</span>
<span>.</span><br/>
<span>To allow extended ASCII characters that include accents, PHP also</span>
<span>supports the bytes from 127 through 255 in variable names. But</span>
<span>unless your code will be maintained only by programmers who are</span>
<span>used to those characters, it&rsquo;s probably best to avoid them, because</span>
<span>programmers using English keyboards will have difficulty access‐</span>
<span>ing them.</span>
<h4>Operators</h4>
<span>Operators</span>
<span>&nbsp;are the mathematical, string, comparison, and logical commands such as</span>
<span>plus, minus, multiply, and divide. PHP looks a lot like plain arithmetic; for instance,</span>
<span>the following statement outputs 8:</span><br/>
<span>echo 6 + 2;</span><br/>
<span>Before moving on to learn what PHP can do for you, take a moment to learn about</span>
<span>the various operators it provides.</span>
<h6>Arithmetic operators</h6>
<span>Arithmetic operators do what you would expect. They are used to perform mathe‐</span>
<span>matics. You can use them for the main four operations (plus, minus, times, and</span>
<span>divide) as well as to find a modulus (the remainder after a division) and to increment</span>
<span>or decrement a value (see</span>
<span>Table 3-1</span>
<span>).</span><br/>
<span>Table 3-1. Arithmetic operators</span><br/>

<table class="tbl-left">
    <tr>
        <td>Operator</td>
        <td>Description</td>
        <td>Example</td>
    </tr>
    <tr>
        <td>+</td>
        <td>Additiontdspan>
        <td>$j+1</td>
    </tr>
    <tr>
        <td>-</td>
        <td>Subtraction</td>
        <td>$j-6</td>
    </tr>
    <tr>
        <td>*</td>
        <td>Multiplication</td>
        <td>$j*1</td>
    </tr>
    <tr>
        <td>/</td>
        <td>Division</td>
        <td>$j/4</td>
    </tr>
    <tr>
        <td>%</td>
        <td>Modulus (division remainder)</td>
        <td>$j%9</td>
    </tr>
    <tr>
        <td>++</td>
        <td>Increment</td>
        <td>++$j</td>
    </tr>
    <tr>
        <td>--</td>
        <td>Decrement</td>
        <td>--$j</td>
    </tr>
</table>

<h6>Assignment operators</h6>
<span>These operators are used to assign values to variables. They start with the very simple</span>
<span>=</span>
<span>and move on to</span>
<span>+=</span>
<span>,</span>
<span>-=</span>
<span>, and so on (see</span>
<span>Table 3-2</span>
<span>). The operator</span>
<span>+=</span>
<span>adds the value on</span>
<span>the right side to the variable on the left, instead of totally replacing the value on the</span>
<span>left. Thus, if</span>
<span>$count</span>
<span>starts with the value</span>
<span>5</span>
<span>, the statement</span><br/>
<span>$count += 1;</span><br/>
<span>sets</span>
<span>$count</span>
<span>to 6, just like the more familiar assignment statement:</span><br/>
<span>$count = $count + 1;</span><br/>
<span>Strings have their own operator, the period (</span>
<span>.</span>
<span>), detailed in the section</span>
<span>&ldquo;String concat‐</span>
<span>enation&rdquo; on page 49</span>
<span>.</span><br/>
<span>Table 3-2. Assignment operators</span><br/>

<table class="tbl-left">
    <tr>
        <td>Operator</td>
        <td>Example</td>
        <td>Equivalent to</td>
    </tr>
    <tr>
        <td>=</td>
        <td>$j=15</td>
        <td>$j = 15</td>
    </tr>
    <tr>
        <td>+=</td>
        <td>$j+=5</td>
        <td>$j = $j + 5</td>
    </tr>
    <tr>
        <td>-=</td>
        <td>$j-=3</td>
        <td>$j = $j - 3</td>
    </tr>
    <tr>
        <td>*=</td>
        <td>$j*=8</td>
        <td>$j = $j * 8</td>
    </tr>
    <tr>
        <td>/=</td>
        <td>$j/=16</td>
        <td>$j = $j / 16</td>
    </tr>
    <tr>
        <td>.=</td>
        <td>$j.=$k</td>
        <td>$j = $j . $k</td>
    </tr>
    <tr>
        <td>%=</td>
        <td>$j%=4</td>
        <td>$j = $j % 4</td>
    </tr>
</table>

<h6>Comparison operators</h6>
<span>Comparison operators are generally used inside a construct such as an</span>
<span>if</span>
<span>statement</span>
<span>in which you need to compare two items. For example, you may wish to know</span>
<span>whether a variable you have been incrementing has reached a specific value, or</span>
<span>whether another variable is less than a set value, and so on (see</span>
<span>Table 3-3</span>
<span>).</span><br/>
<span>Note the difference between</span>
<span>=</span>
<span>and</span>
<span>==</span>
<span>. The first is an assignment operator, and the</span>
<span>second is a comparison operator. Even more-advanced programmers can sometimes</span>
<span>transpose the two when coding hurriedly, so be careful.</span><br/>
<span>Table 3-3. Comparison operators</span><br/>

<table class="tbl-left">
    <tr>
        <td>Operator</td>
        <td>Description</td>
        <td>Example</td>
    </tr>
    <tr>
        <td>==</td>
        <td>Is equal to</td>
        <td>$j == 4</td>
    </tr>
    <tr>
        <td>!=</td>
        <td>Is not equal to</td>
        <td>$j != 21</td>
    </tr>
    <tr>
        <td>&gt;</td>
        <td>Is greater than</td>
        <td>$j &gt; 3</td>
    </tr>
    <tr>
        <td>&lt;</td>
        <td>Is less than</td>
        <td>$j &lt; 100</td>
    </tr>
    <tr>
        <td>&gt;=</td>
        <td>Is greater than or equal to</td>
        <td>$j &gt;= 15</td>
    </tr>
    <tr>
        <td>&lt;=</td>
        <td>Is less than or equal to</td>
        <td>$j &lt;= 8</td>
    </tr>
</table>



<h6>Logical operators</h6>
<span>If you haven&rsquo;t used them before, logical operators may at first seem a little daunting.</span>
<span>But just think of them the way you would use logic in English. For example, you</span>
<span>might say to yourself, &ldquo;If the time is later than 12 p.m. and earlier than 2 p.m., then</span>
<span>have lunch.&rdquo; In PHP, the code for this might look something like the following (using</span>
<span>military timing):</span><br/>
<span>if ($hour &gt; 12 &amp;&amp; $hour &lt; 14) dolunch();</span><br/>
<span>Here we have moved the set of instructions for actually going to lunch into a function</span>
<span>that we will have to create later called</span>
<span>dolunch</span>
<span>. The</span>
<span>then</span>
<span>of the statement is left out,</span>
<span>because it is implied and therefore unnecessary.</span><br/>
<span>As the previous example shows, you generally use a logical operator to combine the</span>
<span>results of two of the comparison operators shown in the previous section. A logical</span>
<span>operator can also be input to another logical operator: &ldquo;If the time is later than 12</span>
<span>p.m. and earlier than 2 p.m., or if the smell of a roast is permeating the hallway and</span>
<span>there are plates on the table.&rdquo; As a rule, if something has a</span>
<span>TRUE</span>
<span>or</span>
<span>FALSE</span>
<span>value, it can</span>
<span>be input to a logical operator. A logical operator takes two true-or-false inputs and</span>
<span>produces a true-or-false result.</span><br/>
<span>Table 3-4</span>
<span>shows the logical operators.</span><br/>
<span>Table 3-4. Logical operators</span><br/>

<table class="tbl-left">
    <tr>
        <td>Operator</td>
        <td>Description</td>
        <td>Example</td>
    </tr>
    <tr>
        <td>&amp;&amp;</td>
        <td>And</td>
        <td>$j == 3 &amp;&amp; $k == 2</td>
    </tr>
    <tr>
        <td>and</td>
        <td>Low-precedence and</td>
        <td>$j == 3 and $k == 2</td>
    </tr>
    <tr>
        <td>||</td>
        <td>Or</td>
        <td>$j &lt; 5 || $j &gt; 10</td>
    </tr>
    <tr>
        <td>or</td>
        <td>Low-precedence or</td>
        <td>$j &lt; 5 or $j &gt; 10</td>
    </tr>
    <tr>
        <td>!</td>
        <td>Not</td>
        <td>! ($j == $k)</td>
    </tr>
    <tr>
        <td>xor</td>
        <td>Exclusive or</td>
        <td>$j xor$k</td>
    </tr>
</table>

<span>Note that</span>
<span>&amp;&amp;</span>
<span>is usually interchangeable with</span>
<span>and</span>
<span>; the same is true for</span>
<span>||</span>
<span>and</span>
<span>or</span>
<span>. But</span>
<span>and</span>
<span>and</span>
<span>or</span>
<span>have a lower precedence, so in some cases, you may need extra parenthe‐</span>
<span>ses to force the required precedence. On the other hand, there are times when</span>
<span>only</span>
<span>and</span>
<span>or</span>
<span>or</span>
<span>are acceptable, as in the following statement, which uses an</span>
<span>or</span>
<span>operator:</span><br/>
<span>$html = file_get_contents($site)</span>
<span>or</span>
<span>die("Cannot download from $site");</span><br/>
<span>The most unusual of these operators is</span>
<span>xor</span>
<span>, which stands for</span>
<span>exclusive or</span>
<span>and returns</span>
<span>a</span>
<span>TRUE</span>
<span>value if either value is</span>
<span>TRUE</span>
<span>, but a</span>
<span>FALSE</span>
<span>value if both inputs are</span>
<span>TRUE</span>
<span>or both</span>
<span>inputs are</span>
<span>FALSE</span>
<span>. To understand this, imagine that you want to concoct your own</span>
<span>cleaner for household items. Ammonia makes a good cleaner, and so does bleach, so</span>
<span>you want your cleaner to have one of these. But the cleaner must not have both,</span>
<span>because the combination is hazardous. In PHP, you could represent this as follows:</span><br/>
<span>$ingredient = $ammonia xor $bleach;</span><br/>
<span>In the example, if either</span>
<span>$ammonia</span>
<span>or</span>
<span>$bleach</span>
<span>is</span>
<span>TRUE</span>
<span>,</span>
<span>$ingredient</span>
<span>will also be set to</span>
<span>TRUE</span>
<span>. But if both are</span>
<span>TRUE</span>
<span>or both are</span>
<span>FALSE</span>
<span>,</span>
<span>$ingredient</span>
<span>will be set to</span>
<span>FALSE</span>
<span>.</span>

<h4>Variable Assignment</h4>
<span>The syntax to assign a value to a variable is always</span>
<span>variable = value</span>
<span>. Or, to reassign the</span>
<span>value to another variable, it is</span>
<span>other variable = variable</span>
<span>.</span><br/>
<span>There are also a couple of other assignment operators that you will find useful. For</span>
<span>example, we&rsquo;ve already seen</span><br/>
<span>$x += 10;</span><br/>
<span>which tells the PHP parser to add the value on the right (in this instance, the value</span>
<span>10</span>
<span>) to the variable</span>
<span>$x</span>
<span>. Likewise, we could subtract as follows:</span><br/>
<span>$y -= 10;</span><br/>
<h6>Variable incrementing and decrementing</h6>
<span>Adding or subtracting 1 is such a common operation that PHP provides special oper</span>
<span>ators for it. You can use one of the following in place of the</span>
<span>+=</span>
<span>and</span>
<span>-=</span>
<span>operators:</span><br/>
<span>++$x;</span><br/>
<span>--$y;</span><br/>
<span>In conjunction with a test (an</span>
<span>if</span>
<span>statement), you could use the following code:</span><br/>
<span>if (++$x == 10) echo $x;</span><br/>
<span>This tells PHP to</span>
<span>first</span>
<span>increment the value of</span>
<span>$x</span>
<span>and then test whether it has the value</span>
<span>10</span>
<span>; if it does, output its value. But you can also require PHP to increment (or, in the</span>
<span>following example, decrement) a variable</span>
<span>after</span>
<span>it has tested the value, like this:</span><br/>
<span>if ($y-- == 0) echo $y;</span><br/>
<span>which gives a subtly different result. Suppose</span>
<span>$y</span>
<span>starts out as</span>
<span>0</span>
<span>before the statement is</span>
<span>executed. The comparison will return a</span>
<span>TRUE</span>
<span>result, but</span>
<span>$y</span>
<span>will be set to</span>
<span>&ndash;</span>
<span>1</span>
<span>after the</span>
<span>comparison is made. So what will the</span>
<span>echo</span>
<span>statement display:</span>
<span>0</span>
<span>or</span>
<span>&ndash;</span>
<span>1</span>
<span>? Try to guess,</span>
<span>and then try out the statement in a PHP processor to confirm. Because this combina‐</span>
<span>tion of statements is confusing, it should be taken as just an educational example and</span>
<span>not as a guide to good programming style.</span><br/>
<span>In short, whether a variable is incremented or decremented before or after testing</span>
<span>depends on whether the increment or decrement operator is placed before or after</span>
<span>the variable.</span><br/>
<span>By the way, the correct answer to the previous question is that the</span>
<span>echo</span>
<span>statement will</span>
<span>display the result</span>
<span>&ndash;</span>
<span>1</span>
<span>, because</span>
<span>$y</span>
<span>was decremented right after it was accessed in the</span>
<span>if</span>
<span>statement, and before the</span>
<span>echo</span>
<span>statement.</span><br/>
<h6>String concatenation</h6>
<span>String concatenation uses the period (</span>
<span>.</span>
<span>) to append one string of characters to</span>
<span>another. The simplest way to do this is as follows:</span><br/>
<span>echo "You have " . $msgs . " messages.";</span><br/>
<span>Assuming that the variable</span>
<span>$msgs</span>
<span>is set to the value</span>
<span>5</span>
<span>, the output from this line of</span>
<span>code will be the following:</span><br/>
<b>You have 5 messages.</b><br/>
<span>Just as you can add a value to a numeric variable with the</span>
<span>+=</span>
<span>operator, you can</span>
<span>append one string to another using</span>
<span>.=</span>
<span>, like this:</span><br/>
<span>$bulletin .= $newsflash;</span><br/>
<span>In this case, if</span>
<span>$bulletin</span>
<span>contains a news bulletin and</span>
<span>$newsflash</span>
<span>has a news flash,</span>
<span>the command appends the news flash to the news bulletin so that</span>
<span>$bulletin</span>
<span>now</span>
<span>comprises both strings of text.</span>
<h6>String types</h6>
<span>PHP supports two types of strings that are denoted by the type of quotation mark</span>
<span>that you use. If you wish to assign a literal string, preserving the exact contents, you</span>
<span>should use the single quotation mark (apostrophe), like this:</span><br/>
<span>$info = 'Preface variables with a $ like this: $variable';</span><br/>
<span>In this case, every character within the single-quoted string is assigned to</span>
<span>$info</span>
<span>. If</span>
<span>you had used double quotes, PHP would have attempted to evaluate</span>
<span>$variable</span>
<span>as a</span>
<span>variable.</span><br/>
<span>On the other hand, when you want to include the value of a variable inside a string,</span>
<span>you do so by using double-quoted strings:</span><br/>
<span>echo "This week $count people have viewed your profile";</span><br/>
<span>As you will realize, this syntax also offers a simpler form of concatenation in which</span>
<span>you don&rsquo;t need to use a period, or close and reopen quotes, to append one string to</span>
<span>another. This is called</span>
<span>&nbsp;variable substitution</span>
<span>, and you will notice some applications</span>
<span>using it extensively and others not using it at all.</span>
<h6>Escaping characters</h6>
<span>Sometimes a string needs to contain characters with special meanings that might be</span>
<span>interpreted incorrectly. For example, the following line of code will not work, because</span>
<span>the second quotation mark encountered in the word</span>
<span>spelling&rsquo;s</span>
<span>will tell the PHP parser</span>
<span>that the string end has been reached. Consequently, the rest of the line will be rejected</span>
<span>as an error:</span><br/>
<span>$text = 'My spelling's atroshus'; // Erroneous syntax</span><br/>
<span>To correct this, you can add a backslash directly before the offending quotation mark</span>
<span>to tell PHP to treat the character literally and not to interpret it:</span><br/>
<span>$text = 'My spelling\'s still atroshus';</span><br/>
<span>And you can perform this trick in almost all situations in which PHP would other‐</span>
<span>wise return an error by trying to interpret a character. For example, the following</span>
<span>double-quoted string will be correctly assigned:</span><br/>
<span>$text = "She wrote upon it, \"Return to sender\".";</span><br/>
<span>Additionally, you can use escape characters to insert various special characters into</span>
<span>strings such as tabs, newlines, and carriage returns. These are represented, as you</span>
<span>might guess, by</span>
<span>\t</span>
<span>,</span>
<span>\n</span>
<span>, and</span>
<span>\r</span>
<span>. Here is an example using tabs to lay out a heading; it</span>
<span>is included here merely to illustrate escapes, because in web pages there are always</span>
<span>better ways to do layout:</span><br/>
<span>$heading = "Date\tName\tPayment";</span><br/>
<span>These special backslash-preceded characters work only in double-quoted strings. In</span>
<span>single-quoted strings, the preceding string would be displayed with the ugly</span>
<span>\t</span>
<span>sequences instead of tabs. Within single-quoted strings, only the escaped apostrophe</span>
<span>(</span>
<span>\'</span>
<span>) and escaped backslash itself (</span>
<span>\\</span>
<span>) are recognized as escaped characters.</span>

<h4>Multiple-Line Commands</h4>
<span>There are times when you need to output quite a lot of text from PHP, and using sev‐</span>
<span>eral</span>
<span>echo</span>
<span>(or</span>
<span>print</span>
<span>) statements would be time-consuming and messy. To overcome</span>
<span>this, PHP offers two conveniences. The first is just to put multiple lines between</span>
<span>quotes, as in</span>
<span>Example 3-6</span>
<span>. Variables can also be assigned, as in</span>
<span>Example 3-7</span>
<span>.</span><br/>
<span>Example 3-6. A multiline string echo statement</span><br/>

<pre>
<code class="php">
&lt;?php
$author = "Steve Ballmer";

echo "Developers, Developers, developers, developers, developers,
developers, developers, developers, developers!

- $author.";
?&gt;
</code>
</pre>

<span>Example 3-7. A multiline string assignment</span>

<pre>
<code class="php">
&lt;?php
$author = "Bill Gates";

$text = "Measuring programming progress by lines of code is like

Measuring aircraft building progress by weight.

- $author.";
?&gt;
</code>
</pre>

<span>PHP also offers a multiline sequence using the</span>
<span>&lt;&lt;&lt;</span>
<span>operator&mdash;commonly referred to</span>
<span>as a</span>
<span>here-document</span>
<span>or</span>
<span>heredoc</span>
<span>&mdash;as a way of specifying a string literal, preserving the</span>
<span>line breaks and other whitespace (including indentation) in the text. Its use can be</span>
<span>seen in</span>
<span>Example 3-8</span>
<span>.</span><br/>
<span>Example 3-8. Alternative multiline echo statement</span><br/>

<pre>
<code class="php">
&lt;?php
$author = "Brian W. Kernighan";

echo &lt;&lt;&lt;_END
Debugging is twice as hard as writing the code in the first place.
Therefore, if you write the code as cleverly as possible, you are,
by definition, not smart enough to debug it.

- $author.
_END;
?&gt;
</code>
</pre>

<span>This code tells PHP to output everything between the two</span>
<span>_END</span>
<span>tags as if it were a</span>
<span>double-quoted string (except that quotes in a heredoc do not need to be escaped).</span>
<span>This means it&rsquo;s possible, for example, for a developer to write entire sections of</span>
<span>HTML directly into PHP code and then just replace specific dynamic parts with PHP</span>
<span>variables.</span><br/>
<span>It is important to remember that the closing</span>
<span>_END;</span>
<span>tag</span>
<span>must</span>
<span>appear right at the start</span>
<span>of a new line and it must be the</span>
<span>&nbsp;only</span>
<span>&nbsp;thing on that line&mdash;not even a comment is</span>
<span>allowed to be added after it (nor even a single space). Once you have closed a multi‐</span>
<span>line block, you are free to use the same tag name again.</span><br/>
<span>Remember: using the</span>
<span>&lt;&lt;&lt;_END..._END;</span>
<span>heredoc construct, you</span>
<span>don&rsquo;t have to add</span>
<span>\n</span>
<span>linefeed characters to send a linefeed&mdash;just</span>
<span>press Return and start a new line. Also, unlike either a double-</span>
<span>quote- or single-quote-delimited string, you are free to use all the</span>
<span>single and double quotes you like within a heredoc, without escap‐</span>
<span>ing them by preceding them with a slash (</span>
<span>\</span>
<span>).</span><br/>
<span>Example 3-9</span>
<span>shows how to use the same syntax to assign multiples lines to a variable.</span><br/>
<span>Example 3-9. A multiline string variable assignment</span><br/>

<pre>
<code class="php">
&lt;?php
$author = "Scott Adams";

$out = &lt;&lt;&lt;_END
Normal people believe that if it ain't broke, don't fix it.
Engineers believe that if it ain't broke, it doesn't have enough
features yet.

- $author.
_END;
?&gt;
</code>
</pre>

<span>The variable</span>
<span>$out</span>
<span>will then be populated with the contents between the two tags. If</span>
<span>you were appending, rather than assigning, you could also have used</span>
<span>.=</span>
<span>in place of</span>
<span>=</span>
<span>to append the string to</span>
<span>$out</span><br/>
<span>.</span>
<span>Be careful not to place a semicolon directly after the first occurrence of</span>
<span>_END</span>
<span>, as that</span>
<span>would terminate the multiline block before it had even started and cause a</span>
<span>Parse</span>
<span>error</span>
<span>message. The only place for the semicolon is after the terminating</span>
<span>_END</span>
<span>tag,</span>
<span>although it is safe to use semicolons within the block as normal text characters.</span><br/>
<span>By the way, the</span>
<span>_END</span>
<span>tag is simply one I chose for these examples because it is unlikely</span>
<span>to be used anywhere else in PHP code and is therefore unique. But you can use any</span>
<span>tag you like, such as</span>
<span>_SECTION1</span>
<span>or</span>
<span>_OUTPUT</span>
<span>and so on. Also, to help differentiate tags</span>
<span>such as this from variables or functions, the general practice is to preface them with</span>
<span>an underscore, but you don&rsquo;t have to use one if you choose not to.</span><br/>
<span>Laying out text over multiple lines is usually just a convenience to</span>
<span>make your PHP code easier to read, because once it is displayed in</span>
<span>a web page, HTML formatting rules take over and whitespace is</span>
<span>suppressed (but</span>
<span>$author</span>
<span>is still replaced with the variable&rsquo;s value).</span><br/>
<span>So, for example, if you load these multiline output examples into a</span>
<span>browser, they will</span>
<span>not</span>
<span>display over several lines, because all brows‐</span>
<span>ers treat newlines just like spaces. However, if you use the browser&rsquo;s</span>
<span>View Source feature, you will find that the newlines are correctly</span>
<span>placed, and the output does appear over several lines.</span>

<h4>Variable Typing</h4>
<span>PHP is a very loosely typed language. This means that variables do not have to be</span>
<span>declared before they are used, and that PHP always converts variables to the</span>
<span>&nbsp;type</span>
<span>required by their context when they are accessed.</span><br/>
<span>For example, you can create a multiple-digit number and extract the</span>
<span>n</span>
<span>th digit from it</span>
<span>simply by assuming it to be a string. In the following snippet of code, the numbers</span>
<span>12345 and 67890 are multiplied together, returning a result of 838102050, which is</span>
<span>then placed in the variable</span>
<span>$number</span>
<span>, as shown in</span>
<span>Example 3-10</span>
<span>.</span><br/>
<span>Example 3-10. Automatic conversion from a number to a string</span><br/>
<pre>
<code class="php">
&lt;?php
    $number = 12345 * 67890;
    echo substr($number, 3, 1);
?&gt;
</code>
</pre>
<span>At the point of the assignment,</span>
<span>$number</span>
<span>is a numeric variable. But on the second line,</span>
<span>a call is placed to the PHP function</span>
<span>substr</span>
<span>, which asks for one character to be</span>
<span>returned from</span>
<span>$number</span>
<span>, starting at the fourth position (remembering that PHP offsets</span>
<span>start from zero). To do this, PHP turns</span>
<span>$number</span>
<span>into a nine-character string, so that</span>
<span>substr</span>
<span>can access it and return the character, which in this case is 1.</span><br/>
<span>The same goes for turning a string into a number, and so on. In</span>
<span>Example 3-11</span>
<span>, the</span>
<span>variable</span>
<span>$pi</span>
<span>is set to a string value, which is then automatically turned into a floating-</span>
<span>point number in the third line by the equation for calculating a circle&rsquo;s area, which</span>
<span>outputs the value 78.5398175.</span><br/>
<span>Example 3-11. Automatically converting a string to a number</span><br/>

<pre>
<code class="php">
&lt;?php
$pi = "3.1415927";
$radius = 5;
echo $pi * ($radius * $radius);
?&gt;
</code>
</pre>

<span>In practice, what this all means is that you don&rsquo;t have to worry too much about your</span>
<span>variable types. Just assign them values that make sense to you, and PHP will convert</span>
<span>them if necessary. Then, when you want to retrieve values, just ask for them&mdash;for</span>
<span>example, with an</span>
<span>echo</span>
<span>statement.</span>
<h4>Constants</h4>
<span>Constants</span>
<span>&nbsp;are similar to variables, holding information to be accessed later, except</span>
<span>that they are what they sound like&mdash;constant. In other words, once you have defined</span>
<span>one, its value is set for the remainder of the program and cannot be altered.</span><br/>
<span>One example of a use for a constant is to hold the location of your server</span>
<span>root</span>
<span>(the</span>
<span>folder with the main files of your website). You would define such a constant like this:</span><br/>
<span>define("ROOT_LOCATION", "/usr/local/www/");</span><br/>
<span>Then, to read the contents of the variable, you just refer to it like a regular variable</span>
<span>(but it isn&rsquo;t preceded by a dollar sign):</span><br/>
<span>$directory = ROOT_LOCATION;</span><br/>
<span>Now, whenever you need to run your PHP code on a different server with a different</span>
<span>folder configuration, you have only a single line of code to change.</span><br/>
<span>The main two things you have to remember about constants are</span>
<span>that they must</span>
<span>not</span>
<span>be prefaced with a</span>
<span>$</span>
<span>(as with regular variables),</span>
<span>and that you can define them only using the</span>
<span>define</span>
<span>function.</span><br/>
<span>It is generally considered a good practice to use only uppercase for constant variable</span>
<span>names, especially if other people will also read your code.</span>

<h4>Predefined Constants</h4>
<span>PHP comes ready-made with dozens of predefined constants that you generally will</span>
<span>be unlikely to use as a beginner to PHP. However, there are a few&mdash;known as the</span>
<span>magic constants</span>
<span>&mdash;that you will find useful. The names of the magic constants always</span>
<span>have two underscores at the beginning and two at the end, so that you won&rsquo;t acciden‐</span>
<span>tally try to name one of your own constants with a name that is already taken. They</span>
<span>are detailed in</span>
<span>Table 3-5</span>
<span>. The concepts referred to in the table will be introduced in</span>
<span>future chapters.</span><br/>
<span>Table 3-5. PHP&rsquo;s magic constants</span><br/>

<span>Magic constant</span>
<span>Description</span>
<span>__LINE__</span>
<span>The current line number of the file.</span>
<span>__FILE__</span>
<span>The full path and filename of the file. If used inside an</span>
<span>include</span>
<span>, the name of the included file is</span>
<span>returned. In PHP 4.0.2,</span>
<span>__FILE__</span>
<span>always contains an absolute path with symbolic links resolved,</span>
<span>whereas in older versions it might contain a relative path under some circumstances.</span>
<span>__DIR__</span>
<span>The directory of the file. If used inside an</span>
<span>include</span>
<span>, the directory of the included file is returned. This</span>
<span>is equivalent to</span>
<span>dirname</span>
<span>(__FILE__)</span>
<span>. This directory name does not have a trailing slash unless it is</span>
<span>the root directory. (Added in PHP 5.3.0.)</span>
<span>__FUNCTION__</span>
<span>The function name. (Added in PHP 4.3.0.) As of PHP 5, returns the function name as it was declared</span>
<span>(case-sensitive). In PHP 4, its value is always lowercase.</span>
<span>__CLASS__</span>
<span>The class name. (Added in PHP 4.3.0.) As of PHP 5, returns the class name as it was declared (case-</span>
<span>sensitive). In PHP 4, its value is always lowercased.</span>
<span>__METHOD__</span>
<span>The class method name. (Added in PHP 5.0.0.) The method name is returned as it was declared (case-</span>
<span>sensitive).</span>
<span>__NAMESPACE__</span>
<span>The name of the current namespace (case-sensitive). This constant is defined at compile time. (Added in</span>
<span>PHP 5.3.0.)</span>

<span>One handy use of these variables is for debugging purposes, when you need to insert</span>
<span>a line of code to see whether the program flow reaches it:</span><br/>
<span>echo "This is line " . __LINE__ . " of file " . __FILE__;</span><br/>
<span>This causes the current program line in the current file (including the path) being</span>
<span>executed to be output to the web browser.</span>

<h4>The Difference Between the echo and print Commands</h4>
<span>So far, you have seen the</span>
<span>echo</span>
<span>command used in a number of different ways to output</span>
<span>text from the server to your browser. In some cases, a string literal has been output.</span>
<span>In others, strings have first been concatenated or variables have been evaluated. I&rsquo;ve</span>
<span>also shown output spread over multiple lines.</span>
<span>But there is also an alternative to</span>
<span>echo</span>
<span>that you can use:</span>
<span>print</span>
<span>. The two commands</span>
<span>are quite similar, but</span>
<span>print</span>
<span>is a function-like construct that takes a single parameter</span>
<span>and has a return value (which is always</span>
<span>1</span>
<span>), whereas</span>
<span>echo</span>
<span>is purely a PHP language</span>
<span>construct. Since both commands are constructs, neither requires parentheses.</span>
<span>By and large, the</span>
<span>echo</span>
<span>command will be a tad faster than</span>
<span>print</span>
<span>in general text out‐</span>
<span>put, because it doesn&rsquo;t set a return value. On the other hand, because it isn&rsquo;t imple‐</span>
<span>mented like a function,</span>
<span>echo</span>
<span>cannot be used as part of a more complex expression,</span>
<span>whereas</span>
<span>print</span>
<span>can. Here&rsquo;s an example to output whether the value of a variable is</span>
<span>TRUE</span>
<span>or</span>
<span>FALSE</span>
<span>using</span>
<span>print</span>
<span>, something you could not perform in the same manner</span>
<span>with</span>
<span>echo</span>
<span>, because it would display a</span>
<span>Parse error</span>
<span>message:</span>
<span>$b ? print "TRUE" : print "FALSE";</span>
<span>The question mark is simply a way of interrogating whether variable</span>
<span>$b</span>
<span>is</span>
<span>TRUE</span>
<span>or</span>
<span>FALSE</span>
<span>. Whichever command is on the left of the following colon is executed if</span>
<span>$b</span>
<span>is</span>
<span>TRUE</span>
<span>, whereas the command to the right is executed if</span>
<span>$b</span>
<span>is</span>
<span>FALSE</span>
<span>.</span>
<span>Generally, though, the examples in this book use</span>
<span>echo</span>
<span>, and I recommend that you do</span>
<span>so as well until you reach such a point in your PHP development that you discover</span>
<span>the need for using</span>
<span>print</span>
<span>.</span>
<h4>Functions</h4>
<span>Functions</span>
<span>are used to separate out sections of code that perform a particular task. For</span>
<span>example, maybe you often need to look up a date and return it in a certain format.</span>
<span>That would be a good example to turn into a function. The code doing it might be</span>
<span>only three lines long, but if you have to paste it into your program a dozen times,</span>
<span>you&rsquo;re making your program unnecessarily large and complex, unless you use a func‐</span>
<span>tion. And if you decide to change the data format later, putting it in a function means</span>
<span>having to change it in only one place.</span>
<span>Placing it into a function not only shortens your source code and makes it more read‐</span>
<span>able, but also adds extra functionality (pun intended), because functions can be</span>
<span>passed parameters to make them perform differently. They can also return values to</span>
<span>the calling code.</span>
<span>To create a function, declare it in the manner shown in</span>
<span>Example 3-12</span>
<span>.</span>
<span>Example 3-12. A simple function declaration</span>
<span>&lt;?php</span>
<span>function longdate($timestamp)</span>
<span>{</span>
<span>return date("l F jS Y", $timestamp);</span>
<span>}</span>
<span>?&gt;</span>
<span>This function takes a Unix timestamp (an integer number representing a date and</span>
<span>time based on the number of seconds since 00:00 a.m. on January 1, 1970) as its input</span>
<span>and then calls the PHP</span>
<span>date</span>
<span>function with the correct format string to return a date</span>
<span>in the format</span>
<span>&nbsp;Tuesday May 2nd 2017</span>
<span>. Any number of parameters can be passed</span>
<span>between the initial parentheses; we have chosen to accept just one. The curly braces</span>
<span>enclose all the code that is executed when you later call the function.</span>
<span>To output today&rsquo;s date using this function, place the following call in your code:</span>
<span>echo longdate(time());</span>
<span>This call uses the built-in PHP</span>
<span>time</span>
<span>function to fetch the current Unix timestamp</span>
<span>and passes it to the new</span>
<span>longdate</span>
<span>function, which then returns the appropriate string</span>
<span>to the</span>
<span>echo</span>
<span>command for display. If you need to print out the date 17 days ago, you</span>
<span>now just have to issue the following call:</span>
<span>echo longdate(time() - 17 * 24 * 60 * 60);</span>
<span>which passes to</span>
<span>longdate</span>
<span>the current Unix timestamp less the number of seconds</span>
<span>since 17 days ago (17 days &times; 24 hours &times; 60 minutes &times; 60 seconds).</span>
<span>Functions can also accept multiple parameters and return multiple results, using</span>
<span>techniques that I&rsquo;ll develop over the following chapters.</span>
<h4>Variable Scope</h4>
<span>If you have a very long program, it&rsquo;s quite possible that you could start to run out of</span>
<span>good variable names, but with PHP you can decide the</span>
<span>scope</span>
<span>of a variable. In other</span>
<span>words, you can, for example, tell it that you want the variable</span>
<span>$temp</span>
<span>to be used only</span>
<span>inside a particular function and to forget it was ever used when the function returns.</span>
<span>In fact, this is the default scope for PHP variables.</span>
<span>Alternatively, you could inform PHP that a variable is global in scope and thus can be</span>
<span>accessed by every other part of your program.</span>
<span>Local variables</span>
<span>Local variables</span>
<span>&nbsp;are variables that are created within, and can be accessed only by, a</span>
<span>function. They are generally temporary variables that are used to store partially pro‐</span>
<span>cessed results prior to the function&rsquo;s return.</span>
<span>One set of local variables is the list of arguments to a function. In the previous sec‐</span>
<span>tion, we defined a function that accepted a parameter named</span>
<span>$timestamp</span>
<span>. This is</span>
<span>meaningful only in the body of the function; you can&rsquo;t get or set its value outside the</span>
<span>function.</span>
<span>For another example of a local variable, take another look at the</span>
<span>longdate</span>
<span>function,</span>
<span>which is modified slightly in</span>
<span>Example 3-13</span>
<span>.</span>
<span>Example 3-13. An expanded version of the longdate function</span>
<span>&lt;?php</span>
<span>function longdate($timestamp)</span>
<span>{</span>
<span>$temp = date("l F jS Y", $timestamp);</span>
<span>return "The date is $temp";</span>
<span>}</span>
<span>?&gt;</span>
<span>Here we have assigned the value returned by the</span>
<span>date</span>
<span>function to the temporary vari‐</span>
<span>able</span>
<span>$temp</span>
<span>, which is then inserted into the string returned by the function. As soon as</span>
<span>the function returns, the value of</span>
<span>$temp</span>
<span>is cleared, as if it had never been used at all.</span>
<span>Now,</span>
<span>to</span>
<span>see</span>
<span>the</span>
<span>effects</span>
<span>of</span>
<span>variable</span>
<span>scope,</span>
<span>let&rsquo;s</span>
<span>look</span>
<span>at</span>
<span>some</span>
<span>similar</span>
<span>code</span>
<span>in</span>
<span>Example 3-14</span>
<span>. Here</span>
<span>$temp</span>
<span>has been created</span>
<span>before</span>
<span>we call the</span>
<span>longdate</span>
<span>function.</span>
<span>Example 3-14.</span>
<span>This attempt to access $temp in function longdate will fail</span>
<span>&lt;?php</span>
<span>$temp = "The date is ";</span>
<span>echo longdate(time());</span>
<span>function longdate($timestamp)</span>
<span>{</span>
<span>return $temp . date("l F jS Y", $timestamp);</span>
<span>}</span>
<span>?&gt;</span>
<span>However, because</span>
<span>$temp</span>
<span>was neither created within the</span>
<span>longdate</span>
<span>function nor passed</span>
<span>to it as a parameter,</span>
<span>longdate</span>
<span>cannot access it. Therefore, this code snippet outputs</span>
<span>only the date, not the preceding text. In fact, it will first display the error message</span>
<span>Notice: Undefined variable: temp</span>
<span>.</span>
<span>The reason for this is that, by default, variables created within a function are local to</span>
<span>that function, and variables created outside of any functions can be accessed only by</span>
<span>nonfunction code.</span>
<span>Some ways to repair</span>
<span>Example 3-14</span>
<span>appear in</span>
<span>Example 3-15</span>
<span>and</span>
<span>Example 3-16</span>
<span>.</span>
<span>Example 3-15. Rewriting to refer to $temp within its local scope</span>
<span>fixes the problem</span>
<span>&lt;?php</span>
<span>$temp = "The date is ";</span>
<span>echo $temp . longdate(time());</span>
<span>function longdate($timestamp)</span>
<span>{</span>
<span>return date("l F jS Y", $timestamp);</span>
<span>}</span>
<span>?&gt;</span>
<span>Example 3-15</span>
<span>&nbsp;moves the reference to</span>
<span>$temp</span>
<span>out of the function. The reference</span>
<span>appears in the same scope where the variable was defined.</span>
<span>Example 3-16. An alternative solution: passing $temp as an argument</span>
<span>&lt;?php</span>
<span>$temp = "The date is ";</span>
<span>echo longdate($temp, time());</span>
<span>function longdate($text, $timestamp)</span>
<span>{</span>
<span>return $text . date("l F jS Y", $timestamp);</span>
<span>}</span>
<span>?&gt;</span>
<span>The solution in</span>
<span>Example 3-16</span>
<span>passes</span>
<span>$temp</span>
<span>to the</span>
<span>longdate</span>
<span>function as an extra argu‐</span>
<span>ment.</span>
<span>longdate</span>
<span>reads it into a temporary variable that it creates called</span>
<span>$text</span>
<span>and out‐</span>
<span>puts the desired result.</span>
<span>Forgetting the scope of a variable is a common programming error,</span>
<span>so remembering how variable scope works will help you debug</span>
<span>some quite obscure problems. Suffice it to say that unless you have</span>
<span>declared a variable otherwise, its scope is limited to being local:</span>
<span>either to the current function, or to the code outside of any func‐</span>
<span>tions, depending on whether it was first created or accessed inside</span>
<span>or outside a function.</span>
<span>Global variables</span>
<span>There are cases when you need a variable to have</span>
<span>global</span>
<span>scope, because you want all</span>
<span>your code to be able to access it. Also, some data may be large and complex, and you</span>
<span>don&rsquo;t want to keep passing it as arguments to functions.</span>
<span>To declare a variable as having global scope, use the keyword</span>
<span>global</span>
<span>. Let&rsquo;s assume</span>
<span>that you have a way of logging your users into your website and want all your code to</span>
<span>know whether it is interacting with a logged-in user or a guest. One way to do this is</span>
<span>to create a global variable such as</span>
<span>$is_logged_in</span>
<span>:</span>
<span>global $is_logged_in;</span>
<span>Now your login function simply has to set that variable to</span>
<span>1</span>
<span>upon a successful login</span>
<span>attempt, or</span>
<span>0</span>
<span>upon its failure. Because the scope of the variable is global, every line of</span>
<span>code in your program can access it.</span>
<span>You should use global variables with caution, though. I recommend that you create</span>
<span>them only when you absolutely cannot find another way of achieving the result you</span>
<span>desire. In general, programs that are broken into small parts and segregated data are</span>
<span>less buggy and easier to maintain. If you have a thousand-line program (and some</span>
<span>day you will) in which you discover that a global variable has the wrong value at some</span>
<span>point, how long will it take you to find the code that set it incorrectly?</span>
<span>Also, if you have too many global variables, you run the risk of using one of those</span>
<span>names again locally, or at least thinking you have used it locally, when in fact it has</span>
<span>already been declared as global. All manner of strange bugs can arise from such situa‐</span>
<span>tions.</span>
<span>Sometimes I adopt the convention of making all global variable</span>
<span>names uppercase (just as it&rsquo;s recommended that constants should</span>
<span>be uppercase) so that I can see at a glance the scope of a variable.</span>
<span>Static variables</span>
<span>In the section</span>
<span>&ldquo;Local variables&rdquo; on page 57</span>
<span>, I mentioned that the value of the variable</span>
<span>is wiped out when the function ends. If a function runs many times, it starts with a</span>
<span>fresh copy of the variable and the previous setting has no effect.</span>
<span>Here&rsquo;s an interesting case. What if you have a local variable inside a function that you</span>
<span>don&rsquo;t want any other parts of your code to have access to, but you would also like to</span>
<span>keep its value for the next time the function is called? Why? Perhaps because you</span>
<span>want a counter to track how many times a function is called. The solution is to</span>
<span>declare a</span>
<span>static</span>
<span>variable, as shown in</span>
<span>Example 3-17</span>
<span>.</span>
<span>Example 3-17. A function using a static variable</span>
<span>&lt;?php</span>
<span>function test()</span>
<span>{</span>
<span>static $count = 0;</span>
<span>echo $count;</span>
<span>$count++;</span>
<span>}</span>
<span>?&gt;</span>
<span>Here the very first line of function</span>
<span>test</span>
<span>creates a static variable called</span>
<span>$count</span>
<span>and ini‐</span>
<span>tializes it to a value of</span>
<span>0</span>
<span>. The next line outputs the variable&rsquo;s value; the final one incre‐</span>
<span>ments it.</span>
<span>The next time the function is called, because</span>
<span>$count</span>
<span>has already been declared, the</span>
<span>first line of the function is skipped. Then the previously incremented value of</span>
<span>$count</span>
<span>is displayed before the variable is again incremented.</span>
<span>If you plan to use static variables, you should note that you cannot assign the result of</span>
<span>an expression in their definitions. They can be initialized only with predetermined</span>
<span>values (see</span>
<span>Example 3-18</span>
<span>).</span>
<span>Example 3-18. Allowed and disallowed static variable declarations</span>
<span>&lt;?php</span>
<span>static $int = 0; // Allowed</span>
<span>static $int = 1+2; // Disallowed (will produce a Parse error)</span>
<span>static $int = sqrt(144); // Disallowed</span>
<span>?&gt;</span>
<span>Superglobal variables</span>
<span>Starting with PHP 4.1.0, several predefined variables are available. These are known</span>
<span>as</span>
<span>superglobal variables</span>
<span>, which means that they are provided by the PHP environment</span>
<span>but are global within the program, accessible absolutely everywhere.</span>
<span>These superglobals contain lots of useful information about the currently running</span>
<span>program and its environment (see</span>
<span>&nbsp;Table 3-6</span>
<span>). They are structured as associative</span>
<span>arrays, a topic discussed in</span>
<span>Chapter 6</span>
<span>.</span>
<span>Table 3-6. PHP&rsquo;s superglobal variables</span>
<span>Superglobal name</span>
<span>Contents</span>
<span>$GLOBALS</span>
<span>All variables that are currently defined in the global scope of the script. The variable names are the keys</span>
<span>of the array.</span>
<span>$_SERVER</span>
<span>Information such as headers, paths, and script locations. The entries in this array are created by the web</span>
<span>server, and there is no guarantee that every web server will provide any or all of these.</span>
<span>Superglobal name</span>
<span>Contents</span>
<span>$_GET</span>
<span>Variables passed to the current script via the HTTP Get method.</span>
<span>$_POST</span>
<span>Variables passed to the current script via the HTTP Post method.</span>
<span>$_FILES</span>
<span>Items uploaded to the current script via the HTTP Post method.</span>
<span>$_COOKIE</span>
<span>Variables passed to the current script via HTTP cookies.</span>
<span>$_SESSION</span>
<span>Session variables available to the current script.</span>
<span>$_REQUEST</span>
<span>Contents of information passed from the browser; by default,</span>
<span>$_GET</span>
<span>,</span>
<span>$_POST</span>
<span>, and</span>
<span>$_COOKIE</span>
<span>.</span>
<span>$_ENV</span>
<span>Variables passed to the current script via the environment method.</span>
<span>All of the superglobals (except for</span>
<span>$GLOBALS</span>
<span>) are named with a single initial under‐</span>
<span>score and only capital letters; therefore, you should avoid naming your own variables</span>
<span>in this manner to avoid potential confusion.</span>
<span>To illustrate how you use them, let&rsquo;s look at a bit of information that many sites</span>
<span>employ. Among the many nuggets of information supplied by superglobal variables is</span>
<span>the URL of the page that referred the user to the current web page. This referring</span>
<span>page information can be accessed like this:</span>
<span>$came_from = $_SERVER['HTTP_REFERER'];</span>
<span>It&rsquo;s that simple. Oh, and if the user came straight to your web page, such as by typing</span>
<span>its URL directly into a browser,</span>
<span>$came_from</span>
<span>will be set to an empty string.</span>
<span>Superglobals and security</span>
<span>A word of caution is in order before you start using superglobal variables, because</span>
<span>they are often used by hackers trying to find exploits to break into your website.</span>
<span>What they do is load up</span>
<span>$_POST</span>
<span>,</span>
<span>$_GET</span>
<span>, or other superglobals with malicious code,</span>
<span>such as Unix or MySQL commands that can damage or display sensitive data if you</span>
<span>na&iuml;vely access them.</span>
<span>Therefore, you should always sanitize superglobals before using them. One way to do</span>
<span>this is via the PHP</span>
<span>htmlentities</span>
<span>function. It converts all characters into HTML enti‐</span>
<span>ties. For example, less-than and greater-than characters (</span>
<span>&lt;</span>
<span>and</span>
<span>&gt;</span>
<span>) are transformed</span>
<span>into the strings</span>
<span>&amp;lt;</span>
<span>and</span>
<span>&amp;gt;</span>
<span>so that they are rendered harmless, as are all quotes</span>
<span>and backslashes, and so on.</span>
<span>Therefore, here is a much better way to access</span>
<span>$_SERVER</span>
<span>(and other superglobals) is:</span>
<span>$came_from = htmlentities($_SERVER['HTTP_REFERER']);</span>
<span>Using the</span>
<span>htmlentities</span>
<span>function for sanitization is an important</span>
<span>practice in any circumstance where user or other third-party data is</span>
<span>being processed for output, not just with superglobals.</span>
<span>This chapter has provided you with a solid background in using PHP. In</span>
<span>Chapter 4</span>
<span>,</span>
<span>we&rsquo;ll start using what you&rsquo;ve learned to build expressions and control program flow&mdash;</span>
<span>in other words, do some actual programming.</span>
<span>But before moving on, I recommend that you test yourself with some (if not all) of</span>
<span>the following questions to ensure that you have fully digested the contents of this</span>
<span>chapter.</span>
<h3>Questions</h3>
<span>1.</span>
<span>What tag is used to cause PHP to start interpreting program code? And what is</span>
<span>the short form of the tag?</span>
<span>2.</span>
<span>What are the two types of comment tags?</span>
<span>3.</span>
<span>Which character must be placed at the end of every PHP statement?</span>
<span>4.</span>
<span>Which symbol is used to preface all PHP variables?</span>
<span>5.</span>
<span>What can a variable store?</span>
<span>6.</span>
<span>What is the difference between</span>
<span>$variable = 1</span>
<span>and</span>
<span>$variable == 1</span>
<span>?</span>
<span>7.</span>
<span>Why</span>
<span>do</span>
<span>you</span>
<span>suppose</span>
<span>that</span>
<span>an</span>
<span>underscore</span>
<span>is</span>
<span>allowed</span>
<span>in</span>
<span>variable</span>
<span>names</span>
<span>(</span>
<span>$current_user</span>
<span>), whereas hyphens are not (</span>
<span>$current-user</span>
<span>)?</span>
<span>8.</span>
<span>Are variable names case-sensitive?</span>
<span>9.</span>
<span>Can you use spaces in variable names?</span>
<span>10.</span>
<span>How do you convert one variable type to another (say, a string to a number)?</span>
<span>11.</span>
<span>What is the difference between</span>
<span>++$j</span>
<span>and</span>
<span>$j++</span>
<span>?</span>
<span>12.</span>
<span>Are the operators</span>
<span>&amp;&amp;</span>
<span>and</span>
<span>and</span>
<span>interchangeable?</span>
<span>13.</span>
<span>How can you create a multiline</span>
<span>echo</span>
<span>or assignment?</span>
<span>14.</span>
<span>Can you redefine a constant?</span>
<span>15.</span>
<span>How do you escape a quotation mark?</span>
<span>16.</span>
<span>What is the difference between the</span>
<span>echo</span>
<span>and</span>
<span>print</span>
<span>commands?</span>
<span>17.</span>
<span>What is the purpose of functions?</span>
<span>18.</span>
<span>How can you make a variable accessible to all parts of a PHP program?</span>
<span>19.</span>
<span>If you generate data within a function, what are a couple of ways to convey the</span>
<span>data to the rest of the program?</span>
<span>20.</span>
<span>What is the result of combining a string with a number?</span>
<span>See</span>
<span>Chapter 3 Answers</span>
<span>in</span>
<span>Appendix A</span>
<span>for the answers to these questions.</span>