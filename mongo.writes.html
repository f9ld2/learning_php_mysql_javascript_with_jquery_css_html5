---
layout: default
---

 <h1>Writes</h1>

 <div class="section">
  <h2 class="title">Updating Nested Objects</h2>

  <p class="para">
   Suppose we wish to change the name of a comment&apos;s author in this document:

   <div class="example-contents">
<div class="javascriptcode"><pre class="javascriptcode">{ 
    &quot;_id&quot; : ObjectId(&quot;4b06c282edb87a281e09dad9&quot;), 
    &quot;content&quot; : &quot;this is a blog post.&quot;,
    &quot;comments&quot; : 
    [
        {
            &quot;author&quot; : &quot;Mike&quot;,
            &quot;comment&quot; : &quot;I think that blah blah blah...&quot;,
        },
        {
            &quot;author&quot; : &quot;John&quot;,
            &quot;comment&quot; : &quot;I disagree.&quot;
        }
    ]
}</pre>
</div>
   </div>


   In order to change an inner field, we use $set (so that all of the other 
   fields are not removed!) with the index of comment to change:

   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$blog</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,&#xA0;array(</span><span style="color: #DD0000">&apos;$set&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;array(</span><span style="color: #DD0000">&quot;comments.1&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;array(</span><span style="color: #DD0000">&quot;author&quot;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&quot;Jim&quot;</span><span style="color: #007700">))));<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </p>
 </div>

 <div class="section">
  <h2 class="title">The Positional Operator</h2>
  <p class="para">
   The positional operator <em>$</em> is useful for updating objects 
   that are in arrays.  In the example above, for instance, suppose that we did
   not know the index of the comment that we needed to change, merely that we
   needed to change &quot;John&quot; to &quot;Jim&quot;.  We can use <em>$</em> to do so.
  </p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$blog</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">update</span><span style="color: #007700">(<br>&#xA0;&#xA0;&#xA0;&#xA0;array(</span><span style="color: #DD0000">&apos;comments.author&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&apos;John&apos;</span><span style="color: #007700">),&#xA0;<br>&#xA0;&#xA0;&#xA0;&#xA0;array(</span><span style="color: #DD0000">&apos;$set&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;array(</span><span style="color: #DD0000">&apos;comments.$.author&apos;&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #DD0000">&apos;Jim&apos;</span><span style="color: #007700">)));<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

 </div>

