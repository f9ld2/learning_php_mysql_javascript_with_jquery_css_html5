---
layout: default
---

   <h2 class="title">What References Do</h2>
   <p class="para">
    There are three basic operations performed using references:
    <a href="language.references.whatdo.html#language.references.whatdo.assign" class="link">assigning by
    reference</a>, <a href="language.references.whatdo.html#language.references.whatdo.pass" class="link">passing
    by reference</a>,
    and <a href="language.references.whatdo.html#language.references.whatdo.return" class="link">returning by
    reference</a>. This section will give an introduction to these
    operations, with links for further reading.
   </p>
   <div class="sect2" id="language.references.whatdo.assign">
    <h3 class="title">Assign By Reference</h3>
    <p class="para">
     In the first of these, PHP references allow you to make two
     variables refer to the same content. Meaning, when you do:
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$a&#xA0;</span><span style="color: #007700">=&amp;&#xA0;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
     it means that <var class="varname"><var class="varname">$a</var></var> and <var class="varname"><var class="varname">$b</var></var>
     point to the same content.
     <blockquote class="note"><p><strong class="note">Note</strong>: 
      </p><p class="para">
       <var class="varname"><var class="varname">$a</var></var> and <var class="varname"><var class="varname">$b</var></var> are completely
       equal here. <var class="varname"><var class="varname">$a</var></var> is not pointing to
       <var class="varname"><var class="varname">$b</var></var> or vice versa.
       <var class="varname"><var class="varname">$a</var></var> and <var class="varname"><var class="varname">$b</var></var> are pointing to the
       same place.
      </p>
     </blockquote></p>
    <p></p>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     </p><p class="para">
      If you assign, pass, or return an undefined variable by reference, 
      it will get created.
      <div class="example" id="example-291">
       <p><strong>Example #1 Using references with undefined variables</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&#xA0;</span><span style="color: #0000BB">foo</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">)&#xA0;{&#xA0;}<br><br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);&#xA0;</span><span style="color: #FF8000">//&#xA0;$a&#xA0;is&#xA0;&quot;created&quot;&#xA0;and&#xA0;assigned&#xA0;to&#xA0;null<br><br></span><span style="color: #0000BB">$b&#xA0;</span><span style="color: #007700">=&#xA0;array();<br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;b&apos;</span><span style="color: #007700">]);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;b&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$b</span><span style="color: #007700">));&#xA0;</span><span style="color: #FF8000">//&#xA0;bool(true)<br><br></span><span style="color: #0000BB">$c&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">StdClass</span><span style="color: #007700">;<br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">d</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">property_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;d&apos;</span><span style="color: #007700">));&#xA0;</span><span style="color: #FF8000">//&#xA0;bool(true)<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
    <p></p></blockquote>
    <p class="para">
     The same syntax can be used with functions that return
     references, and with the <em>new</em> operator (since PHP
     4.0.4 and before PHP 5.0.0):
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$foo&#xA0;</span><span style="color: #007700">=&amp;&#xA0;</span><span style="color: #0000BB">find_var</span><span style="color: #007700">(</span><span style="color: #0000BB">$bar</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
     Since PHP 5, <a href="language.oop5.basic.html#language.oop5.basic.new" class="link">new</a>
     returns a reference automatically, so
     using <em>=&amp;</em> in this context is deprecated and
     produces an <strong><code>E_DEPRECATED</code></strong> message in PHP 5.3 and
     later, and an <strong><code>E_STRICT</code></strong> message in earlier versions.
     As of PHP 7.0 it is syntactically invalid.
     (Technically, the difference is that, in PHP 5, object variables, much like
     resources, are a mere pointer to the actual object data, so these object
     references are not &quot;references&quot; in the same sense used before (aliases).
     For more information, see <a href="language.oop5.references.html" class="link">Objects
     and references</a>.)
    </p>
    <div class="warning"><strong class="warning">Warning</strong>
     <p class="para">
      If you assign a reference to a variable declared <em>global</em>
      inside a function, the reference will be visible only inside the function.
      You can avoid this by using the <var class="varname"><var class="varname"><a href="reserved.variables.globals.html" class="classname">$GLOBALS</a></var></var> array.
      <div class="example" id="example-292">
       <p><strong>Example #2 Referencing global variables inside functions</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$var1&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&quot;Example&#xA0;variable&quot;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$var2&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&quot;&quot;</span><span style="color: #007700">;<br><br>function&#xA0;</span><span style="color: #0000BB">global_references</span><span style="color: #007700">(</span><span style="color: #0000BB">$use_globals</span><span style="color: #007700">)<br>{<br>&#xA0;&#xA0;&#xA0;&#xA0;global&#xA0;</span><span style="color: #0000BB">$var1</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$var2</span><span style="color: #007700">;<br>&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(!</span><span style="color: #0000BB">$use_globals</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$var2&#xA0;</span><span style="color: #007700">=&amp;&#xA0;</span><span style="color: #0000BB">$var1</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;visible&#xA0;only&#xA0;inside&#xA0;the&#xA0;function<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">}&#xA0;else&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">&quot;var2&quot;</span><span style="color: #007700">]&#xA0;=&amp;&#xA0;</span><span style="color: #0000BB">$var1</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;visible&#xA0;also&#xA0;in&#xA0;global&#xA0;context<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #007700">}<br>}<br><br></span><span style="color: #0000BB">global_references</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;var2&#xA0;is&#xA0;set&#xA0;to&#xA0;&apos;</span><span style="color: #0000BB">$var2</span><span style="color: #DD0000">&apos;\n&quot;</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;var2&#xA0;is&#xA0;set&#xA0;to&#xA0;&apos;&apos;<br></span><span style="color: #0000BB">global_references</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;var2&#xA0;is&#xA0;set&#xA0;to&#xA0;&apos;</span><span style="color: #0000BB">$var2</span><span style="color: #DD0000">&apos;\n&quot;</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;var2&#xA0;is&#xA0;set&#xA0;to&#xA0;&apos;Example&#xA0;variable&apos;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
      Think about <em>global $var;</em> as a shortcut to <em>$var
        =&amp; $GLOBALS[&apos;var&apos;];</em>. Thus assigning another reference
      to <em>$var</em> only changes the local variable&apos;s reference.
     </p>
    </div>
    <blockquote class="note"><p><strong class="note">Note</strong>: 
     </p><p class="para">
      If you assign a value to a variable with references in a 
      <a href="control-structures.foreach.html" class="link">foreach</a> statement, the references are modified too.
      <div class="example" id="example-293">
       <p><strong>Example #3 References and foreach statement</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$ref&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$row&#xA0;</span><span style="color: #007700">=&amp;&#xA0;</span><span style="color: #0000BB">$ref</span><span style="color: #007700">;<br>foreach&#xA0;(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">3</span><span style="color: #007700">)&#xA0;as&#xA0;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #FF8000">//&#xA0;do&#xA0;something<br></span><span style="color: #007700">}<br>echo&#xA0;</span><span style="color: #0000BB">$ref</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;3&#xA0;-&#xA0;last&#xA0;element&#xA0;of&#xA0;the&#xA0;iterated&#xA0;array<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
    <p></p></blockquote>
    <p class="para">
     While not being strictly an assignment by reference, expressions created
     with the language construct
     <a href="function.array.html" class="link"><em>array()</em></a> can also
     behave as such by prefixing <em>&amp;</em> to the array element
     to add. Example:
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$a&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$b&#xA0;</span><span style="color: #007700">=&#xA0;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">3</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$arr&#xA0;</span><span style="color: #007700">=&#xA0;array(&amp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&#xA0;&amp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&#xA0;&amp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br></span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]++;&#xA0;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]++;&#xA0;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]++;<br></span><span style="color: #FF8000">/*&#xA0;$a&#xA0;==&#xA0;2,&#xA0;$b&#xA0;==&#xA0;array(3,&#xA0;4);&#xA0;*/<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
    <p class="para">
     Note, however, that references inside arrays are potentially dangerous.
     Doing a normal (not by reference) assignment with a reference on the
     right side does not turn the left side into a reference, but references
     inside arrays are preserved in these normal assignments. This also applies
     to function calls where the array is passed by value. Example:
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&#xA0;Assignment&#xA0;of&#xA0;scalar&#xA0;variables&#xA0;*/<br></span><span style="color: #0000BB">$a&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$b&#xA0;</span><span style="color: #007700">=&amp;&#xA0;</span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$c&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$c&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">7</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//$c&#xA0;is&#xA0;not&#xA0;a&#xA0;reference;&#xA0;no&#xA0;change&#xA0;to&#xA0;$a&#xA0;or&#xA0;$b<br><br>/*&#xA0;Assignment&#xA0;of&#xA0;array&#xA0;variables&#xA0;*/<br></span><span style="color: #0000BB">$arr&#xA0;</span><span style="color: #007700">=&#xA0;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$a&#xA0;</span><span style="color: #007700">=&amp;&#xA0;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];&#xA0;</span><span style="color: #FF8000">//$a&#xA0;and&#xA0;$arr[0]&#xA0;are&#xA0;in&#xA0;the&#xA0;same&#xA0;reference&#xA0;set<br></span><span style="color: #0000BB">$arr2&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//not&#xA0;an&#xA0;assignment-by-reference!<br></span><span style="color: #0000BB">$arr2</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]++;<br></span><span style="color: #FF8000">/*&#xA0;$a&#xA0;==&#xA0;2,&#xA0;$arr&#xA0;==&#xA0;array(2)&#xA0;*/<br>/*&#xA0;The&#xA0;contents&#xA0;of&#xA0;$arr&#xA0;are&#xA0;changed&#xA0;even&#xA0;though&#xA0;it&apos;s&#xA0;not&#xA0;a&#xA0;reference!&#xA0;*/<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
     In other words, the reference behavior of arrays is defined in an
     element-by-element basis; the reference behavior of individual elements
     is dissociated from the reference status of the array container.
    </p>
   </div>
   <div class="sect2" id="language.references.whatdo.pass">
    <h3 class="title">Pass By Reference</h3>
    <p class="para">
     The second thing references do is to pass variables by
     reference. This is done by making a local variable in a function
     and a variable in the calling scope referencing the same
     content. Example:
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">function&#xA0;</span><span style="color: #0000BB">foo</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">)<br>{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$var</span><span style="color: #007700">++;<br>}<br><br></span><span style="color: #0000BB">$a</span><span style="color: #007700">=</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
     will make <var class="varname"><var class="varname">$a</var></var> to be 6. This happens because in
     the function <var class="varname"><var class="varname">foo</var></var> the variable
     <var class="varname"><var class="varname">$var</var></var> refers to the same content as
     <var class="varname"><var class="varname">$a</var></var>. For more information on this, read
     the <a href="language.references.pass.html" class="link">passing by
       reference</a> section.
    </p>
   </div>
   <div class="sect2" id="language.references.whatdo.return">
    <h3 class="title">Return By Reference</h3>
    <p class="para">
     The third thing references can do is <a href="language.references.return.html" class="link">return by reference</a>.
    </p>
   </div>
  