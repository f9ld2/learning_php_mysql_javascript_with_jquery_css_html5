---
layout: default
---

  <h2 class="title">Using <span class="function"><a href="function.imagecopymerge.html" class="function">imagecopymerge()</a></span> to create a translucent watermark</h2>
  <p class="para">
   <div class="example" id="example-3486">
    <p><strong>Example #1 Using <span class="function"><a href="function.imagecopymerge.html" class="function">imagecopymerge()</a></span> to create a translucent watermark</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&#xA0;Load&#xA0;the&#xA0;stamp&#xA0;and&#xA0;the&#xA0;photo&#xA0;to&#xA0;apply&#xA0;the&#xA0;watermark&#xA0;to<br></span><span style="color: #0000BB">$im&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">imagecreatefromjpeg</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;photo.jpeg&apos;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;First&#xA0;we&#xA0;create&#xA0;our&#xA0;stamp&#xA0;image&#xA0;manually&#xA0;from&#xA0;GD<br></span><span style="color: #0000BB">$stamp&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">imagecreatetruecolor</span><span style="color: #007700">(</span><span style="color: #0000BB">100</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">70</span><span style="color: #007700">);<br></span><span style="color: #0000BB">imagefilledrectangle</span><span style="color: #007700">(</span><span style="color: #0000BB">$stamp</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">99</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">69</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0x0000FF</span><span style="color: #007700">);<br></span><span style="color: #0000BB">imagefilledrectangle</span><span style="color: #007700">(</span><span style="color: #0000BB">$stamp</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">9</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">9</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">90</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">60</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0xFFFFFF</span><span style="color: #007700">);<br></span><span style="color: #0000BB">imagestring</span><span style="color: #007700">(</span><span style="color: #0000BB">$stamp</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">20</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">20</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;libGD&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0x0000FF</span><span style="color: #007700">);<br></span><span style="color: #0000BB">imagestring</span><span style="color: #007700">(</span><span style="color: #0000BB">$stamp</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">20</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">40</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;(c)&#xA0;2007-9&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0x0000FF</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Set&#xA0;the&#xA0;margins&#xA0;for&#xA0;the&#xA0;stamp&#xA0;and&#xA0;get&#xA0;the&#xA0;height/width&#xA0;of&#xA0;the&#xA0;stamp&#xA0;image<br></span><span style="color: #0000BB">$marge_right&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">10</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$marge_bottom&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">10</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$sx&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">imagesx</span><span style="color: #007700">(</span><span style="color: #0000BB">$stamp</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$sy&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">imagesy</span><span style="color: #007700">(</span><span style="color: #0000BB">$stamp</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Merge&#xA0;the&#xA0;stamp&#xA0;onto&#xA0;our&#xA0;photo&#xA0;with&#xA0;an&#xA0;opacity&#xA0;of&#xA0;50%<br></span><span style="color: #0000BB">imagecopymerge</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$stamp</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">imagesx</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">)&#xA0;-&#xA0;</span><span style="color: #0000BB">$sx&#xA0;</span><span style="color: #007700">-&#xA0;</span><span style="color: #0000BB">$marge_right</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">imagesy</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">)&#xA0;-&#xA0;</span><span style="color: #0000BB">$sy&#xA0;</span><span style="color: #007700">-&#xA0;</span><span style="color: #0000BB">$marge_bottom</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">imagesx</span><span style="color: #007700">(</span><span style="color: #0000BB">$stamp</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">imagesy</span><span style="color: #007700">(</span><span style="color: #0000BB">$stamp</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">50</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Save&#xA0;the&#xA0;image&#xA0;to&#xA0;file&#xA0;and&#xA0;free&#xA0;memory<br></span><span style="color: #0000BB">imagepng</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;photo_stamp.png&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="mediaobject">
     
     <div class="imageobject">
      <img src="images/21009b70229598c6a80eef8b45bf282b-watermark-merged.png" alt="Using imagecopymerge() to create a translucent watermark" width="320" height="240">
     </div>
    </div>
   </div>
   This example uses <span class="function"><a href="function.imagecopymerge.html" class="function">imagecopymerge()</a></span> to merge the stamp
   with our original image. Using this we can set the opacity of our stamp - 
   in our example we&apos;ve set it to 50% opacity. In practice this would be useful 
   in copyright protection as semi-transparent watermarks are hard to remove 
   yet allow viewers to see the image.
  </p>
 