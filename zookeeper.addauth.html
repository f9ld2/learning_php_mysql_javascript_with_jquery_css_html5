---
layout: default
---

 <div class="refnamediv">
  <h1 class="refname">Zookeeper::addAuth</h1>
  <p class="verinfo">(PECL zookeeper &gt;= 0.1.0)</p><p class="refpurpose"><span class="refname">Zookeeper::addAuth</span> &#x2014; <span class="dc-title">Specify application credentials.</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-zookeeper.addauth-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> <span class="methodname"><strong>Zookeeper::addAuth</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$scheme</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$cert</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$completion_cb</code><span class="initializer"> = null</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   The application calls this function to specify its credentials for purposes of authentication. The server will use the security provider specified by the scheme parameter to authenticate the client connection. If the authentication request has failed:
    - the server connection is dropped.
    - the watcher is called with the ZOO_AUTH_FAILED_STATE value as the state parameter.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-zookeeper.addauth-parameters">
  <h3 class="title">Parameters</h3>
  <dl>

   
    <dt>
<code class="parameter">scheme</code></dt>

    <dd>

     <p class="para">
      The id of authentication scheme. Natively supported: &quot;digest&quot; password-based authentication
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">cert</code></dt>

    <dd>

     <p class="para">
      Application credentials. The actual value depends on the scheme.
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">completion_cb</code></dt>

    <dd>

     <p class="para">
      The routine to invoke when the request completes. One of the following result codes may be passed into the completion callback:
      - ZOK operation completed successfully
      - ZAUTHFAILED authentication failed
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-zookeeper.addauth-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-zookeeper.addauth-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   This method emits PHP error/warning when parameters count or types are wrong or operation fails.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-zookeeper.addauth-examples">
  <h3 class="title">Examples</h3>
  <div class="example" id="example-5256">
   <p><strong>Example #1 <span class="methodname"><strong>Zookeeper::addAuth()</strong></span> example</strong></p>
   <div class="example-contents"><p>
     Add auth before requesting node value.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$zookeeper&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">Zookeeper</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;locahost:2181&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$path&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;/path/to/node&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$value&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&apos;nodevalue&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$zookeeper</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set</span><span style="color: #007700">(</span><span style="color: #0000BB">$path</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$zookeeper</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addAuth</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;digest&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;user0:passwd0&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$r&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">$zookeeper</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">$path</span><span style="color: #007700">);<br>if&#xA0;(</span><span style="color: #0000BB">$r</span><span style="color: #007700">)<br>&#xA0;&#xA0;echo&#xA0;</span><span style="color: #0000BB">$r</span><span style="color: #007700">;<br>else<br>&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&apos;ERR&apos;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>The above example will output:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
nodevalue
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-zookeeper.addauth-seealso">
  <h3 class="title">See Also</h3>
  <ul class="simplelist">
   <li class="member"><span class="methodname"><a href="zookeeper.create.html" class="methodname" rel="rdfs-seeAlso">Zookeeper::create()</a> - Create a node synchronously.</span></li>
   <li class="member"><span class="methodname"><a href="zookeeper.setacl.html" class="methodname" rel="rdfs-seeAlso">Zookeeper::setAcl()</a> - Sets the acl associated with a node synchronously.</span></li>
   <li class="member"><span class="methodname"><a href="zookeeper.getacl.html" class="methodname" rel="rdfs-seeAlso">Zookeeper::getAcl()</a> - Gets the acl associated with a node synchronously.</span></li>
   <li class="member"><a href="class.zookeeper.html#zookeeper.class.constants.states" class="link">ZooKeeper States</a></li>
  </ul>
 </div>


