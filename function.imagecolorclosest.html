---
layout: default
---

 <div class="refnamediv">
  <h1 class="refname">imagecolorclosest</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">imagecolorclosest</span> &#x2014; <span class="dc-title">Get the index of the closest color to the specified color</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imagecolorclosest-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>imagecolorclosest</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$image</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$red</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$green</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$blue</code></span>
   )</div>

  <p class="para rdfs-comment">
   Returns the index of the color in the palette of the image which
   is &quot;closest&quot; to the specified <acronym title="Red-Green-Blue">RGB</acronym> value.
  </p>
  <p class="para">
   The &quot;distance&quot; between the desired color and each color in the
   palette is calculated as if the <acronym title="Red-Green-Blue">RGB</acronym> values
   represented points in three-dimensional space.
  </p>
  <p class="para">If you created the image from a file, only colors used in the image are resolved. Colors present only in the palette are not resolved.</p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imagecolorclosest-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>
<code class="parameter">
image</code></dt>
<dd>
<p class="para">An image resource, returned by one of the image creation functions,
such as <span class="function"><a href="function.imagecreatetruecolor.html" class="function">imagecreatetruecolor()</a></span>.</p></dd>

    
     <dt>
<code class="parameter">red</code></dt>

     <dd>

      <p class="para">Value of red component.</p>
     </dd>

    
    
     <dt>
<code class="parameter">green</code></dt>

     <dd>

      <p class="para">Value of green component.</p>
     </dd>

    
    
     <dt>
<code class="parameter">blue</code></dt>

     <dd>

      <p class="para">Value of blue component.</p>
     </dd>

    
   </dl>

   The colors parameters are integers between 0 and 255 or hexadecimals
   between 0x00 and 0xFF.
  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imagecolorclosest-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the index of the closest color, in the palette of the image, to
   the specified one
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.imagecolorclosest-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-3508">
    <p><strong>Example #1 Search for a set of colors in an image</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&#xA0;Start&#xA0;with&#xA0;an&#xA0;image&#xA0;and&#xA0;convert&#xA0;it&#xA0;to&#xA0;a&#xA0;palette-based&#xA0;image<br></span><span style="color: #0000BB">$im&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">imagecreatefrompng</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;figures/imagecolorclosest.png&apos;</span><span style="color: #007700">);<br></span><span style="color: #0000BB">imagetruecolortopalette</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">false</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">255</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;Search&#xA0;colors&#xA0;(RGB)<br></span><span style="color: #0000BB">$colors&#xA0;</span><span style="color: #007700">=&#xA0;array(<br>&#xA0;&#xA0;&#xA0;&#xA0;array(</span><span style="color: #0000BB">254</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">145</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">154</span><span style="color: #007700">),<br>&#xA0;&#xA0;&#xA0;&#xA0;array(</span><span style="color: #0000BB">153</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">145</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">188</span><span style="color: #007700">),<br>&#xA0;&#xA0;&#xA0;&#xA0;array(</span><span style="color: #0000BB">153</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">90</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">145</span><span style="color: #007700">),<br>&#xA0;&#xA0;&#xA0;&#xA0;array(</span><span style="color: #0000BB">255</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">137</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">92</span><span style="color: #007700">)<br>);<br><br></span><span style="color: #FF8000">//&#xA0;Loop&#xA0;through&#xA0;each&#xA0;search&#xA0;and&#xA0;find&#xA0;the&#xA0;closest&#xA0;color&#xA0;in&#xA0;the&#xA0;palette.<br>//&#xA0;Return&#xA0;the&#xA0;search&#xA0;number,&#xA0;the&#xA0;search&#xA0;RGB&#xA0;and&#xA0;the&#xA0;converted&#xA0;RGB&#xA0;match<br></span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$colors&#xA0;</span><span style="color: #007700">as&#xA0;</span><span style="color: #0000BB">$id&#xA0;</span><span style="color: #007700">=&gt;&#xA0;</span><span style="color: #0000BB">$rgb</span><span style="color: #007700">)<br>{<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$result&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">imagecolorclosest</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$rgb</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">$rgb</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">],&#xA0;</span><span style="color: #0000BB">$rgb</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$result&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">imagecolorsforindex</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #0000BB">$result&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&quot;(</span><span style="color: #007700">{</span><span style="color: #0000BB">$result</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;red&apos;</span><span style="color: #007700">]}</span><span style="color: #DD0000">,&#xA0;</span><span style="color: #007700">{</span><span style="color: #0000BB">$result</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;green&apos;</span><span style="color: #007700">]}</span><span style="color: #DD0000">,&#xA0;</span><span style="color: #007700">{</span><span style="color: #0000BB">$result</span><span style="color: #007700">[</span><span style="color: #DD0000">&apos;blue&apos;</span><span style="color: #007700">]}</span><span style="color: #DD0000">)&quot;</span><span style="color: #007700">;<br><br>&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;#</span><span style="color: #0000BB">$id</span><span style="color: #DD0000">:&#xA0;Search&#xA0;(</span><span style="color: #0000BB">$rgb</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]</span><span style="color: #DD0000">,&#xA0;</span><span style="color: #0000BB">$rgb</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]</span><span style="color: #DD0000">,&#xA0;</span><span style="color: #0000BB">$rgb</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]</span><span style="color: #DD0000">);&#xA0;Closest&#xA0;match:&#xA0;</span><span style="color: #0000BB">$result</span><span style="color: #DD0000">.\n&quot;</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #0000BB">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
#0: Search (254, 145, 154); Closest match: (252, 150, 148).
#1: Search (153, 145, 188); Closest match: (148, 150, 196).
#2: Search (153, 90, 145); Closest match: (148, 90, 156).
#3: Search (255, 137, 92); Closest match: (252, 150, 92).
</pre></div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.imagecolorclosest-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.imagecolorexact.html" class="function" rel="rdfs-seeAlso">imagecolorexact()</a> - Get the index of the specified color</span></li>
    <li class="member"><span class="function"><a href="function.imagecolorclosestalpha.html" class="function" rel="rdfs-seeAlso">imagecolorclosestalpha()</a> - Get the index of the closest color to the specified color + alpha</span></li>
    <li class="member"><span class="function"><a href="function.imagecolorclosesthwb.html" class="function" rel="rdfs-seeAlso">imagecolorclosesthwb()</a> - Get the index of the color which has the hue, white and blackness</span></li>
   </ul>
  </p>
 </div>

