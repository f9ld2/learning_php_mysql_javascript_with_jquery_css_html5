---
layout: default
---

 <h1>Examples</h1>

 <p class="para">
  This example opens a temporary file and writes a test string 
  to it, then it prints out the content of this file twice.
 </p>
 <div class="example" id="example-878">
  <p><strong>Example #1 Small Zlib Example</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$filename&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">tempnam</span><span style="color: #007700">(</span><span style="color: #DD0000">&apos;/tmp&apos;</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&apos;zlibtest&apos;</span><span style="color: #007700">)&#xA0;.&#xA0;</span><span style="color: #DD0000">&apos;.gz&apos;</span><span style="color: #007700">;<br>echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;html&gt;\n&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;pre&gt;\n&quot;</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$s&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #DD0000">&quot;Only&#xA0;a&#xA0;test,&#xA0;test,&#xA0;test,&#xA0;test,&#xA0;test,&#xA0;test,&#xA0;test,&#xA0;test!\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&#xA0;open&#xA0;file&#xA0;for&#xA0;writing&#xA0;with&#xA0;maximum&#xA0;compression<br></span><span style="color: #0000BB">$zp&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">gzopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;w9&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;write&#xA0;string&#xA0;to&#xA0;file<br></span><span style="color: #0000BB">gzwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$zp</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$s</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;close&#xA0;file<br></span><span style="color: #0000BB">gzclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$zp</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;open&#xA0;file&#xA0;for&#xA0;reading<br></span><span style="color: #0000BB">$zp&#xA0;</span><span style="color: #007700">=&#xA0;</span><span style="color: #0000BB">gzopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">,&#xA0;</span><span style="color: #DD0000">&quot;r&quot;</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;read&#xA0;3&#xA0;char<br></span><span style="color: #007700">echo&#xA0;</span><span style="color: #0000BB">gzread</span><span style="color: #007700">(</span><span style="color: #0000BB">$zp</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">3</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&#xA0;output&#xA0;until&#xA0;end&#xA0;of&#xA0;the&#xA0;file&#xA0;and&#xA0;close&#xA0;it.<br></span><span style="color: #0000BB">gzpassthru</span><span style="color: #007700">(</span><span style="color: #0000BB">$zp</span><span style="color: #007700">);<br></span><span style="color: #0000BB">gzclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$zp</span><span style="color: #007700">);<br><br>echo&#xA0;</span><span style="color: #DD0000">&quot;\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&#xA0;open&#xA0;file&#xA0;and&#xA0;print&#xA0;content&#xA0;(the&#xA0;2nd&#xA0;time).<br></span><span style="color: #007700">if&#xA0;(</span><span style="color: #0000BB">readgzfile</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">)&#xA0;!=&#xA0;</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$s</span><span style="color: #007700">))&#xA0;{<br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;echo&#xA0;</span><span style="color: #DD0000">&quot;Error&#xA0;with&#xA0;zlib&#xA0;functions!&quot;</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">unlink</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;&lt;/pre&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

 </div>
 <div class="example" id="example-879">
  <p><strong>Example #2 Working with the incremental compression and decompression API as of PHP 7.0.0</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
//&#xA0;Perform&#xA0;GZIP&#xA0;compression:<br>$deflateContext&#xA0;=&#xA0;deflate_init(ZLIB_ENCODING_GZIP);<br>$compressed&#xA0;=&#xA0;deflate_add($deflateContext,&#xA0;&quot;Data&#xA0;to&#xA0;compress&quot;,&#xA0;ZLIB_NO_FLUSH);<br>$compressed&#xA0;.=&#xA0;deflate_add($deflateContext,&#xA0;&quot;,&#xA0;more&#xA0;data&quot;,&#xA0;ZLIB_NO_FLUSH);<br>$compressed&#xA0;.=&#xA0;deflate_add($deflateContext,&#xA0;&quot;,&#xA0;and&#xA0;even&#xA0;more&#xA0;data!&quot;,&#xA0;ZLIB_FINISH);?&gt;<br><br>//&#xA0;Perform&#xA0;GZIP&#xA0;decompression:<br>$inflateContext&#xA0;=&#xA0;inflate_init(ZLIB_ENCODING_GZIP);<br>$uncompressed&#xA0;=&#xA0;inflate_add($inflateContext,&#xA0;$compressed,&#xA0;ZLIB_NO_FLUSH);<br>$uncompressed&#xA0;.=&#xA0;inflate_add($inflateContext,&#xA0;NULL,&#xA0;ZLIB_FINISH);<br>echo&#xA0;$uncompressed;</span>
</code></div>
  </div>

  <div class="example-contents"><p>The above example will output:</p></div>
  <div class="example-contents screen">
<div class="cdata"><pre>
Data to compress, more data, and even more data!
</pre></div>
  </div>
 </div>
