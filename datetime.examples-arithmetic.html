---
layout: default
---

  <h2 class="title">DateTime Arithmetic</h2>
  <p class="para">
   The following examples show some pitfalls of DateTime arithmetic with regard
   to DST transitions and months having different numbers of days.
  </p>
  <p class="para">
   <div class="example" id="example-2495">
    <p><strong>Example #1 DateTime::add/sub add intervals which cover elapsed time</strong></p>
    <div class="example-contents"><p>
        Adding PT24H over a DST transition will appear to add 23/25 hours (for
        most timezones).
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$dt&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;2015-11-01&#xA0;00:00:00&quot;</span><span style="color: #007700">,&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;America/New_York&quot;</span><span style="color: #007700">));<br>echo&#xA0;</span><span style="color: #DD0000">&quot;Start:&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&#xA0;</span><span style="color: #0000BB">DateInterval</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;PT3H&quot;</span><span style="color: #007700">));<br>echo&#xA0;</span><span style="color: #DD0000">&quot;End:&#xA0;&#xA0;&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Start: 2015-11-01 00:00:00 -04:00
End:   2015-11-01 02:00:00 -05:00
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2496">
    <p><strong>Example #2 DateTime::modify and strtotime increment or decrement individual component values</strong></p>
    <div class="example-contents"><p>
     Adding +24 hours over a DST transition will add exactly 24 hours as seen in
     the date/time string (unless the start or end time is on a transition
     point).
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$dt&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;2015-11-01&#xA0;00:00:00&quot;</span><span style="color: #007700">,&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;America/New_York&quot;</span><span style="color: #007700">));<br>echo&#xA0;</span><span style="color: #DD0000">&quot;Start:&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">modify</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;+24&#xA0;hours&quot;</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;End:&#xA0;&#xA0;&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Start: 2015-11-01 00:00:00 -04:00
End:   2015-11-02 00:00:00 -05:00
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2497">
    <p><strong>Example #3 Adding or subtracting times can over- or underflow dates</strong></p>
    <div class="example-contents"><p>
     Like where January 31st + 1 month will result in March 2nd (leap year) or
     3rd (normal year).
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">echo&#xA0;</span><span style="color: #DD0000">&quot;Normal&#xA0;year:\n&quot;</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;February&#xA0;has&#xA0;28&#xA0;days<br></span><span style="color: #0000BB">$dt&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;2015-01-31&#xA0;00:00:00&quot;</span><span style="color: #007700">,&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;America/New_York&quot;</span><span style="color: #007700">));<br>echo&#xA0;</span><span style="color: #DD0000">&quot;Start:&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">modify</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;+1&#xA0;month&quot;</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;End:&#xA0;&#xA0;&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br><br>echo&#xA0;</span><span style="color: #DD0000">&quot;Leap&#xA0;year:\n&quot;</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;February&#xA0;has&#xA0;29&#xA0;days<br></span><span style="color: #0000BB">$dt&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;2016-01-31&#xA0;00:00:00&quot;</span><span style="color: #007700">,&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;America/New_York&quot;</span><span style="color: #007700">));<br>echo&#xA0;</span><span style="color: #DD0000">&quot;Start:&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">modify</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;+1&#xA0;month&quot;</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;End:&#xA0;&#xA0;&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Normal year:
Start: 2015-01-31 00:00:00 -05:00
End:   2015-03-03 00:00:00 -05:00
Leap year:
Start: 2016-01-31 00:00:00 -05:00
End:   2016-03-02 00:00:00 -05:00
</pre></div>
    </div>
    <div class="example-contents"><p>
     To get the last day of the next month (i.e. to prevent the overflow),
     the <em>last day of</em> format is available as of PHP 5.3.0.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">echo&#xA0;</span><span style="color: #DD0000">&quot;Normal&#xA0;year:\n&quot;</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;February&#xA0;has&#xA0;28&#xA0;days<br></span><span style="color: #0000BB">$dt&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;2015-01-31&#xA0;00:00:00&quot;</span><span style="color: #007700">,&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;America/New_York&quot;</span><span style="color: #007700">));<br>echo&#xA0;</span><span style="color: #DD0000">&quot;Start:&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">modify</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;last&#xA0;day&#xA0;of&#xA0;next&#xA0;month&quot;</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;End:&#xA0;&#xA0;&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br><br>echo&#xA0;</span><span style="color: #DD0000">&quot;Leap&#xA0;year:\n&quot;</span><span style="color: #007700">;&#xA0;</span><span style="color: #FF8000">//&#xA0;February&#xA0;has&#xA0;29&#xA0;days<br></span><span style="color: #0000BB">$dt&#xA0;</span><span style="color: #007700">=&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;2016-01-31&#xA0;00:00:00&quot;</span><span style="color: #007700">,&#xA0;new&#xA0;</span><span style="color: #0000BB">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;America/New_York&quot;</span><span style="color: #007700">));<br>echo&#xA0;</span><span style="color: #DD0000">&quot;Start:&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">modify</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;last&#xA0;day&#xA0;of&#xA0;next&#xA0;month&quot;</span><span style="color: #007700">);<br>echo&#xA0;</span><span style="color: #DD0000">&quot;End:&#xA0;&#xA0;&#xA0;&quot;</span><span style="color: #007700">,&#xA0;</span><span style="color: #0000BB">$dt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">&quot;Y-m-d&#xA0;H:i:s&#xA0;P&quot;</span><span style="color: #007700">),&#xA0;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Normal year:
Start: 2015-01-31 00:00:00 -05:00
End:   2015-02-28 00:00:00 -05:00
Leap year:
Start: 2016-01-31 00:00:00 -05:00
End:   2016-02-29 00:00:00 -05:00
</pre></div>
    </div>
   </div>
  </p>
 